{
    "topic": "demonstrates the concept of a histogram, specifically a histogram that is created by",
    "code": [
        "\n",
        "from manim_imports_ext import *\n",
        "from _2018.eop.reusable_imports import *\n",
        "\n",
        "class GenericMorphBrickRowIntoHistogram(Scene):\n",
        "\n",
        "    CONFIG = {\n",
        "        \"level\" : 3,\n",
        "        \"bar_width\" : 2.0,\n",
        "        \"bar_anchor_height\" : -3.0,\n",
        "        \"show_tallies\" : False,\n",
        "        \"show_nb_flips\" : True\n",
        "    }\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "        self.row = BrickRow(self.level, height = self.bar_width, width = 10)\n",
        "        self.bars = OutlineableBars(*[self.row.rects[i] for i in range(self.level + 1)])\n",
        "        self.bar_anchors = [self.bar_anchor_height * UP + self.row.height * (i - 0.5 * self.level) * RIGHT for i in range(self.level + 1)]\n",
        "\n",
        "        self.add(self.row)\n",
        "\n",
        "        if self.show_tallies:\n",
        "\n",
        "            tallies = VMobject()\n",
        "\n",
        "            for (i,brick) in enumerate(self.row.rects):\n",
        "                tally = TallyStack(self.level - i, i)\n",
        "                tally.move_to(brick)\n",
        "                self.add(tally)\n",
        "                tallies.add(tally)\n",
        "                brick.set_stroke(width = 3)\n",
        "\n",
        "        if self.show_nb_flips:\n",
        "            nb_flips_text = OldTexText(\"\\# of flips: \" + str(self.level))\n",
        "            nb_flips_text.to_corner(UR)\n",
        "            self.add(nb_flips_text)\n",
        "\n",
        "        self.remove(self.row.subdivs, self.row.border)\n",
        "\n",
        "        for rect in self.row.rects:\n",
        "            rect.set_stroke(color = WHITE, width = 3)\n",
        "\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            self.row.rects.space_out_submobjects, {\"factor\" : 1.3},\n",
        "            FadeOut(tallies)\n",
        "        )\n",
        "        self.wait()\n",
        "        anims = []\n",
        "        for brick in self.row.rects:\n",
        "            anims.append(brick.rotate)\n",
        "            anims.append(TAU/4)\n",
        "        \n",
        "        self.play(*anims)\n",
        "\n",
        "        self.wait()\n",
        "\n",
        "        anims = []\n",
        "        for (i,brick) in enumerate(self.row.rects):\n",
        "            anims.append(brick.next_to)\n",
        "            anims.append(self.bar_anchors[i])\n",
        "            anims.append({\"direction\" : UP, \"buff\" : 0})\n",
        "        self.play(*anims)\n",
        "        self.wait()\n",
        "\n",
        "        self.bars.create_outline()\n",
        "        anims = [\n",
        "            ApplyMethod(rect.set_stroke, {\"width\" : 0})\n",
        "                for rect in self.bars\n",
        "        ]\n",
        "        anims.append(FadeIn(self.bars.outline))\n",
        "        self.play(*anims)\n",
        "\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "\n",
        "class MorphBrickRowIntoHistogram3(GenericMorphBrickRowIntoHistogram):\n",
        "    \n",
        "    CONFIG = {\n",
        "        \"level\" : 3,\n",
        "        \"prob_denominator\" : 8,\n",
        "        \"bar_width\" : 2.0,\n",
        "        \"bar_anchor_height\" : -3.0,\n",
        "        \"show_tallies\" : True,\n",
        "        \"show_nb_flips\" : False\n",
        "    }\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "\n",
        "\n",
        "        super(MorphBrickRowIntoHistogram3,self).construct()\n",
        "        \n",
        "\n",
        "        # draw x-axis\n",
        "\n",
        "        x_axis = Line(ORIGIN, 10 * RIGHT, color = WHITE, buff = 0)\n",
        "        x_axis.next_to(self.bars, DOWN, buff = 0)\n",
        "        #x_labels = VMobject(*[Tex(str(i)) for i in range(4)])\n",
        "        x_labels = VMobject()\n",
        "\n",
        "        for (i, bar) in enumerate(self.bars):\n",
        "            label = Integer(i)\n",
        "            label.next_to(self.bar_anchors[i], DOWN)\n",
        "            x_labels.add(label)\n",
        "\n",
        "        nb_tails_label = OldTexText(\"\\# of tails\")\n",
        "        nb_tails_label.next_to(x_labels[-1], RIGHT, MED_LARGE_BUFF)\n",
        "\n",
        "\n",
        "\n",
        "        # draw y-guides\n",
        "\n",
        "        y_guides = VMobject()\n",
        "        for i in range(0,self.prob_denominator + 1):\n",
        "            y_guide = Line(5 * LEFT, 5 * RIGHT, stroke_color = GREY)\n",
        "            y_guide.move_to(self.bar_anchor_height * UP + i * float(self.row.width) / self.prob_denominator * UP)\n",
        "            y_guide_label = OldTex(\"{\" + str(i) + \"\\over \" + str(self.prob_denominator) + \"}\", color = GREY)\n",
        "            y_guide_label.scale(0.7)\n",
        "            y_guide_label.next_to(y_guide, LEFT)\n",
        "            if i != 0:\n",
        "                y_guide.add(y_guide_label)\n",
        "            y_guides.add(y_guide)\n",
        "        self.wait()\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(y_guides),\n",
        "            Animation(self.bars.outline),\n",
        "            Animation(self.bars)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(x_axis),\n",
        "            FadeIn(x_labels),\n",
        "            FadeIn(nb_tails_label)\n",
        "        )\n",
        "\n",
        "        self.add_foreground_mobject(nb_tails_label)\n",
        "        area_color = YELLOW\n",
        "\n",
        "        total_area_text = OldTexText(\"total area =\", color = area_color)\n",
        "        area_decimal = DecimalNumber(0, color = area_color, num_decimal_places = 3)\n",
        "        area_decimal.next_to(total_area_text, RIGHT)\n",
        "\n",
        "        total_area_group = VGroup(total_area_text, area_decimal)\n",
        "        total_area_group.move_to(2.7 * UP)\n",
        "        self.wait()\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(total_area_text),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        cumulative_areas = [0.125, 0.5, 0.875, 1]\n",
        "        covering_rects = self.bars.copy()\n",
        "        for (i,rect) in enumerate(covering_rects):\n",
        "            rect.set_fill(color = area_color, opacity = 0.5)\n",
        "            self.play(\n",
        "                FadeIn(rect, rate_func = linear),\n",
        "                ChangeDecimalToValue(area_decimal, cumulative_areas[i],\n",
        "                    rate_func = linear)\n",
        "            )\n",
        "            self.wait(0.2)\n",
        "\n",
        "        self.wait()\n",
        "\n",
        "        total_area_rect = SurroundingRectangle(\n",
        "            total_area_group,\n",
        "            buff = MED_SMALL_BUFF,\n",
        "            stroke_color = area_color\n",
        "        )\n",
        "\n",
        "        self.play(\n",
        "            FadeOut(covering_rects),\n",
        "            ShowCreation(total_area_rect)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "\n",
        "class MorphBrickRowIntoHistogram20(GenericMorphBrickRowIntoHistogram):\n",
        "    CONFIG = {\n",
        "        \"level\" : 20,\n",
        "        \"prob_ticks\" : 0.05,\n",
        "        \"bar_width\" : 0.5,\n",
        "        \"bar_anchor_height\" : -3.0,\n",
        "        \"x_ticks\": 5\n",
        "    }\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "        super(MorphBrickRowIntoHistogram20, self).construct()\n",
        "\n",
        "        x_axis = Line(ORIGIN, 10 * RIGHT, color = WHITE, buff = 0)\n",
        "        x_axis.next_to(self.bars, DOWN, buff = 0)\n",
        "        #x_labels = VMobject(*[Tex(str(i)) for i in range(4)])\n",
        "        x_labels = VMobject()\n",
        "        for (i, bar) in enumerate(self.bars):\n",
        "            if i % self.x_ticks != 0:\n",
        "                continue\n",
        "            label = Integer(i)\n",
        "            label.next_to(self.bar_anchors[i], DOWN)\n",
        "            x_labels.add(label)\n",
        "\n",
        "        nb_tails_label = OldTexText(\"\\# of tails\")\n",
        "        nb_tails_label.move_to(5 * RIGHT + 2.5 * DOWN)\n",
        "        self.wait()\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(x_axis),\n",
        "            FadeIn(x_labels),\n",
        "            FadeIn(nb_tails_label)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # draw y-guides\n",
        "\n",
        "        max_prob = float(choose(self.level, self.level/2)) / 2 ** self.level\n",
        "\n",
        "        y_guides = VMobject()\n",
        "        y_guide_heights = []\n",
        "        prob_grid = np.arange(self.prob_ticks, 1.3 * max_prob, self.prob_ticks)\n",
        "        for i in prob_grid:\n",
        "            y_guide = Line(5 * LEFT, 5 * RIGHT, stroke_color = GREY)\n",
        "            y_guide_height = self.bar_anchor_height + i * float(self.row.width)\n",
        "            y_guide_heights.append(y_guide_height)\n",
        "            y_guide.move_to(y_guide_height * UP)\n",
        "            y_guide_label = DecimalNumber(i, num_decimal_places = 2, color = GREY)\n",
        "            y_guide_label.scale(0.7)\n",
        "            y_guide_label.next_to(y_guide, LEFT)\n",
        "            y_guide.add(y_guide_label)\n",
        "            y_guides.add(y_guide)\n",
        "\n",
        "        self.bring_to_back(y_guides)\n",
        "        self.play(FadeIn(y_guides), Animation(self.bars))\n",
        "        self.wait()\n",
        "\n",
        "        histogram_width = self.bars.get_width()\n",
        "        histogram_height = self.bars.get_height()\n",
        "\n",
        "        # scale to fit screen\n",
        "        self.scale_x = 10.0/((len(self.bars) - 1) * self.bar_width)\n",
        "        self.scale_y = 6.0/histogram_height\n",
        "\n",
        "\n",
        "        anims = []\n",
        "        for (bar, x_label) in zip(self.bars, x_labels):\n",
        "            v = (self.scale_x - 1) * x_label.get_center()[0] * RIGHT\n",
        "            anims.append(x_label.shift)\n",
        "            anims.append(v)\n",
        "\n",
        "\n",
        "        anims.append(self.bars.stretch_about_point)\n",
        "        anims.append(self.scale_x)\n",
        "        anims.append(0)\n",
        "        anims.append(ORIGIN)\n",
        "        anims.append(self.bars.outline.stretch_about_point)\n",
        "        anims.append(self.scale_x)\n",
        "        anims.append(0)\n",
        "        anims.append(ORIGIN)\n",
        "\n",
        "        self.play(*anims)\n",
        "        self.wait()\n",
        "\n",
        "        anims = []\n",
        "        for (guide, i, h) in zip(y_guides, prob_grid, y_guide_heights):\n",
        "            new_y_guide_height = self.bar_anchor_height + i * self.scale_y * float(self.row.width)\n",
        "            v = (new_y_guide_height - h) * UP\n",
        "            anims.append(guide.shift)\n",
        "            anims.append(v)\n",
        "\n",
        "        anims.append(self.bars.stretch_about_point)\n",
        "        anims.append(self.scale_y)\n",
        "        anims.append(1)\n",
        "        anims.append(self.bars.get_bottom())\n",
        "        anims.append(self.bars.outline.stretch_about_point)\n",
        "        anims.append(self.scale_y)\n",
        "        anims.append(1)\n",
        "        anims.append(self.bars.get_bottom())\n",
        "\n",
        "        self.play(*anims)\n",
        "        self.wait()\n",
        "\n",
        "class MorphBrickRowIntoHistogram100(MorphBrickRowIntoHistogram20):\n",
        "    CONFIG = {\n",
        "        \"level\" : 100,\n",
        "        \"x_ticks\": 20,\n",
        "        \"prob_ticks\": 0.02\n",
        "    }\n",
        "\n",
        "class MorphBrickRowIntoHistogram500(MorphBrickRowIntoHistogram20):\n",
        "    CONFIG = {\n",
        "        \"level\" : 500,\n",
        "        \"x_ticks\": 100,\n",
        "        \"prob_ticks\": 0.01\n",
        "    }\n"
    ]
}