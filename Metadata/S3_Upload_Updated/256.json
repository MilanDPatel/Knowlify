{
    "topic": "The mathematical concept being demonstrated is the breakdown of a large number (2^256)",
    "code": [
        "from manim_imports_ext import *\n",
        "\n",
        "from _2017.crypto import sha256_tex_mob, bit_string_to_mobject, BitcoinLogo\n",
        "\n",
        "def get_google_logo():\n",
        "    result = SVGMobject(\n",
        "        file_name = \"google_logo\",\n",
        "        height = 0.75\n",
        "    )\n",
        "    blue, red, yellow, green = [\n",
        "        \"#4885ed\", \"#db3236\", \"#f4c20d\", \"#3cba54\"\n",
        "    ]\n",
        "    colors = [red, yellow, blue, green, red, blue]\n",
        "    result.set_color_by_gradient(*colors)\n",
        "    return result\n",
        "\n",
        "class LastVideo(Scene):\n",
        "    def construct(self):\n",
        "        title = OldTexText(\"Crypto\", \"currencies\", arg_separator = \"\")\n",
        "        title[0].set_color(YELLOW)\n",
        "        title.scale(1.5)\n",
        "        title.to_edge(UP)\n",
        "        screen_rect = ScreenRectangle(height = 6)\n",
        "        screen_rect.next_to(title, DOWN)\n",
        "\n",
        "        self.add(title)\n",
        "        self.play(ShowCreation(screen_rect))\n",
        "        self.wait()\n",
        "\n",
        "class BreakUp2To256(PiCreatureScene):\n",
        "    def construct(self):\n",
        "        self.initialize_bits()\n",
        "        self.add_number()\n",
        "        self.break_up_as_powers_of_two()\n",
        "        self.break_up_as_four_billions()\n",
        "        self.reorganize_four_billions()\n",
        "\n",
        "    def initialize_bits(self):\n",
        "        bits = bit_string_to_mobject(\"\")\n",
        "        bits.to_corner(UP+LEFT)\n",
        "        one = OldTex(\"1\")[0]\n",
        "        one.replace(bits[0], dim_to_match = 1)\n",
        "        self.add(bits)\n",
        "        self.add_foreground_mobject(VGroup(*bits[-15:]))\n",
        "        self.number = 0\n",
        "        self.bits = bits\n",
        "        self.one = one\n",
        "        self.zero = bits[0].copy()\n",
        "\n",
        "    def add_number(self):\n",
        "        brace = Brace(self.bits, RIGHT)\n",
        "\n",
        "        number, possibilities = expression = OldTexText(\n",
        "            \"$2^{256}$\", \"possibilities\"\n",
        "        )\n",
        "        number.set_color(YELLOW)\n",
        "        expression.next_to(brace, RIGHT)\n",
        "\n",
        "        words = OldTexText(\"Seems big...I guess...\")\n",
        "        words.next_to(self.pi_creature.get_corner(UP+LEFT), UP)\n",
        "\n",
        "        self.play(\n",
        "            self.pi_creature.change, \"raise_right_hand\",\n",
        "            GrowFromCenter(brace),\n",
        "            Write(expression, run_time = 1)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            self.pi_creature.change, \"maybe\",\n",
        "            Write(words)\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(\n",
        "            self.pi_creature.change, \"happy\",\n",
        "            FadeOut(words)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        self.expression = expression\n",
        "        self.bits_brace = brace\n",
        "\n",
        "    def break_up_as_powers_of_two(self):\n",
        "        bits = self.bits\n",
        "        bits.generate_target()\n",
        "        subgroups = [\n",
        "            VGroup(*bits.target[32*i:32*(i+1)])\n",
        "            for i in range(8)\n",
        "        ]\n",
        "        subexpressions = VGroup()\n",
        "        for i, subgroup in enumerate(subgroups):\n",
        "            subgroup.shift(i*MED_LARGE_BUFF*DOWN)\n",
        "            subexpression = OldTexText(\n",
        "                \"$2^{32}$\", \"possibilities\"\n",
        "            )\n",
        "            subexpression[0].set_color(GREEN)\n",
        "            subexpression.next_to(subgroup, RIGHT)\n",
        "            subexpressions.add(subexpression)\n",
        "\n",
        "        self.play(\n",
        "            FadeOut(self.bits_brace),\n",
        "            ReplacementTransform(\n",
        "                VGroup(self.expression),\n",
        "                subexpressions\n",
        "            ),\n",
        "            MoveToTarget(bits)\n",
        "        )\n",
        "        self.play(self.pi_creature.change, \"pondering\")\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "        self.subexpressions = subexpressions\n",
        "\n",
        "    def break_up_as_four_billions(self):\n",
        "        new_subexpressions = VGroup()\n",
        "        for subexpression in self.subexpressions:\n",
        "            new_subexpression = OldTexText(\n",
        "                \"4 Billion\", \"possibilities\"\n",
        "            )\n",
        "            new_subexpression[0].set_color(YELLOW)\n",
        "            new_subexpression.move_to(subexpression, LEFT)\n",
        "            new_subexpressions.add(new_subexpression)\n",
        "\n",
        "        self.play(\n",
        "            Transform(\n",
        "                self.subexpressions, new_subexpressions,\n",
        "                run_time = 2,\n",
        "                lag_ratio = 0.5,\n",
        "            ),\n",
        "            FadeOut(self.pi_creature)\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "    def reorganize_four_billions(self):\n",
        "        target = VGroup(*[\n",
        "            OldTexText(\n",
        "                \"$\\\\big($\", \"4 Billion\", \"$\\\\big)$\",\n",
        "                arg_separator = \"\"\n",
        "            )\n",
        "            for x in range(8)\n",
        "        ])\n",
        "        target.arrange(RIGHT, buff = SMALL_BUFF)\n",
        "        target.to_edge(UP)\n",
        "        target.set_width(FRAME_WIDTH - LARGE_BUFF)\n",
        "        parens = VGroup(*it.chain(*[\n",
        "            [t[0], t[2]] for t in target\n",
        "        ]))\n",
        "        target_four_billions = VGroup(*[t[1] for t in target])\n",
        "        target_four_billions.set_color(YELLOW)\n",
        "        four_billions, to_fade = [\n",
        "            VGroup(*[se[i] for se in self.subexpressions])\n",
        "            for i in range(2)\n",
        "        ]\n",
        "\n",
        "        self.play(\n",
        "            self.bits.to_corner, DOWN+LEFT,\n",
        "            Transform(four_billions, target_four_billions),\n",
        "            LaggedStartMap(FadeIn, parens),\n",
        "            FadeOut(to_fade)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "    ######\n",
        "\n",
        "    def wait(self, time = 1):\n",
        "        self.play(Animation(self.bits, run_time = time))\n",
        "\n",
        "    def update_frame(self, *args, **kwargs):\n",
        "        self.number += 1\n",
        "        new_bit_string = bin(self.number)[2:]\n",
        "        for i, bit in enumerate(reversed(new_bit_string)):\n",
        "            index = -i-1\n",
        "            bit_mob = self.bits[index]\n",
        "            if bit == \"0\":\n",
        "                new_mob = self.zero.copy()\n",
        "            else:\n",
        "                new_mob = self.one.copy()\n",
        "            new_mob.replace(bit_mob, dim_to_match = 1)\n",
        "            Transform(bit_mob, new_mob).update(1)\n",
        "        Scene.update_frame(self, *args, **kwargs)\n",
        "\n",
        "class ShowTwoTo32(Scene):\n",
        "    def construct(self):\n",
        "        mob = OldTex(\"2^{32} = 4{,}294{,}967{,}296\")\n",
        "        mob.scale(1.5)\n",
        "        self.add(mob)\n",
        "        self.wait()\n",
        "\n",
        "class MainBreakdown(Scene):\n",
        "    CONFIG = {\n",
        "        \"n_group_rows\" : 8,\n",
        "        \"n_group_cols\" : 8,\n",
        "    }\n",
        "    def construct(self):\n",
        "        self.add_four_billions()\n",
        "        self.gpu_packed_computer()\n",
        "        self.kilo_google()\n",
        "        self.half_all_people_on_earth()\n",
        "        self.four_billion_earths()\n",
        "        self.four_billion_galxies()\n",
        "        self.show_time_scale()\n",
        "        self.show_probability()\n",
        "\n",
        "    def add_four_billions(self):\n",
        "        top_line = VGroup()\n",
        "        four_billions = VGroup()\n",
        "        for x in range(8):\n",
        "            mob = OldTexText(\n",
        "                \"$\\\\big($\", \"4 Billion\", \"$\\\\big)$\",\n",
        "                arg_separator = \"\"\n",
        "            )\n",
        "            top_line.add(mob)\n",
        "            four_billions.add(mob[1])\n",
        "        top_line.arrange(RIGHT, buff = SMALL_BUFF)\n",
        "        top_line.set_width(FRAME_WIDTH - LARGE_BUFF)\n",
        "        top_line.to_edge(UP)\n",
        "        four_billions.set_color(YELLOW)\n",
        "        self.add(top_line)\n",
        "\n",
        "        self.top_line = top_line\n",
        "        self.four_billions = four_billions\n",
        "\n",
        "    def gpu_packed_computer(self):\n",
        "        self.show_gpu()\n",
        "        self.cram_computer_with_gpus()\n",
        "\n",
        "    def show_gpu(self):\n",
        "        gpu = SVGMobject(\n",
        "            file_name = \"gpu\",\n",
        "            height = 1,\n",
        "            fill_color = GREY_B,\n",
        "        )\n",
        "        name = OldTexText(\"Graphics\", \"Processing\", \"Unit\")\n",
        "        for word in name:\n",
        "            word[0].set_color(BLUE)\n",
        "        name.to_edge(LEFT)\n",
        "        gpu.next_to(name, UP)\n",
        "\n",
        "        hash_names = VGroup(*[\n",
        "            OldTexText(\"hash\")\n",
        "            for x in range(10)\n",
        "        ])\n",
        "        hash_names.arrange(DOWN, buff = MED_SMALL_BUFF)\n",
        "        hash_names.next_to(name, RIGHT, buff = 2)\n",
        "\n",
        "        paths = VGroup()\n",
        "        for hash_name in hash_names:\n",
        "            hash_name.add_background_rectangle(opacity = 0.5)\n",
        "            path = VMobject()\n",
        "            start_point = name.get_right() + SMALL_BUFF*RIGHT\n",
        "            end_point = start_point + (4+hash_name.get_width())*RIGHT\n",
        "            path.set_points([\n",
        "                start_point, \n",
        "                start_point+RIGHT,\n",
        "                hash_name.get_left()+LEFT,\n",
        "                hash_name.get_left(),\n",
        "                hash_name.get_left(),\n",
        "                hash_name.get_right(),\n",
        "                hash_name.get_right(),\n",
        "                hash_name.get_right() + RIGHT,\n",
        "                end_point + LEFT,\n",
        "                end_point,\n",
        "            ])\n",
        "            paths.add(path)\n",
        "        paths.set_stroke(width = 3)\n",
        "        paths.set_color_by_gradient(BLUE, GREEN)\n",
        "        def get_passing_flash():\n",
        "            return ShowPassingFlash(\n",
        "                paths,\n",
        "                lag_ratio = 0,\n",
        "                time_width = 0.7,\n",
        "                run_time = 2,\n",
        "            )\n",
        "        rate_words = OldTexText(\n",
        "            \"$<$ 1 Billion\", \"Hashes/sec\"\n",
        "        )\n",
        "        rate_words.next_to(name, DOWN)\n",
        "\n",
        "        self.play(FadeIn(name))\n",
        "        self.play(DrawBorderThenFill(gpu))\n",
        "        self.play(\n",
        "            get_passing_flash(),\n",
        "            FadeIn(hash_names)\n",
        "        )\n",
        "        for x in range(2):\n",
        "            self.play(\n",
        "                get_passing_flash(),\n",
        "                Animation(hash_names)\n",
        "            )\n",
        "        self.play(\n",
        "            Write(rate_words, run_time = 2),\n",
        "            get_passing_flash(),\n",
        "            Animation(hash_names)\n",
        "        )\n",
        "        self.play(get_passing_flash(), Animation(hash_names))\n",
        "        self.play(*list(map(FadeOut, [name, hash_names])))\n",
        "\n",
        "        self.gpu = gpu\n",
        "        self.rate_words = rate_words\n",
        "\n",
        "    def cram_computer_with_gpus(self):\n",
        "        gpu = self.gpu\n",
        "        gpus = VGroup(gpu, *[gpu.copy() for x in range(5)])\n",
        "\n",
        "        rate_words = self.rate_words\n",
        "        four_billion = self.four_billions[0]\n",
        "\n",
        "        laptop = Laptop()\n",
        "        laptop.next_to(rate_words, RIGHT)\n",
        "        laptop.to_edge(RIGHT)\n",
        "        new_rate_words = OldTexText(\"4 Billion\", \"Hashes/sec\")\n",
        "        new_rate_words.move_to(rate_words)\n",
        "        new_rate_words[0].set_color(BLUE)\n",
        "\n",
        "        hps, h_line, target_laptop = self.get_fraction(\n",
        "            0, OldTexText(\"H/s\"), Laptop()\n",
        "        )\n",
        "        hps.scale(0.7)\n",
        "\n",
        "        self.play(FadeIn(laptop))\n",
        "        self.play(\n",
        "            gpus.arrange, RIGHT, SMALL_BUFF,\n",
        "            gpus.next_to, rate_words, UP,\n",
        "            gpus.to_edge, LEFT\n",
        "        )\n",
        "        self.play(\n",
        "            Transform(\n",
        "                four_billion.copy(), new_rate_words[0],\n",
        "                remover = True,\n",
        "            ),\n",
        "            Transform(rate_words, new_rate_words)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            LaggedStartMap(\n",
        "                ApplyFunction, gpus,\n",
        "                lambda g : (\n",
        "                    lambda m : m.scale(0.01).move_to(laptop),\n",
        "                    g\n",
        "                ),\n",
        "                remover = True\n",
        "            )\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            Transform(\n",
        "                rate_words[0], four_billion.copy().set_color(BLUE),\n",
        "                remover = True,\n",
        "            ),\n",
        "            four_billion.set_color, BLUE,\n",
        "            Transform(rate_words[1], hps),\n",
        "        )\n",
        "        self.play(\n",
        "            Transform(laptop, target_laptop),\n",
        "            ShowCreation(h_line),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "    def kilo_google(self):\n",
        "        self.create_four_billion_copies(1, Laptop())\n",
        "        google = self.get_google_logo()\n",
        "        google.next_to(\n",
        "            self.group_of_four_billion_things, UP,\n",
        "            buff = LARGE_BUFF,\n",
        "            aligned_edge = LEFT\n",
        "        )\n",
        "        google.shift(RIGHT)\n",
        "        millions = OldTexText(\"$\\\\sim$ Millions of servers\")\n",
        "        millions.next_to(google, RIGHT)\n",
        "        plus_plus = OldTex(\"++\")\n",
        "        plus_plus.next_to(google, RIGHT, SMALL_BUFF)\n",
        "        plus_plus.set_stroke(width = 2)\n",
        "        kilo = OldTexText(\"Kilo\")\n",
        "        kilo.scale(1.5)\n",
        "        kilo.next_to(google[-1], LEFT, SMALL_BUFF, DOWN)\n",
        "        kilogoogle = VGroup(kilo, google, plus_plus)\n",
        "\n",
        "        four_billion = self.four_billions[1]\n",
        "        laptop, h_line, target_kilogoogle = self.get_fraction(\n",
        "            1, Laptop(), self.get_kilogoogle()\n",
        "        )\n",
        "\n",
        "        self.revert_to_original_skipping_status()\n",
        "        self.play(DrawBorderThenFill(google))\n",
        "        self.wait(2)\n",
        "        self.play(Write(millions))\n",
        "        self.wait(2)\n",
        "        self.play(LaggedStartMap(\n",
        "            Indicate, self.group_of_four_billion_things,\n",
        "            run_time = 4,\n",
        "            rate_func = there_and_back,\n",
        "            lag_ratio = 0.25,\n",
        "        ))\n",
        "        self.play(FadeOut(millions), FadeIn(plus_plus))\n",
        "        self.play(Write(kilo))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            four_billion.restore,\n",
        "            FadeOut(self.group_of_four_billion_things)\n",
        "        )\n",
        "        self.play(\n",
        "            Transform(kilogoogle, target_kilogoogle),\n",
        "            FadeIn(laptop),\n",
        "            FadeIn(h_line),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "    def half_all_people_on_earth(self):\n",
        "        earth = self.get_earth()\n",
        "        people = OldTexText(\"7.3 Billion people\")\n",
        "        people.next_to(earth, RIGHT)\n",
        "        group = VGroup(earth, people)\n",
        "        group.next_to(self.four_billions, DOWN, MED_LARGE_BUFF)\n",
        "        group.shift(RIGHT)\n",
        "\n",
        "        kg, h_line, target_earth = self.get_fraction(\n",
        "            2, self.get_kilogoogle(), self.get_earth(), \n",
        "        )\n",
        "\n",
        "        self.play(\n",
        "            GrowFromCenter(earth),\n",
        "            Write(people)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.create_four_billion_copies(2, self.get_kilogoogle())\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            self.four_billions[2].restore,\n",
        "            Transform(earth, target_earth),\n",
        "            FadeIn(h_line),\n",
        "            FadeIn(kg),\n",
        "            FadeOut(self.group_of_four_billion_things),\n",
        "            FadeOut(people)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "    def four_billion_earths(self):\n",
        "        self.create_four_billion_copies(\n",
        "            3, self.get_earth()\n",
        "        )\n",
        "        milky_way = ImageMobject(\"milky_way\")\n",
        "        milky_way.set_height(3)\n",
        "        milky_way.to_edge(LEFT, buff = 0)\n",
        "        milky_way.shift(DOWN)\n",
        "\n",
        "        n_stars_estimate = OldTexText(\"100 to 400 \\\\\\\\ billion stars\")\n",
        "        n_stars_estimate.next_to(milky_way, RIGHT)\n",
        "        n_stars_estimate.shift(UP)\n",
        "\n",
        "        earth, h_line, denom = self.get_fraction(\n",
        "            3, self.get_earth(), self.get_galaxy()\n",
        "        )\n",
        "\n",
        "        self.revert_to_original_skipping_status()\n",
        "        self.play(FadeIn(milky_way))\n",
        "        self.play(Write(n_stars_estimate))\n",
        "        self.wait()\n",
        "        self.play(LaggedStartMap(\n",
        "            Indicate, self.group_of_four_billion_things,\n",
        "            rate_func = there_and_back,\n",
        "            lag_ratio = 0.2,\n",
        "            run_time = 3,\n",
        "        ))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            ReplacementTransform(\n",
        "                self.group_of_four_billion_things,\n",
        "                VGroup(earth)\n",
        "            ),\n",
        "            ShowCreation(h_line),\n",
        "            FadeIn(denom),\n",
        "            self.four_billions[3].restore,\n",
        "            FadeOut(milky_way),\n",
        "            FadeOut(n_stars_estimate),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "    def four_billion_galxies(self):\n",
        "        self.create_four_billion_copies(4, self.get_galaxy())\n",
        "        num, h_line, denom = fraction = self.get_fraction(\n",
        "            4, self.get_galaxy(), OldTexText(\"GGSC\").set_color(BLUE)\n",
        "        )\n",
        "\n",
        "        name = OldTexText(\n",
        "            \"Giga\", \"Galactic \\\\\\\\\", \" Super\", \" Computer\",\n",
        "            arg_separator = \"\"\n",
        "        )\n",
        "        for word in name:\n",
        "            word[0].set_color(BLUE)\n",
        "        name.next_to(self.group_of_four_billion_things, UP)\n",
        "\n",
        "        self.play(Write(name))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            self.four_billions[4].restore,\n",
        "            ReplacementTransform(\n",
        "                self.group_of_four_billion_things, VGroup(num),\n",
        "                run_time = 2,\n",
        "                lag_ratio = 0.5\n",
        "            ),\n",
        "            ShowCreation(h_line),\n",
        "            ReplacementTransform(\n",
        "                name, denom\n",
        "            ),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "    def show_time_scale(self):\n",
        "        fb1, fb2 = self.four_billions[5:7]\n",
        "        seconds_to_years = OldTexText(\"seconds $\\\\approx$ 126.8 years\")\n",
        "        seconds_to_years.shift(LEFT)\n",
        "        years_to_eons = OldTexText(\n",
        "            \"$\\\\times$ 126.8 years\", \"$\\\\approx$ 507 Billion years\", \n",
        "        )\n",
        "        years_to_eons.next_to(\n",
        "            seconds_to_years, DOWN, \n",
        "            aligned_edge = LEFT,\n",
        "        )\n",
        "        universe_lifetimes = OldTexText(\"$\\\\approx 37 \\\\times$ Age of universe\")\n",
        "        universe_lifetimes.next_to(\n",
        "            years_to_eons[1], DOWN, \n",
        "            aligned_edge = LEFT\n",
        "        )\n",
        "\n",
        "        for fb, words in (fb1, seconds_to_years), (fb2, years_to_eons):\n",
        "            self.play(\n",
        "                fb.scale, 1.3,\n",
        "                fb.next_to, words, LEFT, \n",
        "                fb.set_color, BLUE,\n",
        "                Write(words)\n",
        "            )\n",
        "            self.wait()\n",
        "        self.play(Write(universe_lifetimes))\n",
        "        self.wait()\n",
        "\n",
        "    def show_probability(self):\n",
        "        four_billion = self.four_billions[7]\n",
        "        words = OldTexText(\n",
        "            \"1 in \", \"4 Billion\\\\\\\\\",\n",
        "            \"chance of success\"\n",
        "        )\n",
        "        words.next_to(four_billion, DOWN, buff = MED_LARGE_BUFF)\n",
        "        words.to_edge(RIGHT)\n",
        "        words[1].set_color(BLUE)\n",
        "\n",
        "        self.play(\n",
        "            Write(VGroup(*words[::2])),\n",
        "            Transform(four_billion, words[1])\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "    ############\n",
        "\n",
        "    def create_four_billion_copies(self, index, mobject):\n",
        "        four_billion = self.four_billions[index]\n",
        "        four_billion.set_color(BLUE)\n",
        "        four_billion.save_state()\n",
        "\n",
        "        group = VGroup(*[\n",
        "            VGroup(*[\n",
        "                mobject.copy().set_height(0.25)\n",
        "                for x in range(self.n_group_rows)\n",
        "            ]).arrange(DOWN, buff = SMALL_BUFF)\n",
        "            for y in range(self.n_group_cols-1)\n",
        "        ])\n",
        "        dots = OldTex(\"\\\\dots\")\n",
        "        group.add(dots)\n",
        "        group.add(*[group[0].copy() for x in range(2)])\n",
        "        group.arrange(RIGHT, buff = SMALL_BUFF)\n",
        "        group.set_height(FRAME_Y_RADIUS)\n",
        "        max_width = 1.25*FRAME_X_RADIUS\n",
        "        if group.get_width() > max_width:\n",
        "            group.set_width(max_width)\n",
        "        group.to_corner(DOWN+RIGHT)\n",
        "        group = VGroup(*it.chain(*group))\n",
        "\n",
        "        brace = Brace(group, LEFT)\n",
        "\n",
        "        self.play(\n",
        "            four_billion.scale, 2,\n",
        "            four_billion.next_to, brace, LEFT,\n",
        "            GrowFromCenter(brace),\n",
        "            LaggedStartMap(\n",
        "                FadeIn, group,\n",
        "                run_time = 3,\n",
        "                lag_ratio = 0.2\n",
        "            )\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        group.add_to_back(brace)\n",
        "        self.group_of_four_billion_things = group\n",
        "\n",
        "    def get_fraction(self, index, numerator, denominator):\n",
        "        four_billion = self.four_billions[index]\n",
        "        if hasattr(four_billion, \"saved_state\"):\n",
        "            four_billion = four_billion.saved_state\n",
        "\n",
        "        space = LARGE_BUFF\n",
        "        h_line = Line(LEFT, RIGHT)\n",
        "        h_line.set_width(four_billion.get_width())\n",
        "        h_line.next_to(four_billion, DOWN, space)\n",
        "        for mob in numerator, denominator:\n",
        "            mob.set_height(0.75*space)\n",
        "            max_width = h_line.get_width()\n",
        "            if mob.get_width() > max_width:\n",
        "                mob.set_width(max_width)\n",
        "        numerator.next_to(h_line, UP, SMALL_BUFF)\n",
        "        denominator.next_to(h_line, DOWN, SMALL_BUFF)\n",
        "        fraction = VGroup(numerator, h_line, denominator)\n",
        "\n",
        "        return fraction\n",
        "\n",
        "    def get_google_logo(self):\n",
        "        return get_google_logo()\n",
        "\n",
        "    def get_kilogoogle(self):\n",
        "        G = self.get_google_logo()[-1]\n",
        "        kilo = OldTexText(\"K\")\n",
        "        kilo.scale(1.5)\n",
        "        kilo.next_to(G[-1], LEFT, SMALL_BUFF, DOWN)\n",
        "        plus_plus = OldTex(\"++\")\n",
        "        plus_plus.set_stroke(width = 1)\n",
        "        plus_plus.next_to(G, RIGHT, SMALL_BUFF)\n",
        "        return VGroup(kilo, G, plus_plus)\n",
        "\n",
        "    def get_earth(self):\n",
        "        earth = SVGMobject(\n",
        "            file_name = \"earth\",\n",
        "            height = 1.5,\n",
        "            fill_color = BLACK,\n",
        "        )\n",
        "        circle = Circle(\n",
        "            stroke_width = 3,\n",
        "            stroke_color = GREEN,\n",
        "            fill_opacity = 1,\n",
        "            fill_color = BLUE_C,\n",
        "        )\n",
        "        circle.replace(earth)\n",
        "        earth.add_to_back(circle)\n",
        "        return earth\n",
        "\n",
        "    def get_galaxy(self):\n",
        "        return SVGMobject(\n",
        "            file_name = \"galaxy\",\n",
        "            fill_opacity = 0,\n",
        "            stroke_width = 3,\n",
        "            stroke_color = WHITE,\n",
        "            height = 1,\n",
        "        )\n",
        "        \n",
        "class WriteTWoTo160(Scene):\n",
        "    def construct(self):\n",
        "        mob = OldTexText(\"$2^{160}$ \", \"Hashes/sec\")\n",
        "        mob[0].set_color(BLUE)\n",
        "        mob.scale(2)\n",
        "        self.play(Write(mob))\n",
        "        self.wait()\n",
        "\n",
        "class StateOfBitcoin(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        title = OldTexText(\"Total\", \"B\", \"mining\")\n",
        "        title.to_edge(UP)\n",
        "        bitcoin_logo = BitcoinLogo()\n",
        "        bitcoin_logo.set_height(0.5)\n",
        "        bitcoin_logo.move_to(title[1])\n",
        "        title.remove(title[1])\n",
        "\n",
        "        rate = OldTexText(\n",
        "            \"5 Billion Billion\", \n",
        "            \"$\\\\frac{\\\\text{Hashes}}{\\\\text{Second}}$\"\n",
        "        )\n",
        "        rate.next_to(title, DOWN, MED_LARGE_BUFF)\n",
        "\n",
        "        google = get_google_logo()\n",
        "        kilo = OldTexText(\"Kilo\")\n",
        "        kilo.scale(1.5)\n",
        "        kilo.next_to(google[-1], LEFT, SMALL_BUFF, DOWN)\n",
        "        third = OldTex(\"1 \\\\over 3\")\n",
        "        third.next_to(kilo, LEFT)\n",
        "        kilogoogle = VGroup(*it.chain(third, kilo, google))\n",
        "        kilogoogle.sort()\n",
        "        kilogoogle.next_to(rate, DOWN, MED_LARGE_BUFF)\n",
        "\n",
        "        rate.save_state()\n",
        "        rate.shift(DOWN)\n",
        "        rate.set_fill(opacity = 0)\n",
        "\n",
        "        all_text = VGroup(title, bitcoin_logo, rate, kilogoogle)\n",
        "\n",
        "        gpu = SVGMobject(\n",
        "            file_name = \"gpu\",\n",
        "            height = 1,\n",
        "            fill_color = GREY_B,\n",
        "        )\n",
        "        gpu.shift(0.5*FRAME_X_RADIUS*RIGHT)\n",
        "        gpu_name = OldTexText(\"GPU\")\n",
        "        gpu_name.set_color(BLUE)\n",
        "        gpu_name.next_to(gpu, UP)\n",
        "        gpu_group = VGroup(gpu, gpu_name)\n",
        "        gpu_group.to_edge(UP)\n",
        "        cross = Cross(gpu_group)\n",
        "        gpu_group.add(cross)\n",
        "\n",
        "        asic = OldTexText(\n",
        "            \"Application\", \"Specific\\\\\\\\\", \"Integrated\", \"Circuit\"\n",
        "        )\n",
        "        for word in asic:\n",
        "            word[0].set_color(YELLOW)\n",
        "        asic.move_to(gpu)\n",
        "        asic.to_edge(UP)\n",
        "        asic.shift(LEFT)\n",
        "        circuit = SVGMobject(\n",
        "            file_name = \"circuit\",\n",
        "            height = asic.get_height(),\n",
        "            fill_color = WHITE,\n",
        "        )\n",
        "        random.shuffle(circuit.submobjects)\n",
        "        circuit.set_color_by_gradient(WHITE, GREY)\n",
        "        circuit.next_to(asic, RIGHT)\n",
        "        asic_rate = OldTexText(\"Trillion hashes/sec\")\n",
        "        asic_rate.next_to(asic, DOWN, MED_LARGE_BUFF)\n",
        "        asic_rate.set_color(GREEN)\n",
        "\n",
        "        self.play(\n",
        "            Write(title),\n",
        "            DrawBorderThenFill(bitcoin_logo)\n",
        "        )\n",
        "        self.play(\n",
        "            self.teacher.change, \"raise_right_hand\",\n",
        "            rate.restore,\n",
        "        )\n",
        "        self.play_student_changes(*[\"pondering\"]*3)\n",
        "        self.play(LaggedStartMap(FadeIn, kilogoogle))\n",
        "        self.play_student_changes(*[\"surprised\"]*3)\n",
        "        self.wait()\n",
        "        self.play_student_changes(\n",
        "            *[\"plain\"]*3,\n",
        "            added_anims = [\n",
        "                all_text.to_edge, LEFT,\n",
        "                self.teacher.change_mode, \"happy\"\n",
        "            ],\n",
        "            look_at = gpu\n",
        "        )\n",
        "        self.play(\n",
        "            Write(gpu_name),\n",
        "            DrawBorderThenFill(gpu)\n",
        "        )\n",
        "        self.play(ShowCreation(cross))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            Write(asic),\n",
        "            gpu_group.to_edge, DOWN,\n",
        "            self.teacher.change, \"raise_right_hand\",\n",
        "        )\n",
        "\n",
        "        self.play_student_changes(\n",
        "            *[\"pondering\"]*3,\n",
        "            added_anims = [Write(asic_rate)]\n",
        "        )\n",
        "        self.play(LaggedStartMap(\n",
        "            FadeIn, circuit,\n",
        "            run_time = 3,\n",
        "            lag_ratio = 0.2,\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "class QAndA(PiCreatureScene):\n",
        "    def construct(self):\n",
        "        self.pi_creature.center().to_edge(DOWN)\n",
        "        self.show_powers_of_two()\n",
        "\n",
        "        num_subscriber_words = OldTex(\n",
        "            \"> 2^{18} = 262{,}144\", \"\\\\text{ subscribers}\"\n",
        "        )\n",
        "        num_subscriber_words.to_edge(UP)\n",
        "        num_subscriber_words.shift(RIGHT)\n",
        "        num_subscriber_words.set_color_by_tex(\"subscribers\", RED)\n",
        "\n",
        "        q_and_a = OldTexText(\"Q\\\\&A\")\n",
        "        q_and_a.next_to(self.pi_creature.get_corner(UP+LEFT), UP)\n",
        "        q_and_a.save_state()\n",
        "        q_and_a.shift(DOWN)\n",
        "        q_and_a.set_fill(opacity = 0)\n",
        "\n",
        "        reddit = OldTexText(\"reddit.com/r/3blue1brown\")\n",
        "        reddit.next_to(num_subscriber_words, DOWN, LARGE_BUFF)\n",
        "        twitter = OldTexText(\"@3blue1brown\")\n",
        "        twitter.set_color(BLUE_C)\n",
        "        twitter.next_to(reddit, DOWN)\n",
        "\n",
        "        self.play(Write(num_subscriber_words))\n",
        "        self.play(self.pi_creature.change, \"gracious\", num_subscriber_words)\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            q_and_a.restore,\n",
        "            self.pi_creature.change, \"raise_right_hand\",\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(Write(reddit))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(twitter),\n",
        "            self.pi_creature.change_mode, \"shruggie\"\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "    def show_powers_of_two(self):\n",
        "        rows = 16\n",
        "        cols = 64\n",
        "        dots = VGroup(*[\n",
        "            VGroup(*[\n",
        "                Dot() for x in range(rows)\n",
        "            ]).arrange(DOWN, buff = SMALL_BUFF)\n",
        "            for y in range(cols)\n",
        "        ]).arrange(RIGHT, buff = SMALL_BUFF)\n",
        "        dots.set_width(FRAME_WIDTH - 2*LARGE_BUFF)\n",
        "        dots.next_to(self.pi_creature, UP)\n",
        "        dots = VGroup(*it.chain(*dots))\n",
        "        top = dots.get_top()\n",
        "        dots.sort(\n",
        "            lambda p : get_norm(p-top)\n",
        "        )\n",
        "\n",
        "        powers_of_two = VGroup(*[\n",
        "            Integer(2**i)\n",
        "            for i in range(int(np.log2(rows*cols))+1)\n",
        "        ])\n",
        "\n",
        "        curr_power = powers_of_two[0]\n",
        "        curr_power.to_edge(UP)\n",
        "        self.play(\n",
        "            Write(curr_power),\n",
        "            FadeIn(dots[0])\n",
        "        )\n",
        "        for i, power_of_two in enumerate(powers_of_two):\n",
        "            if i == 0:\n",
        "                continue\n",
        "            power_of_two.to_edge(UP)\n",
        "            self.play(\n",
        "                FadeIn(VGroup(*dots[2**(i-1) : 2**i])),\n",
        "                Transform(\n",
        "                    curr_power, power_of_two,\n",
        "                    rate_func = squish_rate_func(smooth, 0, 0.5)\n",
        "                )\n",
        "            )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeOut(dots),\n",
        "            FadeOut(powers_of_two)\n",
        "        )\n",
        "\n",
        "class Thumbnail(Scene):\n",
        "    def construct(self):\n",
        "        num = OldTex(\"2^{256}\")\n",
        "        num.set_height(2)\n",
        "        num.set_color(BLUE_C)\n",
        "        num.set_stroke(BLUE_B, 3)\n",
        "        num.shift(MED_SMALL_BUFF*UP)\n",
        "        num.add_background_rectangle(opacity = 1)\n",
        "        num.background_rectangle.scale(1.5)\n",
        "        self.add(num)\n",
        "\n",
        "        background_num_str = \"115792089237316195423570985008687907853269984665640564039457584007913129639936\"\n",
        "        n_chars = len(background_num_str)\n",
        "        new_str = \"\"\n",
        "        for i, char in enumerate(background_num_str):\n",
        "            new_str += char\n",
        "            # if i%3 == 1:\n",
        "            #     new_str += \"{,}\"\n",
        "            if i%(n_chars/4) == 0:\n",
        "                new_str += \" \\\\\\\\ \"\n",
        "        background_num = OldTex(new_str)\n",
        "        background_num.set_width(FRAME_WIDTH - LARGE_BUFF)\n",
        "        background_num.set_fill(opacity = 0.2)\n",
        "\n",
        "        secure = OldTexText(\"Secure?\")\n",
        "        secure.scale(4)\n",
        "        secure.shift(FRAME_Y_RADIUS*DOWN/2)\n",
        "        secure.set_color(RED)\n",
        "        secure.set_stroke(RED_A, 3)\n",
        "\n",
        "        lock = SVGMobject(\n",
        "            file_name = \"shield_locked\",\n",
        "            fill_color = WHITE,\n",
        "        )\n",
        "        lock.set_height(6)\n",
        "\n",
        "        self.add(background_num, num)\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n"
    ]
}