{
    "topic": "The mathematical concept being demonstrated is the Pythagorean theorem, specifically the relationship between the lengths",
    "code": [
        "from manim_imports_ext import *\n",
        "from _2022.wordle.scenes import *\n",
        "\n",
        "\n",
        "class HeresTheThing(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        thumbnail = ImageMobject(os.path.join(\n",
        "            self.file_writer.output_directory,\n",
        "            self.file_writer.get_default_module_directory(),\n",
        "            os.pardir,\n",
        "            \"images\",\n",
        "            \"Thumbnail\",\n",
        "        ))\n",
        "        thumbnail = Group(\n",
        "            SurroundingRectangle(thumbnail, buff=0, stroke_color=WHITE, stroke_width=2),\n",
        "            thumbnail\n",
        "        )\n",
        "        thumbnail.set_height(3)\n",
        "        thumbnail.move_to(self.hold_up_spot, DOWN)\n",
        "\n",
        "        self.play(\n",
        "            self.teacher.change(\"raise_right_hand\"),\n",
        "            FadeIn(thumbnail, UP),\n",
        "        )\n",
        "        self.play_student_changes(\n",
        "            \"raise_left_hand\", \"pondering\", \"erm\",\n",
        "            look_at=self.teacher.eyes,\n",
        "        )\n",
        "        self.wait()\n",
        "        self.teacher_says(\n",
        "            OldTexText(\"Right, here's\\\\\\\\the thing...\", font_size=40),\n",
        "            target_mode=\"hesitant\",\n",
        "            bubble_config=dict(width=3.5, height=2.5),\n",
        "            run_time=1,\n",
        "            added_anims=[\n",
        "                self.change_students(\"dance_3\", \"frustrated\", \"sassy\"),\n",
        "                thumbnail.animate.to_corner(UL),\n",
        "            ]\n",
        "        )\n",
        "        self.look_at(thumbnail)\n",
        "        cross = Cross(Text(\"CRANE\"))\n",
        "        cross.insert_n_curves(20)\n",
        "        cross.move_to(thumbnail, UR)\n",
        "        cross.shift([-0.25, -0.22, 0])\n",
        "        self.play(ShowCreation(cross))\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class WriteTheTitle(Scene):\n",
        "    def construct(self):\n",
        "        title = Text(\"Solving Wordle using\\ninformation theory\", font_size=60)\n",
        "        title.get_part_by_text('information theory').set_color(BLUE)\n",
        "        self.play(Write(title))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class Confessions(Scene):\n",
        "    def construct(self):\n",
        "        titles = VGroup(*(\n",
        "            Text(f\"Confession {n}\", font_size=60)\n",
        "            for n in range(1, 4)\n",
        "        ))\n",
        "        titles.arrange(DOWN, buff=2, aligned_edge=LEFT)\n",
        "        titles.center()\n",
        "        for title in titles:\n",
        "            title.save_state()\n",
        "            title.generate_target()\n",
        "\n",
        "        phrases = VGroup(\n",
        "            OldTexText(\"Bug in the code\", font_size=48),\n",
        "            OldTexText(\"About the opening scene...\", font_size=48),\n",
        "            OldTexText(\"Maybe don't use entropy?\", font_size=48),\n",
        "        )\n",
        "\n",
        "        self.play(LaggedStart(*(\n",
        "            FadeIn(title, RIGHT)\n",
        "            for title in titles\n",
        "        ), lag_ratio=0.3))\n",
        "        self.wait()\n",
        "\n",
        "        last_phrase = VMobject()\n",
        "        for title, phrase in zip(titles, phrases):\n",
        "            others = VGroup(*(\n",
        "                t for t in titles\n",
        "                if t is not title\n",
        "            ))\n",
        "            others_target = VGroup(*(t.target for t in others))\n",
        "            for t in others_target:\n",
        "                t.set_height(0.2)\n",
        "                t.set_opacity(0.5)\n",
        "            others_target.arrange(DOWN, buff=0.75)\n",
        "            others_target.to_edge(LEFT)\n",
        "\n",
        "            phrase.set_color(BLUE)\n",
        "            phrase.to_edge(UP, buff=1.5)\n",
        "\n",
        "            self.play(\n",
        "                FadeOut(last_phrase),\n",
        "                title.animate.restore().set_height(0.5).center().to_edge(UP),\n",
        "                *map(MoveToTarget, others),\n",
        "            )\n",
        "            self.play(FadeIn(phrase))\n",
        "            self.wait(2)\n",
        "\n",
        "            last_phrase = phrase\n",
        "\n",
        "\n",
        "class WhatWasTheBug(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.student_says(\"What as the bug?\")\n",
        "        self.play(\n",
        "            self.change_students(\"raise_left_hand\", \"pondering\", \"raise_right_hand\"),\n",
        "            self.teacher.change(\"tired\")\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class HowWordleColoringWorks(WordleScene):\n",
        "    def construct(self):\n",
        "        # Rows\n",
        "        guess_row = self.grid[0].copy()\n",
        "        answer_row = self.grid[0].copy()\n",
        "        rows = VGroup(guess_row, answer_row)\n",
        "        rows.arrange(DOWN, buff=LARGE_BUFF)\n",
        "        words = VGroup()\n",
        "        for row in rows:\n",
        "            row.word = VGroup()\n",
        "            self.add(row.word)\n",
        "            words.add(row.word)\n",
        "\n",
        "        self.add(rows)\n",
        "        self.remove(self.grid)\n",
        "\n",
        "        # Add labels\n",
        "        guess_label = OldTexText(\"Guess $\\\\rightarrow$\")\n",
        "        answer_label = OldTexText(\"Answer $\\\\rightarrow$\")\n",
        "        labels = VGroup(guess_label, answer_label)\n",
        "        for label, row in zip(labels, rows):\n",
        "            label.next_to(row, LEFT, buff=MED_LARGE_BUFF)\n",
        "\n",
        "        def get_box_to_box_path(box1, box2):\n",
        "            p1 = box1.get_bottom()\n",
        "            p2 = box2.get_top()\n",
        "            v = 0.3 * get_norm(p2 - p1) * DOWN\n",
        "            return CubicBezier(p1, p1 + v, p2 - v, p2)\n",
        "\n",
        "        def get_grey_label(i):\n",
        "            result = VGroup(\n",
        "                Vector(0.5 * UP),\n",
        "                OldTexText(\"No 2nd `E'\"),\n",
        "            )\n",
        "            result.arrange(UP, SMALL_BUFF)\n",
        "            result.next_to(guess_row[i], UP, SMALL_BUFF)\n",
        "            result.set_color(GREY_B)\n",
        "            return result\n",
        "\n",
        "        def generate_group_target(group):\n",
        "            target = group.copy()\n",
        "            target.scale(0.3)\n",
        "            for sm in target.get_family():\n",
        "                if sm.get_stroke_width() > 0:\n",
        "                    sm.set_stroke(width=1.5)\n",
        "            return target\n",
        "\n",
        "        # And answer, yellow grey\n",
        "        guess = \"speed\"\n",
        "        answer = \"abide\"\n",
        "        self.play(Write(guess_label), run_time=1)\n",
        "        self.write_word_in_row(guess, guess_row)\n",
        "        self.wait()\n",
        "        answer_row.generate_target()\n",
        "        answer_row.target.set_stroke(GREEN, 3)\n",
        "        self.play(\n",
        "            Write(answer_row.target, remover=True),\n",
        "            Write(answer_label),\n",
        "            run_time=1\n",
        "        )\n",
        "        answer_row.match_style(answer_row.target)\n",
        "        self.write_word_in_row(answer, answer_row,)\n",
        "        self.wait()\n",
        "\n",
        "        colors = self.get_colors(get_pattern(guess, answer))\n",
        "        self.animate_color_change(guess_row, guess_row.word, colors)\n",
        "        self.wait()\n",
        "\n",
        "        # Explain two e's\n",
        "        path = get_box_to_box_path(guess_row[2], answer_row[4])\n",
        "        gl = get_grey_label(3)\n",
        "\n",
        "        self.play(ShowCreation(path))\n",
        "        self.play(Write(gl))\n",
        "        self.wait()\n",
        "        group1 = VGroup(\n",
        "            guess_row.copy(),\n",
        "            answer_row.copy(),\n",
        "            guess_row.word.copy(),\n",
        "            answer_row.word.copy(),\n",
        "            path, gl,\n",
        "        )\n",
        "\n",
        "        answer_row.word.set_submobjects([])\n",
        "\n",
        "        vect = 1.5 * DOWN\n",
        "        self.play(\n",
        "            Transform(group1, generate_group_target(group1).to_corner(UL)),\n",
        "            labels.animate.shift(vect),\n",
        "            rows.animate.set_fill(BLACK, 0).shift(vect),\n",
        "            guess_row.word.animate.shift(vect),\n",
        "        )\n",
        "\n",
        "        # General transition\n",
        "        def change_answer(answer):\n",
        "            self.write_word_in_row(answer, answer_row)\n",
        "            colors = self.get_colors(get_pattern(guess, answer))\n",
        "            self.animate_color_change(guess_row, guess_row.word, colors)\n",
        "            self.wait()\n",
        "\n",
        "        # Two yellows\n",
        "        change_answer(\"erase\")\n",
        "        path1 = get_box_to_box_path(guess_row[2], answer_row[0])\n",
        "        path2 = get_box_to_box_path(guess_row[3], answer_row[4])\n",
        "\n",
        "        self.play(ShowCreation(path1))\n",
        "        self.play(ShowCreation(path2))\n",
        "        self.wait()\n",
        "\n",
        "        group2 = VGroup(\n",
        "            *rows.copy(),\n",
        "            *words.copy(),\n",
        "            path1, path2,\n",
        "        )\n",
        "        answer_row.word.set_submobjects([])\n",
        "        group2.target = generate_group_target(group2)\n",
        "        group2.target.next_to(group1, RIGHT, buff=LARGE_BUFF, aligned_edge=DOWN)\n",
        "        self.play(\n",
        "            guess_row.animate.set_fill(BLACK, 0),\n",
        "            MoveToTarget(group2),\n",
        "        )\n",
        "\n",
        "        # Green grey\n",
        "        change_answer(\"steal\")\n",
        "        path = get_box_to_box_path(guess_row[2], answer_row[2])\n",
        "        gl = get_grey_label(3)\n",
        "        self.play(ShowCreation(path))\n",
        "        self.play(Write(gl))\n",
        "        self.wait()\n",
        "\n",
        "        group3 = VGroup(\n",
        "            *rows.copy(),\n",
        "            *words.copy(),\n",
        "            path, gl,\n",
        "        )\n",
        "        answer_row.word.set_submobjects([])\n",
        "\n",
        "        group3.target = generate_group_target(group3)\n",
        "        group3.target.next_to(group2, RIGHT, buff=LARGE_BUFF, aligned_edge=DOWN)\n",
        "        self.play(\n",
        "            guess_row.animate.set_fill(BLACK, 0),\n",
        "            MoveToTarget(group3)\n",
        "        )\n",
        "\n",
        "        # Green yellow\n",
        "        change_answer(\"crepe\")\n",
        "        path1 = get_box_to_box_path(guess_row[2], answer_row[2])\n",
        "        path2 = get_box_to_box_path(guess_row[3], answer_row[4])\n",
        "\n",
        "        self.play(ShowCreation(path1))\n",
        "        self.play(ShowCreation(path2))\n",
        "        self.wait()\n",
        "\n",
        "        group4 = VGroup(*rows, *words, path1, path2)\n",
        "\n",
        "        # Organize all groups\n",
        "        groups = VGroup(group1, group2, group3, group4)\n",
        "        groups.generate_target()\n",
        "        groups.target[-1].become(generate_group_target(group4))\n",
        "        groups.target.arrange(RIGHT, buff=LARGE_BUFF, aligned_edge=DOWN)\n",
        "        groups.target.set_width(FRAME_WIDTH - 1)\n",
        "        groups.target.to_edge(UP)\n",
        "\n",
        "        self.play(\n",
        "            MoveToTarget(groups, run_time=2),\n",
        "            FadeOut(labels)\n",
        "        )\n",
        "\n",
        "        # Compare to bug\n",
        "        low_groups = groups.deepcopy()\n",
        "        low_groups.to_edge(DOWN, buff=LARGE_BUFF)\n",
        "\n",
        "        paths = VGroup()\n",
        "        for lg in low_groups:\n",
        "            # Remove grey labels\n",
        "            lg.remove(lg[-1])\n",
        "            # Make fourth square grey\n",
        "            lg[0][3].set_fill(WordleScene.color_map[1])\n",
        "            new_path = get_box_to_box_path(lg[0][3], VectorizedPoint(lg[-1].get_end()))\n",
        "            new_path.set_stroke(width=1.5)\n",
        "            lg.add(new_path)\n",
        "            paths.add(*lg[-2:])\n",
        "            paths.set_opacity(0)\n",
        "\n",
        "        bug_box = SurroundingRectangle(low_groups, buff=0.25)\n",
        "        bug_box.set_stroke(RED, 3)\n",
        "        bug_label = Text(\"Buggy behavior\")\n",
        "        bug_label.next_to(bug_box, UP)\n",
        "        bug_label.set_color(RED)\n",
        "\n",
        "        self.play(\n",
        "            FadeTransform(groups.copy(), low_groups),\n",
        "            FadeIn(bug_box),\n",
        "            Write(bug_label),\n",
        "        )\n",
        "        paths.set_stroke(opacity=1)\n",
        "        self.play(LaggedStartMap(ShowCreation, paths, lag_ratio=0.5, run_time=3))\n",
        "        self.wait()\n",
        "\n",
        "    def animate_color_change(self, row, word, colors):\n",
        "        super().animate_color_change(row, word, colors)\n",
        "        self.add(word)\n",
        "\n",
        "    def write_word_in_row(self, word, row, added_anims=[]):\n",
        "        word_mob = VGroup(*(\n",
        "            self.get_letter_in_square(letter, square)\n",
        "            for letter, square in zip(word, row)\n",
        "        ))\n",
        "        self.play(\n",
        "            ShowIncreasingSubsets(word_mob, run_time=0.5),\n",
        "            *added_anims,\n",
        "        )\n",
        "        self.remove(word_mob)\n",
        "        row.word.set_submobjects(list(word_mob))\n",
        "\n",
        "    def delete_word_from_row(self, row, added_anims=[]):\n",
        "        self.play(FadeOut(row.word, lag_ratio=0.2), *added_anims)\n",
        "        row.word.set_submobjects([])\n",
        "        self.add(row.word)\n",
        "\n",
        "\n",
        "class MatrixOfPatterns(Scene):\n",
        "    n_shown_words = 50\n",
        "\n",
        "    def construct(self):\n",
        "        words = get_word_list(short=True)\n",
        "        words = random.sample(words, self.n_shown_words)\n",
        "        words.sort()\n",
        "        word_mobs = VGroup(*(Text(word, font=\"Consolas\", font_size=30) for word in words))\n",
        "        top_row = word_mobs.copy().arrange(RIGHT, buff=0.35)\n",
        "        left_col = word_mobs.copy().arrange(DOWN, buff=0.35)\n",
        "        top_row.to_corner(UL).shift(1.25 * RIGHT)\n",
        "        left_col.to_corner(UL).shift(0.5 * DOWN)\n",
        "\n",
        "        h_line = Line(LEFT, RIGHT).match_width(top_row).scale(1.2)\n",
        "        v_line = Line(UP, DOWN).match_height(left_col).scale(1.2)\n",
        "        h_line.next_to(top_row, DOWN, SMALL_BUFF)\n",
        "        v_line.next_to(left_col, RIGHT)\n",
        "        lines = VGroup(h_line, v_line)\n",
        "        lines.set_stroke(GREY, 1)\n",
        "\n",
        "        pattern_mobs = VGroup()\n",
        "        for n in range(2 * self.n_shown_words):\n",
        "            for k in range(n + 1):\n",
        "                if n - k > len(words) - 1 or k > len(words) - 1:\n",
        "                    continue\n",
        "                w1 = left_col[n - k]\n",
        "                w2 = top_row[k]\n",
        "                pattern = get_pattern(w1.text, w2.text)\n",
        "                pm = WordleScene.patterns_to_squares([pattern])[0]\n",
        "                pm.set_stroke(WHITE, 0.5)\n",
        "                pm.match_width(w1)\n",
        "                pm.match_y(w1)\n",
        "                pm.match_x(w2, UP)\n",
        "                pattern_mobs.add(pm)\n",
        "\n",
        "        frame = self.camera.frame\n",
        "\n",
        "        self.add(top_row, left_col)\n",
        "        self.add(h_line, v_line)\n",
        "\n",
        "        self.play(\n",
        "            ApplyMethod(\n",
        "                frame.set_height, 25, dict(about_edge=UL),\n",
        "                rate_func=squish_rate_func(smooth, 0.1, 1),\n",
        "            ),\n",
        "            ShowIncreasingSubsets(pattern_mobs),\n",
        "            run_time=20,\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class SaletBruteForceDistribution(ShowScoreDistribution):\n",
        "    data_file = \"salet_brute_force.json\"\n",
        "\n",
        "\n",
        "class CraneBruteForceDistribution(ShowScoreDistribution):\n",
        "    data_file = \"crane_brute_force.json\"\n",
        "\n",
        "\n",
        "class CrateBruteForceDistribution(ShowScoreDistribution):\n",
        "    data_file = \"crate_brute_force.json\"\n",
        "\n",
        "\n",
        "class TraceBruteForceDistribution(ShowScoreDistribution):\n",
        "    data_file = \"trace_brute_force.json\"\n",
        "\n",
        "\n",
        "class LeastDistribution(ShowScoreDistribution):\n",
        "    data_file = \"least_results.json\"\n",
        "\n",
        "\n",
        "class SlateDistribution(ShowScoreDistribution):\n",
        "    data_file = \"slate_results.json\"\n",
        "\n",
        "\n",
        "class WearyDistribution(ShowScoreDistribution):\n",
        "    data_file = \"weary_results.json\"\n",
        "\n",
        "\n",
        "class AdieuDistribution(ShowScoreDistribution):\n",
        "    data_file = \"adieu_results.json\"\n",
        "\n",
        "\n",
        "class AudioDistribution(ShowScoreDistribution):\n",
        "    data_file = \"audio_results.json\"\n",
        "\n",
        "\n",
        "class LastVideoWrapper(VideoWrapper):\n",
        "    title = \"Last video\"\n",
        "\n",
        "\n",
        "class SneakAttackInformationTheory(Scene):\n",
        "    def construct(self):\n",
        "        randy = Randolph()\n",
        "        randy.to_edge(DOWN)\n",
        "        phone = ImageMobject(\"wordle-phone\")\n",
        "        phone.set_height(4)\n",
        "        phone.next_to(randy, RIGHT)\n",
        "        phone.shift(UP)\n",
        "        phone_outline = SVGMobject(\"wordle-phone\")\n",
        "        phone_outline.set_fill(opacity=0)\n",
        "        phone_outline.set_stroke(width=0)\n",
        "        phone_outline.replace(phone).scale(0.8)\n",
        "\n",
        "        self.play(\n",
        "            randy.change(\"thinking\", phone),\n",
        "            FadeIn(phone),\n",
        "            Write(phone_outline, stroke_width=1, run_time=2),\n",
        "        )\n",
        "        self.play(Blink(randy))\n",
        "        self.wait()\n",
        "\n",
        "        # surprise\n",
        "        words = VGroup(\n",
        "            Text(\"Surprise!\"),\n",
        "            Text(\"Information theory!\"),\n",
        "        )\n",
        "        words.scale(1.25)\n",
        "        words.arrange(DOWN)\n",
        "        words.to_corner(UL)\n",
        "        ent_formula = OldTex(\"H = \\\\sum_{x} -p(x)\\\\log_2\\\\big(p(x)\\\\right)\")\n",
        "        ent_formula.set_color(TEAL)\n",
        "        ent_formula.next_to(words, DOWN, LARGE_BUFF)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(words[0], scale=2),\n",
        "            randy.change(\"horrified\", words),\n",
        "            run_time=0.5\n",
        "        )\n",
        "        self.play(\n",
        "            FadeIn(words[1], scale=2),\n",
        "            run_time=0.5,\n",
        "        )\n",
        "        self.play(Blink(randy))\n",
        "        self.play(\n",
        "            Write(ent_formula),\n",
        "            randy.change(\"erm\", ent_formula),\n",
        "        )\n",
        "        self.play(Blink(randy))\n",
        "        self.wait(2)\n",
        "        self.play(Blink(randy))\n",
        "        self.wait(2)\n",
        "\n",
        "\n",
        "class HowAreYouFindingTheBest(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.student_says(\n",
        "            OldTexText(\"What exactly is this\\\\\\\\``final analysis''?\"),\n",
        "            index=0,\n",
        "        )\n",
        "        self.play(\n",
        "            self.students[1].change(\"pondering\"),\n",
        "            self.students[2].change(\"raise_left_hand\"),\n",
        "            self.teacher.change(\"happy\")\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "        self.teacher_says(OldTexText(\"I'm glad\\\\\\\\you asked!\"), target_mode=\"hooray\")\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class SaletDistThin(SaletBruteForceDistribution):\n",
        "    axes_config = dict(\n",
        "        x_range=(0, 6),\n",
        "        y_range=(0, 1, 0.1),\n",
        "        width=4.5,\n",
        "        height=6,\n",
        "    )\n",
        "    bar_count_font_size = 24\n",
        "\n",
        "\n",
        "class CrateDistThin(SaletDistThin):\n",
        "    data_file = \"crate_brute_force.json\"\n",
        "\n",
        "\n",
        "class TraceDistThin(SaletDistThin):\n",
        "    data_file = \"trace_brute_force.json\"\n",
        "\n",
        "\n",
        "class FromEstimatedProbabilityOfInclusionToExact(DistributionOverWord):\n",
        "    def construct(self):\n",
        "        super().construct()\n",
        "        bars = self.bars\n",
        "        decs = self.decs\n",
        "        word_mobs = self.word_mobs\n",
        "\n",
        "        true_answers = get_word_list(short=True)\n",
        "        anims = []\n",
        "        height = 1.5\n",
        "        for bar, dec, word_mob in zip(bars, decs, word_mobs):\n",
        "            value = float(word_mob.text in true_answers)\n",
        "            anims.extend([\n",
        "                bar.animate.set_height(value * height, stretch=True, about_edge=DOWN),\n",
        "                ChangeDecimalToValue(dec, 100 * value),\n",
        "            ])\n",
        "\n",
        "        self.play(*anims, run_time=2)\n",
        "        self.wait()\n",
        "\n",
        "        self.embed()\n",
        "\n",
        "\n",
        "class SearchThroughFirstGuessDistributions(HowLookTwoAheadWorks):\n",
        "    def construct(self):\n",
        "        # Setup\n",
        "        all_words = get_word_list()\n",
        "        possibilities = get_word_list()\n",
        "        priors = self.get_priors()\n",
        "\n",
        "        template = self.get_word_mob(\"soare\").to_edge(LEFT)\n",
        "\n",
        "        # Show first guess\n",
        "        sample = random.sample(all_words, 300)\n",
        "        for word in sample:\n",
        "            guess = self.get_word_mob(word)\n",
        "            guess.move_to(template, RIGHT)\n",
        "            pattern_array = self.get_pattern_array(guess, possibilities, priors)\n",
        "            prob_bars = self.get_prob_bars(pattern_array.pattern_mobs)\n",
        "            EI_label = self.get_entropy_label(guess, pattern_array.distribution)\n",
        "\n",
        "            self.add(guess)\n",
        "            self.add(pattern_array)\n",
        "            self.add(prob_bars)\n",
        "            self.add(EI_label)\n",
        "            self.wait(0.05)\n",
        "            self.clear()\n",
        "\n",
        "\n",
        "class TwoStepLookAheadWithSlane(HowLookTwoAheadWorks):\n",
        "    first_guess = \"slane\"\n",
        "    n_shown_trials = 120\n",
        "    transition_time = 0.01\n",
        "\n",
        "    def get_priors(self):\n",
        "        return get_true_wordle_prior()\n",
        "\n",
        "\n",
        "class TwoStepLookAheadWithSoare(TwoStepLookAheadWithSlane):\n",
        "    first_guess = \"soare\"\n",
        "\n",
        "\n",
        "class TwoStepLookAheadWithCrane(TwoStepLookAheadWithSlane):\n",
        "    first_guess = \"crane\"\n",
        "\n",
        "\n",
        "class TwoStepLookAheadWithSalet(TwoStepLookAheadWithSlane):\n",
        "    first_guess = \"salet\"\n",
        "\n",
        "\n",
        "class SaletSecondGuessMap(HowLookTwoAheadWorks):\n",
        "    first_guess = \"salet\"\n",
        "\n",
        "    def construct(self):\n",
        "        path = os.path.join(get_directories()['data'], 'wordle', 'salet_with_brute_force_guess_map.json')\n",
        "        with open(path) as fp:\n",
        "            self.guess_map = json.load(fp)\n",
        "\n",
        "        self.all_words = get_word_list()\n",
        "        possibilities = get_word_list(short=True)\n",
        "        priors = self.priors = self.get_priors()\n",
        "\n",
        "        guess1 = self.get_word_mob(self.first_guess)\n",
        "        guess1.to_edge(LEFT)\n",
        "        pattern_array1 = self.get_pattern_array(guess1, possibilities, priors)\n",
        "\n",
        "        arrows, guess2s = self.get_next_guess_group(guess1.text, pattern_array1, possibilities)\n",
        "\n",
        "        self.add(guess1)\n",
        "        self.add(pattern_array1)\n",
        "        self.play(\n",
        "            LaggedStartMap(ShowCreation, arrows, lag_ratio=0.5),\n",
        "            LaggedStartMap(FadeIn, guess2s, lambda m: (m, RIGHT), lag_ratio=0.5),\n",
        "            run_time=2,\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        for pm, guess2 in zip(pattern_array1.pattern_mobs, guess2s):\n",
        "            bucket = get_possible_words(guess1.text, pm.pattern, possibilities)\n",
        "            pattern_array2 = self.get_pattern_array(guess2, bucket, priors)\n",
        "            ng_group = self.get_next_guess_group(\n",
        "                guess2.text, pattern_array2, bucket,\n",
        "                prefix=guess1.text + \"\".join(map(str, pattern_to_int_list(pm.pattern))),\n",
        "            )\n",
        "\n",
        "            self.add(pattern_array2, ng_group)\n",
        "            self.wait(0.5)\n",
        "            self.remove(pattern_array2, ng_group)\n",
        "\n",
        "    def get_next_guess_group(self, guess, pattern_array, possibilities, prefix=\"\"):\n",
        "        arrows = VGroup()\n",
        "        guesses = VGroup()\n",
        "        for pm in pattern_array.pattern_mobs:\n",
        "            ps = \"\".join(map(str, pattern_to_int_list(pm.pattern)))\n",
        "            key = prefix + guess + ps\n",
        "            if key in self.guess_map:\n",
        "                next_guess = self.guess_map[key]\n",
        "            else:\n",
        "                next_guess = optimal_guess(\n",
        "                    self.all_words,\n",
        "                    get_possible_words(guess, pm.pattern, possibilities),\n",
        "                    self.priors,\n",
        "                    optimize_for_uniform_distribution=True\n",
        "                )\n",
        "            next_guess_mob = self.get_word_mob(next_guess)\n",
        "            next_guess_mob.scale(0.8)\n",
        "            arrow = Vector(0.5 * RIGHT, stroke_width=3)\n",
        "            arrow.next_to(pm, RIGHT, buff=SMALL_BUFF)\n",
        "            next_guess_mob.next_to(arrow, RIGHT, buff=SMALL_BUFF)\n",
        "\n",
        "            arrows.add(arrow)\n",
        "            guesses.add(next_guess_mob)\n",
        "\n",
        "        return VGroup(arrows, guesses)\n",
        "\n",
        "\n",
        "class RankingUpdates(Scene):\n",
        "    def construct(self):\n",
        "        # Titles\n",
        "        kw = dict(tex_to_color_map={\"$E[I]$\": TEAL}, font_size=30)\n",
        "        titles = VGroup(\n",
        "            OldTexText(\"Highest $E[I]$\\\\\\\\(one step)\", **kw),\n",
        "            OldTexText(\"Highest $E[I]$\\\\\\\\(two steps)\", **kw),\n",
        "            OldTexText(\"Lowest average\\\\\\\\scores\", **kw),\n",
        "        )\n",
        "        for x, title in zip(range(-1, 2), titles):\n",
        "            title.set_x(x * FRAME_WIDTH / 3)\n",
        "            title.to_edge(UP, buff=MED_SMALL_BUFF)\n",
        "        titles.to_edge(UP)\n",
        "\n",
        "        h_line = Line(LEFT, RIGHT).set_width(FRAME_WIDTH)\n",
        "        h_line.set_stroke(GREY_B, 1)\n",
        "        h_line.next_to(titles, DOWN)\n",
        "        h_line.set_x(0)\n",
        "\n",
        "        v_lines = VGroup(*(\n",
        "            Line(UP, DOWN).set_height(FRAME_HEIGHT).set_x(x * FRAME_WIDTH / 6)\n",
        "            for x in (-1, 1)\n",
        "        ))\n",
        "        v_lines.match_style(h_line)\n",
        "\n",
        "        self.add(h_line)\n",
        "        self.add(v_lines)\n",
        "\n",
        "        # Lists\n",
        "        n_shown = 15\n",
        "\n",
        "        def get_column(rows, title, row_height=0.2, buff=0.2):\n",
        "            for row in rows:\n",
        "                row.move_to(ORIGIN, LEFT)\n",
        "            rows.set_height(row_height)\n",
        "            for i, row in enumerate(rows):\n",
        "                row.shift(i * (row_height + buff) * DOWN)\n",
        "            rows.next_to(h_line, DOWN)\n",
        "\n",
        "            numbers = VGroup()\n",
        "            for i, row in zip(it.count(1), rows):\n",
        "                num = Integer(i, unit=\".\")\n",
        "                num.match_height(row)\n",
        "                num.next_to(row, LEFT)\n",
        "                numbers.add(num)\n",
        "\n",
        "            result = VGroup(numbers, rows)\n",
        "            result.match_x(title)\n",
        "            result.rows = rows\n",
        "            result.numbers = numbers\n",
        "            return result\n",
        "\n",
        "        # One step\n",
        "        with open(os.path.join(get_directories()[\"data\"], \"wordle\", \"best_entropies.json\")) as fp:\n",
        "            rows1 = VGroup()\n",
        "            for word, ent in json.load(fp)[:n_shown]:\n",
        "                row = VGroup(\n",
        "                    Text(word, font=\"Consolas\"),\n",
        "                    OldTex(\"\\\\rightarrow\"),\n",
        "                    DecimalNumber(ent, color=TEAL),\n",
        "                )\n",
        "                row.arrange(RIGHT)\n",
        "                rows1.add(row)\n",
        "\n",
        "        # Two step\n",
        "        with open(os.path.join(get_directories()[\"data\"], \"wordle\", \"best_double_entropies.json\")) as fp:\n",
        "            rows2 = VGroup()\n",
        "            for word, ent1, ent2 in json.load(fp)[:n_shown]:\n",
        "                row = VGroup(\n",
        "                    Text(word, font=\"Consolas\"),\n",
        "                    OldTex(\"\\\\rightarrow\"),\n",
        "                    DecimalNumber(ent1, color=TEAL),\n",
        "                    OldTex(\"+\"),\n",
        "                    DecimalNumber(ent2, color=TEAL),\n",
        "                    OldTex(\"=\"),\n",
        "                    DecimalNumber(ent1 + ent2, color=TEAL),\n",
        "                )\n",
        "                row.arrange(RIGHT)\n",
        "                rows2.add(row)\n",
        "\n",
        "        # Score\n",
        "        answers = get_word_list(short=True)\n",
        "        with open(os.path.join(get_directories()[\"data\"], \"wordle\", \"best_scores_with_entropy_method.json\")) as fp:\n",
        "            rows3 = VGroup()\n",
        "            for word, score, dist in json.load(fp)[:n_shown]:\n",
        "                row = VGroup(\n",
        "                    Text(word, font=\"Consolas\"),\n",
        "                    OldTex(\"\\\\rightarrow\"),\n",
        "                    DecimalNumber(score / len(answers), num_decimal_places=3, color=BLUE),\n",
        "                )\n",
        "                row.arrange(RIGHT)\n",
        "                rows3.add(row)\n",
        "\n",
        "        all_rows = [rows1, rows2, rows3]\n",
        "        col1, col2, col3 = cols = [\n",
        "            get_column(rows, title)\n",
        "            for rows, title in zip(all_rows, titles)\n",
        "        ]\n",
        "        for row in col2.rows:\n",
        "            row[-2:].align_to(col2.rows[0][-2:], LEFT)\n",
        "\n",
        "        # Animations\n",
        "        self.add(titles[0])\n",
        "        self.play(FadeIn(col1, lag_ratio=0.1, run_time=2))\n",
        "        self.wait()\n",
        "\n",
        "        last_col = col1\n",
        "        for title, col in zip(titles[1:], cols[1:]):\n",
        "            pre_words = VGroup(*(r[0] for r in last_col.rows))\n",
        "            words = VGroup(*(r[0] for r in col.rows))\n",
        "            mover_anims = []\n",
        "            fade_anims = []\n",
        "            for word in words:\n",
        "                has_pre = False\n",
        "                for pre_word in pre_words:\n",
        "                    if word.text == pre_word.text:\n",
        "                        has_pre = True\n",
        "                        mover_anims.append(TransformFromCopy(pre_word, word))\n",
        "                if not has_pre:\n",
        "                    fade_anims.append(FadeInFromPoint(word, last_col.get_bottom()))\n",
        "\n",
        "            for row in col.rows:\n",
        "                fade_anims.append(FadeIn(row[1:]))\n",
        "\n",
        "            self.play(\n",
        "                FadeIn(title),\n",
        "                FadeIn(col.numbers, lag_ratio=0.1),\n",
        "                LaggedStart(*mover_anims, run_time=2, lag_ratio=0.2),\n",
        "            )\n",
        "            self.play(LaggedStart(*fade_anims))\n",
        "            self.add(col)\n",
        "            self.wait()\n",
        "            last_col = col\n",
        "\n",
        "\n",
        "class WeCanDoBetter(Scene):\n",
        "    def construct(self):\n",
        "        morty = Mortimer()\n",
        "        morty.to_corner(DR)\n",
        "        self.play(PiCreatureSays(\n",
        "            morty, OldTexText(\"We can do\\\\\\\\better!\"),\n",
        "            bubble_config=dict(width=3.5, height=2.5, fill_opacity=0.95),\n",
        "        ))\n",
        "        for x in range(2):\n",
        "            self.play(Blink(morty))\n",
        "            self.wait(2)\n",
        "\n",
        "\n",
        "class WhydYouHaveToRuinIt(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.student_says(\n",
        "            OldTexText(\"Why'd you have to\\\\\\\\ruin Wordle!\"),\n",
        "            target_mode=\"pleading\",\n",
        "            added_anims=[self.teacher.change(\"guilty\")]\n",
        "        )\n",
        "        self.play_student_changes(\"sassy\", \"angry\", \"pleading\")\n",
        "        self.wait(3)\n",
        "        self.teacher_says(\n",
        "            OldTexText(\"But ``salet'' is probably\\\\\\\\not the best for us\"),\n",
        "            added_anims=[self.change_students(\"confused\", \"sassy\", \"hesitant\")]\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class ForgetTheBestWord(Scene):\n",
        "    def construct(self):\n",
        "        self.add(FullScreenRectangle())\n",
        "\n",
        "        randy = Randolph()\n",
        "        randy.to_corner(DL)\n",
        "        text = OldTexText(\"Wait, was it ``slane'',\\\\\\\\``salet'' or ``soare''?\")\n",
        "\n",
        "        self.play(PiCreatureBubbleIntroduction(\n",
        "            randy, text,\n",
        "            bubble_type=ThoughtBubble,\n",
        "            target_mode=\"confused\",\n",
        "        ))\n",
        "        self.play(Blink(randy))\n",
        "        self.wait()\n",
        "\n",
        "        randy.bubble.add(text)\n",
        "        self.play(\n",
        "            FadeOut(randy.bubble, scale=0.25, shift=2 * DL),\n",
        "            randy.change(\"erm\")\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(randy.change(\"thinking\", UR))\n",
        "        for x in range(2):\n",
        "            self.play(Blink(randy))\n",
        "            self.wait(2)\n",
        "\n",
        "\n",
        "class Thumbnail2(Thumbnail):\n",
        "    def construct(self):\n",
        "        super().construct()\n",
        "        title = self.title\n",
        "        self.rows.to_edge(DOWN, buff=MED_SMALL_BUFF)\n",
        "\n",
        "        crane = title.get_part_by_text(\"CRANE\")\n",
        "        strike = Line(\n",
        "            crane.get_corner(DL),\n",
        "            crane.get_corner(UR),\n",
        "        )\n",
        "        strike.set_stroke(RED, 15)\n",
        "        strike.scale(1.2)\n",
        "        strike.insert_n_curves(100)\n",
        "        strike.set_stroke(width=(2, 15, 15, 2))\n",
        "        self.add(strike)\n",
        "\n",
        "        oops = Text(\"Here's the thing...\", font=\"Consolas\", font_size=90)\n",
        "        oops.set_color(RED)\n",
        "        oops.next_to(title, DR, buff=MED_LARGE_BUFF)\n",
        "        oops.shift_onto_screen()\n",
        "        self.add(oops)\n",
        "\n",
        "\n",
        "class EndScreen2(EndScreen):\n",
        "    pass\n"
    ]
}