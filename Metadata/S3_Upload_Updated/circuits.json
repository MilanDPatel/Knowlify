{
    "topic": "The mathematical concept being demonstrated is the relationship between voltage, current, and resistance in an electrical circuit",
    "code": [
        "from manim_imports_ext import *\n",
        "\n",
        "class Resistor(Line):\n",
        "    def init_points(self):\n",
        "        midpoints = [\n",
        "            interpolate(self.start, self.end, alpha)\n",
        "            for alpha in [0.25]+list(np.arange(0.3, 0.71, 0.1))+[0.75]\n",
        "        ]\n",
        "        perp = rotate_vector(self.end-self.start, np.pi/2)\n",
        "        for midpoint, n in zip(midpoints[1:-1], it.count()):\n",
        "            midpoint += 0.1*((-1)**n)*perp\n",
        "        points = [self.start]+midpoints+[self.end]\n",
        "        self.set_points_as_corners(points)\n",
        "\n",
        "\n",
        "class LongResistor(Line):\n",
        "    def init_points(self):\n",
        "        mid1 = interpolate(self.start, self.end, 1./5)\n",
        "        mid2 = interpolate(self.start, self.end, 4./5)\n",
        "        self.add(Line(self.start, mid1))\n",
        "        self.add(Resistor(mid1, mid2))\n",
        "        self.add(Line(mid2, self.end))\n",
        "\n",
        "\n",
        "class Source(VMobject):\n",
        "    def init_points(self):\n",
        "        self.add(Circle(color = self.color))\n",
        "        self.add(OldTex(\"+\").scale(1.5).set_color(GREEN).shift(0.5*UP))\n",
        "        self.add(OldTex(\"-\").scale(1.5).set_color(RED).shift(0.5*DOWN))\n",
        "        self.set_height(1)        \n",
        "        self.add(Line(self.get_top(), self.get_top()+UP))\n",
        "        self.add(Line(self.get_bottom(), self.get_bottom()+DOWN))\n",
        "\n",
        "\n",
        "\n",
        "class CircuitReduction(Scene):\n",
        "    def construct(self):\n",
        "        pos = dict([\n",
        "            (x, {\n",
        "                0 : (1.8*x-6)*RIGHT+2*UP,\n",
        "                0.5 : (1.8*x-6)*RIGHT,\n",
        "                1 : (1.8*x-6)*RIGHT+2*DOWN,\n",
        "            })\n",
        "            for x in range(8)\n",
        "        ])\n",
        "\n",
        "        source = Mobject(\n",
        "            Line(0.5*UP, 2*UP),\n",
        "            Source().scale(0.5),\n",
        "            Line(2*DOWN, 0.5*DOWN)\n",
        "        )\n",
        "        source.shift(pos[0][0][0]*RIGHT)\n",
        "        self.add(source)\n",
        "\n",
        "        ohms = dict([\n",
        "            (n, OldTex(\"%d\\\\Omega\"%int(n)).scale(0.75))\n",
        "            for n in (1, 2, 3, 4, 6, 12, 1.1, 5, 10.1, 10, 8, 2.1)\n",
        "        ])\n",
        "        ohms[1].shift(0.5*pos[1][0]+0.5*pos[2][0]+0.7*UP)\n",
        "        ohms[2].shift(pos[2][0.5]+0.7*LEFT)\n",
        "        ohms[3].shift(pos[1][0.5]+0.7*LEFT)\n",
        "        ohms[12].shift(pos[2][0.5]+0.7*LEFT)\n",
        "        ohms[4].shift(pos[3][0.5]+0.7*LEFT)\n",
        "        ohms[6].shift(pos[4][0.5]+0.7*LEFT)\n",
        "        ohms[1.1].shift(0.5*pos[4][0]+0.5*pos[5][0]+0.7*UP)\n",
        "        ohms[5].shift(pos[5][0.5]+0.7*LEFT)\n",
        "        ohms[10.1].shift(pos[5][0.5]+0.7*LEFT)\n",
        "        ohms[10].shift(pos[6][0.5]+0.7*LEFT)\n",
        "        ohms[8].shift(pos[7][0.5]+0.7*LEFT)\n",
        "        ohms[2.1].shift(0.5*pos[6][0]+0.5*pos[7][0]+0.7*UP)\n",
        "\n",
        "        line1 = Line(pos[0][0], pos[1][0])\n",
        "        line2 = Line(pos[0][1], pos[1][1])\n",
        "        resistor = LongResistor(pos[1][0], pos[1][1])\n",
        "        self.add(line1, line2, resistor, ohms[3])\n",
        "        self.wait(3)\n",
        "\n",
        "        combo_parts = [\n",
        "            Resistor(pos[1][0], pos[2][0]),\n",
        "            LongResistor(pos[2][0], pos[2][1]),\n",
        "            Line(pos[2][1], pos[1][1])\n",
        "        ]\n",
        "        combo = Mobject(*combo_parts).ingest_submobjects()\n",
        "\n",
        "        self.play(\n",
        "            Transform(resistor, combo),\n",
        "            Transform(ohms[3], ohms[2]),\n",
        "            Transform(ohms[3].copy(), ohms[1])\n",
        "        )\n",
        "        self.wait(3)\n",
        "        self.remove(ohms[3])\n",
        "        self.add(ohms[2])\n",
        "        self.remove(resistor)\n",
        "        self.add(*combo_parts)\n",
        "        resistor = combo_parts[1]\n",
        "\n",
        "\n",
        "        top_point = Point(pos[2][0])\n",
        "        line = Point(pos[2][0])\n",
        "        bottom_point = Point(pos[2][1])\n",
        "        self.play(\n",
        "            Transform(top_point, Line(pos[2][0], pos[3][0])),\n",
        "            Transform(line, Line(pos[3][0], pos[4][0])),\n",
        "            Transform(bottom_point, Line(pos[2][1], pos[4][1])),\n",
        "            Animation(resistor.copy()),\n",
        "            Transform(resistor.copy(), LongResistor(pos[3][0], pos[3][1])),\n",
        "            Transform(resistor, LongResistor(pos[4][0], pos[4][1])),\n",
        "            Transform(ohms[2].copy(), ohms[12]),\n",
        "            Transform(ohms[2].copy(), ohms[4]),\n",
        "            Transform(ohms[2], ohms[6])\n",
        "        )\n",
        "        self.wait(3)\n",
        "        self.remove(ohms[2])\n",
        "        self.add(ohms[6])\n",
        "\n",
        "        combo_parts = [\n",
        "            Resistor(pos[4][0], pos[5][0]),\n",
        "            LongResistor(pos[5][0], pos[5][1]),\n",
        "            Line(pos[5][1], pos[4][1])\n",
        "        ]\n",
        "        combo = Mobject(*combo_parts).ingest_submobjects()\n",
        "        self.play(\n",
        "            # Transform(resistor, LongResistor(pos[5][0], pos[5][1])),\n",
        "            # Transform(line, LongResistor(pos[3][0], pos[5][0])),\n",
        "            # Transform(bottom_point, Line(pos[2][1], pos[5][1])),\n",
        "            Transform(resistor, combo),\n",
        "            Transform(ohms[6], ohms[5]),\n",
        "            Transform(ohms[6].copy(), ohms[1.1])\n",
        "        )\n",
        "        self.wait(3)\n",
        "        self.remove(ohms[6])\n",
        "        self.add(ohms[5])\n",
        "        self.remove(resistor)\n",
        "        self.add(*combo_parts)\n",
        "        resistor = combo_parts[1]\n",
        "\n",
        "        line1 = Point(pos[5][0])\n",
        "        line2 = Point(pos[5][1])\n",
        "\n",
        "        self.play(\n",
        "            Transform(line1, Line(pos[5][0], pos[6][0])),\n",
        "            Transform(line2, Line(pos[5][1], pos[6][1])),\n",
        "            Animation(resistor.copy()),\n",
        "            Transform(resistor, LongResistor(pos[6][0], pos[6][1])),\n",
        "            Transform(ohms[5].copy(), ohms[10.1]),\n",
        "            Transform(ohms[5], ohms[10])\n",
        "        )\n",
        "        self.wait(3)\n",
        "        self.remove(ohms[5])\n",
        "        self.add(ohms[10])\n",
        "\n",
        "        point1 = Point(pos[6][0])\n",
        "        point2 = Point(pos[6][1])\n",
        "\n",
        "        self.play(\n",
        "            Transform(resistor, Mobject(\n",
        "                Resistor(pos[6][0], pos[7][0]),\n",
        "                LongResistor(pos[7][0], pos[7][1]),\n",
        "                Line(pos[7][1], pos[6][1]),\n",
        "            ).ingest_submobjects()),\n",
        "            Transform(ohms[10], ohms[8]),\n",
        "            Transform(ohms[10].copy(), ohms[2.1])\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "        # self.reverse_frames()\n",
        "        self.invert_colors()\n",
        "\n",
        "\n",
        "        # circuit = Mobject(*[\n",
        "        #     source,\n",
        "        #     #\n",
        "        #     LongResistor(pos[0][0], pos[2][0]),\n",
        "        #     Line(pos[0][1], pos[2][1]),\n",
        "        #     #\n",
        "        #     LongResistor(pos[2][0], pos[2][1]),\n",
        "        #     Line(pos[2][0], pos[3][0]),\n",
        "        #     Line(pos[2][1], pos[3][1]),\n",
        "        #     LongResistor(pos[3][0], pos[3][1]),\n",
        "        #     #\n",
        "        #     LongResistor(pos[3][0], pos[5][0]),\n",
        "        #     Line(pos[3][1], pos[5][1]),\n",
        "        #     #\n",
        "        #     LongResistor(pos[5][0], pos[5][1]),\n",
        "        #     #\n",
        "        #     Line(pos[5][0], pos[6][0]),\n",
        "        #     Resistor(pos[6][0], pos[7][0]),            \n",
        "        #     Line(pos[5][1], pos[7][1]),\n",
        "        #     #\n",
        "        #     LongResistor(pos[7][0], pos[7][1])\n",
        "        # ])\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n"
    ]
}