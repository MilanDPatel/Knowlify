{
    "topic": "The mathematical concepts being demonstrated in the code are:  1. Probability theory and",
    "code": [
        "from manim_imports_ext import *\n",
        "from _2018.eop.reusable_imports import *\n",
        "from _2018.eop.combinations import *\n",
        "from _2018.eop.independence import *\n",
        "\n",
        "import itertools as it\n",
        "\n",
        "class RandyFlipsAndStacks(Scene):\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "        randy = CoinFlippingPiCreature(color = MAROON_E)\n",
        "        randy.scale(0.5).to_edge(LEFT + DOWN)\n",
        "\n",
        "        heads = tails = 0\n",
        "        tally = TallyStack(heads, tails, anchor = ORIGIN)\n",
        "\n",
        "        nb_flips = 10\n",
        "\n",
        "        flips = np.random.randint(2, size = nb_flips)\n",
        "\n",
        "        for i in range(nb_flips):\n",
        "\n",
        "            self.play(FlipCoin(randy))\n",
        "            self.wait(0.5)\n",
        "\n",
        "            flip = flips[i]\n",
        "            if flip == 0:\n",
        "                heads += 1\n",
        "            elif flip == 1:\n",
        "                tails += 1\n",
        "            else:\n",
        "                raise Exception(\"That side does not exist on this coin\")\n",
        "\n",
        "            new_tally = TallyStack(heads, tails, anchor = ORIGIN)\n",
        "\n",
        "            if tally.nb_heads == 0 and new_tally.nb_heads == 1:\n",
        "                self.play(FadeIn(new_tally.heads_stack))\n",
        "            elif tally.nb_tails == 0 and new_tally.nb_tails == 1:\n",
        "                self.play(FadeIn(new_tally.tails_stack))\n",
        "            else:\n",
        "                self.play(Transform(tally, new_tally))\n",
        "\n",
        "            tally = new_tally\n",
        "\n",
        "\n",
        "\n",
        "class TwoDiceTableScene(Scene):\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "        table = TwoDiceTable(cell_size = 1)\n",
        "\n",
        "        table.center()\n",
        "        self.add(table)\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "class VisualCovariance(Scene):\n",
        "\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "        size = 4\n",
        "        square = Square(side_length = size)\n",
        "        n_points = 30\n",
        "        cloud = VGroup(*[\n",
        "            Dot((x + 0.8*y) * RIGHT + y * UP).set_fill(WHITE, 1)\n",
        "            for x, y in zip(\n",
        "                np.random.normal(0, 1, n_points),\n",
        "                np.random.normal(0, 1, n_points)\n",
        "            )\n",
        "        ])\n",
        "        self.add_foreground_mobject(cloud)\n",
        "\n",
        "        x_axis = Vector(8*RIGHT, color = WHITE).move_to(2.5*DOWN)\n",
        "        y_axis = Vector(5*UP, color = WHITE).move_to(4*LEFT)\n",
        "\n",
        "        self.add(x_axis, y_axis)\n",
        "\n",
        "\n",
        "        random_pairs = [ (p1, p2) for (p1, p2) in\n",
        "            it.combinations(cloud, 2)\n",
        "        ]\n",
        "        np.random.shuffle(random_pairs)\n",
        "\n",
        "\n",
        "\n",
        "        for (p1, p2) in random_pairs:\n",
        "            c1, c2 = p1.get_center(), p2.get_center()\n",
        "            x1, y1, x2, y2 = c1[0], c1[1], c2[0], c2[1]\n",
        "            if x1 >= x2:\n",
        "                continue\n",
        "            if y2 > y1:\n",
        "                # make a red rect\n",
        "                color = RED\n",
        "                opacity = 0.1\n",
        "               \n",
        "            elif y2 < y1:\n",
        "                # make a blue rect\n",
        "                color = BLUE\n",
        "                opacity = 0.2\n",
        "\n",
        "            rect = Rectangle(width = x2 - x1, height = abs(y2 - y1))\n",
        "            rect.set_fill(color = color, opacity = opacity)\n",
        "            rect.set_stroke(width = 0)\n",
        "            rect.move_to((c1+c2)/2)\n",
        "\n",
        "            self.play(FadeIn(rect), run_time = 0.05)\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "class BinaryChoices(Scene):\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "        example1 = BinaryOption(UprightHeads(), UprightTails())\n",
        "        example2 = BinaryOption(Male(), Female())\n",
        "        example3 = BinaryOption(Checkmark(), Xmark())\n",
        "\n",
        "        example2.next_to(example1, DOWN, buff = MED_LARGE_BUFF)\n",
        "        example3.next_to(example2, DOWN, buff = MED_LARGE_BUFF)\n",
        "\n",
        "        all = VGroup(example1, example2, example3)\n",
        "        all = all.scale(2)\n",
        "\n",
        "        self.play(\n",
        "            LaggedStartMap(FadeIn, all)\n",
        "        )\n"
    ]
}