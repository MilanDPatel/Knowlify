{
    "topic": "demonstrates the concept of a permutation, specifically a 5-permutation",
    "code": [
        "from manim_imports_ext import *\n",
        "\n",
        "def print_permutation(index_list):\n",
        "\n",
        "\n",
        "    n = max(max(index_list), len(index_list))\n",
        "    for i in range(0,n):\n",
        "        if index_list[i] > n - i:\n",
        "            raise Exception(\"Impossible indices!\")\n",
        "\n",
        "    #print \"given index list:\", index_list\n",
        "    perm_list = n * [\"_\"]\n",
        "    alphabet = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\",\n",
        "                \"G\", \"H\", \"I\", \"J\", \"K\", \"L\",\n",
        "                \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\",\n",
        "                \"S\", \"T\", \"U\", \"V\", \"W\", \"X\",\n",
        "                \"Y\", \"Z\"]\n",
        "    free_indices = list(range(n))\n",
        "    free_indices_p1 = list(range(1,n + 1))\n",
        "    #print perm_list\n",
        "    for i in range(n):\n",
        "        findex = index_list[i] - 1\n",
        "        #print \"place next letter at\", findex + 1, \"th free place\"\n",
        "        tindex = free_indices[findex]\n",
        "        #print \"so at position\", tindex + 1\n",
        "        perm_list[tindex] = alphabet[i]\n",
        "        free_indices.remove(tindex)\n",
        "        free_indices_p1.remove(tindex + 1)\n",
        "        #print \"remaining free places:\", free_indices_p1\n",
        "        #print perm_list\n",
        "\n",
        "    return \"\".join(perm_list)\n",
        "\n",
        "\n",
        "class PermutationGrid(Scene):\n",
        "\n",
        "    def text_box(self, str):\n",
        "        box = OldTexText(str).scale(0.3)\n",
        "        box.add(SurroundingRectangle(box, stroke_color = GREY_D))\n",
        "        return box\n",
        "\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "\n",
        "        N = 5\n",
        "\n",
        "        index_list = []\n",
        "        perm5_box = VGroup()\n",
        "        for i in range(1, N + 1):\n",
        "            index_list.append(i)\n",
        "            perm4_box = VGroup()\n",
        "            for j in range(1, N):\n",
        "                index_list.append(j)\n",
        "                perm3_box = VGroup()\n",
        "                for k in range(1, N - 1):\n",
        "                    index_list.append(k)\n",
        "                    perm2_box = VGroup()\n",
        "                    for l in range(1, N - 2):\n",
        "                        index_list.append(l)\n",
        "                        index_list.append(1)\n",
        "                        perm_box = self.text_box(print_permutation(index_list))\n",
        "                        if l > 1:\n",
        "                            perm_box.next_to(perm2_box[-1], DOWN, buff = 0)\n",
        "                        perm2_box.add(perm_box)\n",
        "                        index_list.pop()\n",
        "                        index_list.pop()\n",
        "                    if k > 1:\n",
        "                        perm2_box.next_to(perm3_box[-1], RIGHT, buff = 0.08)\n",
        "                    perm3_box.add(perm2_box)\n",
        "                    index_list.pop()\n",
        "                perm3_box.add(SurroundingRectangle(perm3_box, buff = 0.12, stroke_color = GREY_B))\n",
        "                if j > 1:\n",
        "                    perm3_box.next_to(perm4_box[-1], DOWN, buff = 0)\n",
        "                perm4_box.add(perm3_box)\n",
        "                index_list.pop()\n",
        "            if i > 1:\n",
        "                perm4_box.next_to(perm5_box[-1], RIGHT, buff = 0.16)\n",
        "            perm5_box.add(perm4_box)\n",
        "            index_list.pop()\n",
        "\n",
        "        perm5_box.move_to(ORIGIN)\n",
        "        self.add(perm5_box)\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n"
    ]
}