{
    "topic": "The mathematical concept being demonstrated is the distribution of the number of heads observed in a sequence of coin",
    "code": [
        "from manim_imports_ext import *\n",
        "from _2023.clt.main import *\n",
        "import sympy\n",
        "\n",
        "\n",
        "class GaltonBoardName(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        name = Text(\"Galton \\nBoard\", font_size=120)\n",
        "        name.next_to(ORIGIN, RIGHT).shift(2 * UP)\n",
        "        point = name.get_bottom() + 1 * DOWN\n",
        "        arrow = Arrow(\n",
        "            point,\n",
        "            point + FRAME_WIDTH * LEFT * 0.25,\n",
        "            stroke_width=10\n",
        "        )\n",
        "\n",
        "        self.add(name)\n",
        "        self.play(GrowArrow(arrow))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class NormalName(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Names\n",
        "        names = VGroup(\n",
        "            Text(\"Normal distribution\"),\n",
        "            Text(\"Bell curve\"),\n",
        "            Text(\"Gaussian distribution\"),\n",
        "        )\n",
        "        point = 2 * LEFT + 1.5 * UP\n",
        "        names.next_to(point, UP)\n",
        "        names.set_color(GREY_A)\n",
        "\n",
        "        shift = 0.75 * UP\n",
        "        names[0].scale(2, about_edge=DOWN)\n",
        "        self.play(Write(names[0]), run_time=1)\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            names[0].animate.scale(0.5, about_edge=DOWN).shift(shift),\n",
        "            FadeIn(names[1], shift=0.5 * shift),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            names[:2].animate.shift(shift),\n",
        "            FadeIn(names[2], shift=0.5 * shift)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # In a moment\n",
        "        words = TexText(\"We'll unpack this in a bit\", font_size=36)\n",
        "        words.set_fill(GREY_A)\n",
        "        words.next_to(point, UP)\n",
        "        words.shift(0.5 * UL)\n",
        "        arrow = Arrow(\n",
        "            words.get_bottom() + LEFT, words.get_bottom() + DOWN,\n",
        "            stroke_width=3, stroke_color=GREY_A,\n",
        "        )\n",
        "\n",
        "        self.play(LaggedStart(\n",
        "            FadeOut(names[1:]),\n",
        "            FadeIn(words, lag_ratio=0.1),\n",
        "            ShowCreation(arrow),\n",
        "            lag_ratio=0.25\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class ErdosKac(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Title\n",
        "        h_line = Line(LEFT, RIGHT).set_width(FRAME_WIDTH)\n",
        "        v_line = Line(UP, DOWN).set_height(FRAME_HEIGHT)\n",
        "        VGroup(h_line, v_line).set_stroke(GREY_A, 1)\n",
        "        h_line.to_edge(UP, buff=1.0)\n",
        "        titles = VGroup(\n",
        "            Tex(\"N\"),\n",
        "            TexText(R\"\\# of distinct prime factors of $N$\"),\n",
        "        )\n",
        "        titles.next_to(h_line, UP)\n",
        "        titles[0].set_x(-FRAME_WIDTH * 0.25)\n",
        "        titles[1].set_width(6)\n",
        "        titles[1].to_edge(RIGHT)\n",
        "        v_line.set_x(titles[1].get_x(LEFT) - 0.25)\n",
        "\n",
        "        self.add(titles)\n",
        "        self.add(h_line)\n",
        "\n",
        "        # Number line\n",
        "        number_line = NumberLine((0, 10), width=10)\n",
        "        number_line.add_numbers(excluding=[0])\n",
        "        number_line.numbers.shift(number_line.get_unit_size() * LEFT / 2)\n",
        "        number_line.to_edge(DOWN, buff=LARGE_BUFF)\n",
        "        self.add(number_line)\n",
        "\n",
        "        stacks = VGroup(*(\n",
        "            VGroup(VectorizedPoint(number_line.n2p(x - 0.5)))\n",
        "            for x in range(1, 20)    \n",
        "        ))\n",
        "        self.add(stacks)\n",
        "\n",
        "        rect_template = Rectangle(width=number_line.get_unit_size(), height=0.1)\n",
        "        rect_template.set_stroke(BLUE_E, 0.5)\n",
        "        rect_template.set_fill(TEAL_E, 0.5)\n",
        "\n",
        "        # Add normal curve\n",
        "        mean = math.log(math.log(1e18))\n",
        "        sd = math.sqrt(mean)\n",
        "        curve = FunctionGraph(lambda x: 10 * gauss_func(x, mean, sd), x_range=(0, 10, 0.25))\n",
        "        curve.set_stroke(RED, 2)\n",
        "        curve.match_width(number_line)\n",
        "        curve.move_to(number_line.n2p(0), DL)\n",
        "        self.add(curve)\n",
        "\n",
        "        # Show many numbers\n",
        "        num = int(1e18)\n",
        "        group = VGroup()\n",
        "\n",
        "        for x in range(0, 100):\n",
        "            rect = rect_template.copy()\n",
        "            nf = len(sympy.factorint(num + x))\n",
        "            stack = stacks[nf - 1]\n",
        "            rect.next_to(stack, UP, buff=0)\n",
        "            rect.set_fill(YELLOW)\n",
        "\n",
        "            self.remove(group)\n",
        "            group = self.get_factor_group(num + x, h_line)\n",
        "            self.add(group, rect)\n",
        "            if x < 20:\n",
        "                self.wait(0.5)\n",
        "            else:\n",
        "                self.wait(0.1)\n",
        "\n",
        "            rect.set_fill(TEAL_E)\n",
        "            stack.add(rect)\n",
        "            self.add(stacks)\n",
        "\n",
        "    def get_factor_group(self, num, h_line, font_size=36):\n",
        "        # Test\n",
        "        num_mob = Integer(num, font_size=font_size)\n",
        "        num_mob.next_to(h_line, DOWN, MED_LARGE_BUFF).to_edge(LEFT, buff=0.25)\n",
        "        rhs = self.get_rhs(num_mob)\n",
        "\n",
        "        omega_n = len(sympy.factorint(num))\n",
        "        omega_n_mob = Integer(omega_n, color=YELLOW)\n",
        "        omega_n_mob.match_y(num_mob)\n",
        "        omega_n_mob.to_edge(RIGHT, buff=1)\n",
        "\n",
        "        arrow = Arrow(rhs, omega_n_mob, buff=0.5)\n",
        "        group = VGroup(num_mob, rhs, arrow, omega_n_mob)\n",
        "\n",
        "        return group\n",
        "\n",
        "    def get_rhs(self, num_mob):\n",
        "        if not isinstance(num_mob, Integer):\n",
        "            return VGroup()\n",
        "\n",
        "        kw = dict(font_size=num_mob.get_font_size())\n",
        "        parts = [Tex(\"=\", **kw)]\n",
        "        for factor, exp in sympy.factorint(num_mob.get_value()).items():\n",
        "            base = Integer(factor, **kw)\n",
        "            underline = Underline(base, stretch_factor=1)\n",
        "            underline.set_stroke(YELLOW, 2)\n",
        "            underline.set_y(base[0].get_y(DOWN) - 0.05)\n",
        "            base.add(underline)\n",
        "            if exp == 1:\n",
        "                parts.append(base)\n",
        "            else:\n",
        "                exp_mob = Integer(exp, **kw)\n",
        "                exp_mob.scale(0.75)\n",
        "                exp_mob.next_to(base.get_corner(UR), RIGHT, buff=0.05)\n",
        "                parts.append(VGroup(*base, *exp_mob))\n",
        "            parts.append(Tex(R\"\\times\", **kw))\n",
        "        result = VGroup(*parts[:-1])\n",
        "        result.arrange(RIGHT, buff=SMALL_BUFF)\n",
        "        result.next_to(num_mob, buff=SMALL_BUFF)\n",
        "        target_y = num_mob[0].get_y()\n",
        "        for part in result:\n",
        "            part.shift((target_y - part[0].get_y()) * UP)\n",
        "\n",
        "        self.add(result)\n",
        "\n",
        "        return result\n",
        "\n",
        "\n",
        "class PopulationHeights(InteractiveScene):\n",
        "    random_seed = 2\n",
        "\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        func = lambda x: gauss_func(x, 1, 0.175)\n",
        "\n",
        "        stacks = VGroup()\n",
        "        all_pis = VGroup()\n",
        "        for height in np.arange(0.6, 1.5, 0.1):\n",
        "            n = int(10 * func(height))\n",
        "            randys = VGroup(*(self.get_pi(height) for _ in range(n)))\n",
        "            randys.arrange(RIGHT, buff=SMALL_BUFF)\n",
        "            stacks.add(randys)\n",
        "            all_pis.add(*randys)\n",
        "        stacks.arrange(DOWN, buff=MED_LARGE_BUFF, aligned_edge=LEFT)\n",
        "        for stack, color in zip(stacks, color_gradient([BLUE_C, BLUE_E], len(stacks))):\n",
        "            for pi in stack:\n",
        "                pi.body.set_color(color)\n",
        "        stacks.set_height(FRAME_HEIGHT - 1)\n",
        "        stacks.to_edge(LEFT)\n",
        "\n",
        "        for pi in all_pis:\n",
        "            pi.save_state()\n",
        "\n",
        "        all_pis.shuffle()\n",
        "        all_pis.arrange_in_grid(n_cols=15)\n",
        "        all_pis.shuffle()\n",
        "\n",
        "\n",
        "        self.play(FadeIn(all_pis, lag_ratio=0.01, run_time=4))\n",
        "        self.wait()\n",
        "        self.play(LaggedStartMap(Restore, all_pis, lag_ratio=0.01, run_time=5))\n",
        "        self.wait()\n",
        "\n",
        "    def get_pi(self, height=1):\n",
        "        pi = Randolph(\n",
        "            mode=random.choice([\"happy\", \"hooray\", \"pondering\", \"tease\"]),\n",
        "            height=1\n",
        "        )\n",
        "        pi.body.stretch(math.sqrt(height), 1, about_edge=UP)\n",
        "        diff = height - pi.get_height()\n",
        "        new_points = np.array(pi.body.get_points())\n",
        "        new_points[3:26] += diff * DOWN\n",
        "        new_points[63:82] += diff * DOWN\n",
        "        pi.body.set_points(new_points)\n",
        "\n",
        "        return pi\n",
        "\n",
        "\n",
        "class VideoPlan(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Rectangles\n",
        "        full_rect = FullScreenRectangle()\n",
        "        screen_rect = ScreenRectangle()\n",
        "        screen_rect.set_height(5.5)\n",
        "        screen_rect.to_edge(DOWN)\n",
        "        screen_rect.set_fill(BLACK, 1)\n",
        "        screen_rect.set_stroke(width=2)\n",
        "        rects = VGroup(full_rect, screen_rect)\n",
        "        self.add(*rects)\n",
        "\n",
        "        # CLT title\n",
        "        big_name = Text(\"The Central\\nLimit Theorem\", font_size=120)\n",
        "        name = Text(\"The Central Limit Theorem\", font_size=60)\n",
        "        name.to_edge(UP)\n",
        "        subtitle = Text(\"from the basics\")\n",
        "        subtitle.set_color(GREY_A)\n",
        "        subtitle.next_to(name, DOWN)\n",
        "\n",
        "        rects.set_opacity(0)\n",
        "        self.play(FadeIn(big_name, lag_ratio=0.1))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            TransformMatchingStrings(big_name, name, run_time=1),\n",
        "            full_rect.animate.set_opacity(1)\n",
        "        )\n",
        "        self.play(FadeIn(subtitle, 0.5 * DOWN))\n",
        "        self.wait(2)\n",
        "\n",
        "        # Next part\n",
        "        group1 = VGroup(name, subtitle, screen_rect)\n",
        "        group1.target = group1.generate_target()\n",
        "        group1.target.set_width(FRAME_WIDTH * 0.5 - 1)\n",
        "        group1.target.move_to(FRAME_WIDTH * LEFT * 0.25)\n",
        "\n",
        "        screen2 = group1.target[2].copy()\n",
        "        screen2.set_opacity(1)\n",
        "        name2 = Text(\"Diving deeper\")\n",
        "        name2.scale(group1.target[0][0].get_height() / name2[0].get_height())\n",
        "        name2.move_to(group1.target[0])\n",
        "        group2 = VGroup(name2, screen2)\n",
        "        group2.move_to(FRAME_WIDTH * RIGHT * 0.25)\n",
        "\n",
        "        self.play(MoveToTarget(group1))\n",
        "        self.play(\n",
        "            FadeTransform(screen_rect.copy(), screen2),\n",
        "            FadeTransform(name.copy(), name2),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Also follow-on to convolutions\n",
        "        group1.target = group1.generate_target()\n",
        "        group1.target[2].scale(0.75, about_edge=UP)\n",
        "        group1.target[1].scale(0)\n",
        "        group1.target.arrange(DOWN, buff=SMALL_BUFF)\n",
        "        group1.target.to_corner(UL)\n",
        "\n",
        "        conv_rect = group1.target[2].copy()\n",
        "        conv_rect.set_stroke(WHITE, 3, 1)\n",
        "        conv_image = ImageMobject(\"ConvolutionThumbnail\")\n",
        "        conv_image.replace(conv_rect)\n",
        "        conv_name = Text(\"Convolutions\")\n",
        "        conv_name.replace(group1.target[0], dim_to_match=1)\n",
        "        conv_group = Group(conv_name, conv_rect, conv_image)\n",
        "        conv_group.to_corner(DL)\n",
        "\n",
        "        arrows = VGroup(\n",
        "            Arrow(group1.target[2].get_right(), screen2.get_left() + UP),\n",
        "            Arrow(conv_rect.get_right(), screen2.get_left() + DOWN),\n",
        "        )\n",
        "        arrows.set_color(BLUE)\n",
        "\n",
        "        self.play(LaggedStart(\n",
        "            MoveToTarget(group1),\n",
        "            FadeIn(conv_group, DOWN),\n",
        "            name2.animate.next_to(screen2, UP),\n",
        "            lag_ratio=0.25\n",
        "        ))\n",
        "        self.play(*map(GrowArrow, arrows))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class NextVideoInlay(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Graph\n",
        "        plane = NumberPlane(\n",
        "            (-5, 5), (-0.25, 1.0, 0.25),\n",
        "            width=2.5, height=1.25,\n",
        "            background_line_style=dict(\n",
        "                stroke_color=GREY_B,\n",
        "                stroke_width=1,\n",
        "            ),\n",
        "            faded_line_style=dict(\n",
        "                stroke_color=GREY_B,\n",
        "                stroke_width=1,\n",
        "                stroke_opacity=0.25,\n",
        "            ),\n",
        "            faded_line_ratio=4\n",
        "        )\n",
        "        plane.set_height(FRAME_HEIGHT)\n",
        "\n",
        "        graph = plane.get_graph(lambda x: gauss_func(x, 0, 1))\n",
        "        graph.set_stroke(YELLOW, 3)\n",
        "\n",
        "        self.add(plane)\n",
        "        self.play(\n",
        "            VShowPassingFlash(graph.copy().set_stroke(TEAL, 10), time_width=1.5),\n",
        "            ShowCreation(graph),\n",
        "            run_time=2\n",
        "        )\n",
        "\n",
        "        # Function name\n",
        "        expr = Tex(\n",
        "            R\"{1 \\over \\sqrt{2\\pi}} e^{-x^2 / 2}\",\n",
        "        )\n",
        "        expr.set_height(3)\n",
        "        expr.next_to(plane.c2p(0, 0.25), UP)\n",
        "        expr.to_edge(LEFT)\n",
        "        expr.set_backstroke(width=20)\n",
        "\n",
        "        self.play(Write(expr, lag_ratio=0.1))\n",
        "        self.wait()\n",
        "\n",
        "        # Questions\n",
        "        rects = VGroup(\n",
        "            SurroundingRectangle(expr[\"e^{-x^2 / 2}\"]).set_stroke(TEAL, 5),\n",
        "            SurroundingRectangle(expr[R\"\\pi\"]).set_stroke(RED, 5),\n",
        "        )\n",
        "        questions = [\n",
        "            Text(\"Why this function?\"),\n",
        "            Text(\"Where's\\nthe circle?\", alignment=\"LEFT\"),\n",
        "        ]\n",
        "        for question, rect, vect in zip(questions, rects, [UP, DOWN]):\n",
        "            question.scale(2)\n",
        "            question.next_to(rect, vect, MED_LARGE_BUFF, aligned_edge=LEFT)\n",
        "            question.match_color(rect)\n",
        "            question.set_backstroke(width=20)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(questions[0]),\n",
        "            ShowCreation(rects[0]),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(questions[1]),\n",
        "            ShowCreation(rects[1]),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class SumsOfSizeFive(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        morty = self.teacher\n",
        "        stds = self.students\n",
        "\n",
        "        self.play(\n",
        "            morty.change(\"raise_right_hand\", self.screen),\n",
        "            self.change_students(\"pondering\", \"happy\", \"tease\", look_at=self.screen)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Show sums\n",
        "        def get_sum():\n",
        "            values = [\n",
        "                Integer(random.choice([-1, 1]), include_sign=True)\n",
        "                for x in range(5)\n",
        "            ]\n",
        "            lhs = Tex(R\"\\text{Sum} = \")\n",
        "            rhs = Integer(sum(v.get_value() for v in values))\n",
        "            result = VGroup(lhs, *values, Tex(R\" = \"), rhs)\n",
        "            result.arrange(RIGHT, buff=0.15)\n",
        "            result.next_to(self.screen, RIGHT, buff=-0.5)\n",
        "            return result\n",
        "\n",
        "        curr_sum = get_sum()\n",
        "\n",
        "        brace = Brace(curr_sum[1:-2], UP)\n",
        "        brace_text = brace.get_text(\"5 values\")\n",
        "        brace_text.set_color(YELLOW)\n",
        "\n",
        "        self.add(curr_sum)\n",
        "        self.play(GrowFromCenter(brace), FadeIn(brace_text))\n",
        "        for x in range(7):\n",
        "            new_sum = get_sum()\n",
        "            self.play(\n",
        "                FadeOut(curr_sum[1:], lag_ratio=0.1, shift=0.2 * UP),\n",
        "                FadeIn(new_sum[1:], lag_ratio=0.1, shift=0.2 * UP),\n",
        "                *(pi.animate.look_at(new_sum) for pi in self.pi_creatures)\n",
        "            )\n",
        "            self.wait()\n",
        "            curr_sum = new_sum\n",
        "\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class HighLevelCLTDescription(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Title\n",
        "        title = Text(\"General idea of the Central Limit Theorem\", font_size=60)\n",
        "        title.to_edge(UP, buff=MED_SMALL_BUFF)\n",
        "        title[\"Central Limit Theorem\"].set_color(YELLOW)\n",
        "        underline = Underline(title)\n",
        "        underline.scale(1.2)\n",
        "        underline.set_stroke(WHITE, [0, 3, 3, 0])\n",
        "        self.add(title)\n",
        "        self.play(ShowCreation(underline))\n",
        "        self.wait()\n",
        "\n",
        "        # Random variables\n",
        "        kw = dict(font_size=42)\n",
        "        words = TexText(\"Start with a random variable: $X$\", **kw)\n",
        "        words[\"random variable: $X$\"].set_color(BLUE)\n",
        "        sub_words = Text(\"\"\"\n",
        "            (a random process, where each outcome\n",
        "            is associated with some number)\n",
        "        \"\"\", font_size=32)\n",
        "        sub_words.next_to(words, DOWN)\n",
        "        sub_words.set_color(GREY_A)\n",
        "\n",
        "        point1 = VGroup(words, sub_words)\n",
        "        point1.next_to(underline, DOWN, buff=0.7)\n",
        "        point1.to_edge(LEFT, buff=MED_SMALL_BUFF)\n",
        "\n",
        "        example_boxes = Square().replicate(2)\n",
        "        example_boxes.set_height(1.75)\n",
        "        example_boxes.set_width(2.25, stretch=True)\n",
        "        example_boxes.arrange(RIGHT, buff=1)\n",
        "        example_boxes.set_stroke(WHITE, 1)\n",
        "        example_boxes.match_y(point1)\n",
        "        example_boxes.to_edge(RIGHT)\n",
        "\n",
        "        self.play(\n",
        "            Write(words, run_time=1, stroke_width=1),\n",
        "            LaggedStartMap(FadeIn, example_boxes, lag_ratio=0.5),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(FadeIn(sub_words, 0.25 * DOWN))\n",
        "        self.wait()\n",
        "\n",
        "        # Sample many\n",
        "        point2 = TexText(R\"\"\"\n",
        "            Add $N$ samples of this variable \\\\\n",
        "            $X_1 + X_2 + \\cdots + X_N$\n",
        "        \"\"\", **kw)\n",
        "        point2[\"$N$ samples\"].set_color(RED)\n",
        "        point2[R\"$X_1 + X_2 + \\cdots + X_N$\"].set_color(BLUE).shift(0.25 * DOWN)\n",
        "        point2.next_to(point1, DOWN, buff=1.1, aligned_edge=LEFT)\n",
        "\n",
        "        example_boxes2 = example_boxes.copy()\n",
        "        example_boxes2.match_y(point2)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(point2, DOWN),\n",
        "            FadeIn(example_boxes2, DOWN),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Distribution\n",
        "        point3 = TexText(R\"\"\"\n",
        "            The distribution of this sum looks \\\\\n",
        "            more like a bell curve as $N \\to \\infty$\n",
        "        \"\"\", **kw)\n",
        "        point3[\"this sum\"].set_color(BLUE)\n",
        "        point3[\"bell curve\"].set_color(YELLOW)\n",
        "        point3[R\"$N \\to \\infty$\"].set_color(RED)\n",
        "        point3.next_to(point2, DOWN, buff=1.25, aligned_edge=LEFT)\n",
        "        example_boxes3 = example_boxes.copy()\n",
        "        example_boxes3.match_y(point3)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(point3, DOWN),\n",
        "            FadeIn(example_boxes3, DOWN),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class GoalsThisLesson(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.add(self.screen)\n",
        "        self.screen.set_stroke(width=2)\n",
        "        morty = self.teacher\n",
        "        stds = self.students\n",
        "\n",
        "        self.play(\n",
        "            morty.change(\"tease\"),\n",
        "            self.change_students(\"confused\", \"thinking\", \"hesitant\", look_at=self.screen)\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "        # Goals\n",
        "        title = Text(\"Goals of this lesson\", font_size=60)\n",
        "        title.to_corner(UR)\n",
        "        underline = Underline(title)\n",
        "        underline.scale(1.2)\n",
        "        underline.set_color(GREY_B)\n",
        "\n",
        "        goals = BulletedList(\n",
        "            \"Make this quantitative\",\n",
        "            \"Put formulas to it\",\n",
        "            \"Use it to predict\",\n",
        "            buff=0.35,\n",
        "            font_size=48\n",
        "        )\n",
        "        goals.next_to(underline, DOWN, MED_LARGE_BUFF)\n",
        "        goals.align_to(title, LEFT)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(title),\n",
        "            ShowCreation(underline),\n",
        "            morty.change(\"raise_right_hand\", title),\n",
        "            self.change_students(\"erm\", \"thinking\", \"tease\", look_at=title)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        for goal in goals:\n",
        "            self.play(FadeIn(goal, UP))\n",
        "            self.wait()\n",
        "\n",
        "        # Three assumptions\n",
        "        new_title = VGroup(\n",
        "            Text(\"3 assumptions underlie the\"),\n",
        "            Text(\"Central Limit Theorem\"),\n",
        "        )\n",
        "        for line in new_title:\n",
        "            line.match_width(title)\n",
        "        new_title.arrange(DOWN)\n",
        "        new_title.move_to(title, UP)\n",
        "        new_title.set_color(RED)\n",
        "\n",
        "        numbers = VGroup(Tex(\"1.\"), Tex(\"2.\"), Tex(\"3.\"))\n",
        "        numbers.arrange(DOWN, buff=0.5, aligned_edge=LEFT)\n",
        "        numbers.next_to(new_title, DOWN, buff=0.75, aligned_edge=LEFT)\n",
        "        numbers.set_color(RED)\n",
        "\n",
        "        boxes = VGroup(*(\n",
        "            Rectangle(height=1.2 * num.get_height(), width=4).next_to(num)\n",
        "            for num in numbers\n",
        "        ))\n",
        "        boxes.set_stroke(width=0)\n",
        "        boxes.set_fill(interpolate_color(RED_E, BLACK, 0.8), 1)\n",
        "        for box in boxes:\n",
        "            box.save_state()\n",
        "            box.stretch(0, 0, about_edge=LEFT)\n",
        "\n",
        "        self.play(\n",
        "            FadeOut(title, 0.5 * DOWN),\n",
        "            FadeIn(new_title, 0.5 * DOWN),\n",
        "            underline.animate.next_to(new_title, DOWN, SMALL_BUFF).set_color(RED_E),\n",
        "            LaggedStartMap(FadeOut, goals, shift=DOWN),\n",
        "            morty.change(\"tease\", new_title),\n",
        "            self.change_students(\"hesitant\", \"pondering\", \"skeptical\", new_title),\n",
        "        )\n",
        "        self.play(\n",
        "            FadeIn(numbers, lag_ratio=0.25),\n",
        "            morty.change(\"raise_left_hand\")\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(\n",
        "            LaggedStartMap(Restore, boxes),\n",
        "            LaggedStart(\n",
        "                morty.change(\"tease\"),\n",
        "                stds[0].change(\"angry\"),\n",
        "                stds[1].change(\"hesitant\"),\n",
        "                stds[2].change(\"erm\"),\n",
        "                lag_ratio=0.2\n",
        "            )\n",
        "        )\n",
        "        self.wait(4)\n",
        "\n",
        "        # # Reference again and look down\n",
        "        # self.remove(self.screen)\n",
        "        # self.remove(self.background)\n",
        "\n",
        "        # self.play(\n",
        "        #     morty.change(\"raise_left_hand\", boxes),\n",
        "        #     self.change_students(look_at=boxes)\n",
        "        # )\n",
        "        # self.wait(2)\n",
        "        # self.play(\n",
        "        #     self.change_students(\"pondering\", \"pondering\", \"pondering\", look_at=BOTTOM + 3 * LEFT),\n",
        "        #     morty.change(\"tease\", stds)\n",
        "        # )\n",
        "        # self.wait(3)\n",
        "\n",
        "\n",
        "class CommentOnSpikeyBellCurve(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.remove(self.background)\n",
        "        morty = self.teacher\n",
        "        stds = self.students\n",
        "\n",
        "        # Test\n",
        "        self.play(\n",
        "            morty.says(\"Kind of a\\nbell curve\", mode=\"shruggie\"),\n",
        "            self.change_students(\"erm\", \"hesitant\", \"hesitant\", look_at=self.screen)\n",
        "        )\n",
        "        self.wait(3)\n",
        "        self.play(\n",
        "            stds[1].says(\"Is it...supposed to\\nlook like that?\"),\n",
        "            morty.debubble(),\n",
        "        )\n",
        "        self.look_at(self.screen)\n",
        "        self.wait(2)\n",
        "        self.play(\n",
        "            stds[2].says(\"How many samples\\nuntil we're sure?\"),\n",
        "            stds[1].debubble(),\n",
        "        )\n",
        "        self.wait(5)\n",
        "\n",
        "\n",
        "class ConvolutionsWrapper(VideoWrapper):\n",
        "    title = \"Convolutions\"\n",
        "    wait_time = 8\n",
        "\n",
        "\n",
        "class WhatElseDoYouNotice(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        morty = self.teacher\n",
        "        self.remove(self.background)\n",
        "        self.play(\n",
        "            morty.says(\"What else do\\nyou notice?\"),\n",
        "            self.change_students(\"pondering\", \"erm\", \"pondering\", look_at=self.screen)\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(self.change_students(\"erm\", \"pondering\", \"tease\", look_at=self.screen))\n",
        "        self.wait(2)\n",
        "\n",
        "\n",
        "class ReferenceMeanAndSD(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        morty = self.teacher\n",
        "        stds = self.students\n",
        "        self.remove(self.background)\n",
        "\n",
        "        self.play(\n",
        "            morty.says(\"We must put\\nnumbers to those!\", mode=\"surprised\"),\n",
        "            self.change_students(\"hesitant\", \"concerned_musician\", \"tease\")\n",
        "        )\n",
        "        self.look_at(self.screen)\n",
        "        self.wait(3)\n",
        "\n",
        "        # Mean and sd\n",
        "        kw = dict(t2c={R\"\\mu\": PINK, R\"\\sigma\": RED}, font_size=42)\n",
        "        terms = VGroup(\n",
        "            Tex(R\"\\text{Mean: } \\mu = E[X]\", **kw),\n",
        "            Tex(R\"\\text{Std dev: } \\sigma = \\sqrt{E[(X - \\mu)^2]}\", **kw),\n",
        "        )\n",
        "\n",
        "        terms.arrange(DOWN, buff=LARGE_BUFF, aligned_edge=LEFT)\n",
        "        terms.next_to(morty, UP, LARGE_BUFF)\n",
        "        terms.to_edge(RIGHT)\n",
        "\n",
        "        self.play(\n",
        "            morty.debubble(mode=\"raise_right_hand\", look_at=terms),\n",
        "            self.change_students(\"pondering\", \"hesitant\", \"happy\", look_at=terms),\n",
        "            LaggedStartMap(FadeIn, terms, shift=UP, lag_ratio=0.5)\n",
        "        )\n",
        "        self.wait(3)\n",
        "        self.play(\n",
        "           stds[2].says(\"Great!\", mode=\"hooray\"),\n",
        "           morty.change(\"happy\")\n",
        "        )\n",
        "        self.play(\n",
        "            stds[0].says(\"Wait, can you\\nremind me?\", mode=\"guilty\"),\n",
        "            morty.change(\"tease\")\n",
        "        )\n",
        "        self.wait(5)\n",
        "\n",
        "\n",
        "class AskWhy(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        morty = self.teacher\n",
        "        stds = self.students\n",
        "\n",
        "        self.play(\n",
        "            stds[1].says(\"Why?\", mode=\"raise_left_hand\")\n",
        "        )\n",
        "        self.play(\n",
        "            morty.change(\"tease\"),\n",
        "            self.change_students(\"pondering\", \"raise_left_hand\", \"confused\", look_at=morty.get_top() + 3 * UP)\n",
        "        )\n",
        "        self.wait(8)\n",
        "\n",
        "\n",
        "class PDFWrapper(VideoWrapper):\n",
        "    title = \"Probability Density Functions\"\n",
        "    wait_time = 8\n",
        "\n",
        "\n",
        "class AskAboutPi(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        morty = self.teacher\n",
        "        stds = self.students\n",
        "        self.remove(self.background)\n",
        "\n",
        "        self.play(LaggedStart(\n",
        "            morty.change(\"happy\"),\n",
        "            stds[1].says(\"Wait, what?!\", mode=\"surprised\"),\n",
        "            stds[0].change(\"confused\", self.screen),\n",
        "            stds[2].change(\"hesitant\", self.screen),\n",
        "        ))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            stds[2].says(\"Where's the\\ncircle?\", mode=\"raise_left_hand\")\n",
        "        )\n",
        "        self.wait(3)\n",
        "        self.play(\n",
        "            stds[1].debubble(),\n",
        "            stds[2].debubble(),\n",
        "            morty.says(TexText(R\"We'll cover \\\\ that later\"))\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "\n",
        "class WhyPiQuestion(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Axes\n",
        "        axes = Axes((-3, 3), (0, 2, 0.5), width=10, height=5)\n",
        "        axes.x_axis.add_numbers(font_size=16)\n",
        "        axes.y_axis.add_numbers(num_decimal_places=1, font_size=16)\n",
        "        graph = axes.get_graph(lambda x: math.exp(-x**2))\n",
        "        graph.set_stroke(BLUE, 2)\n",
        "        graph.set_fill(TEAL, 0.5)\n",
        "\n",
        "        self.add(axes, graph)\n",
        "\n",
        "        # Labels\n",
        "        graph_label = Tex(\"e^{-x^2}\", font_size=72)\n",
        "        graph_label.next_to(graph.pfp(0.4), UL)\n",
        "        self.add(graph_label)\n",
        "\n",
        "        area_label = Tex(R\"\\text{Area} = \\sqrt{\\pi}\")\n",
        "        area_label.move_to(graph, UR)\n",
        "        area_label.shift(UL)\n",
        "        arrow = Arrow(area_label.get_bottom(), graph.get_center() + 0.5 * RIGHT)\n",
        "\n",
        "        self.add(area_label, arrow)\n",
        "\n",
        "        question = Text(\"But where's the circle?\", font_size=30)\n",
        "        question.set_color(YELLOW)\n",
        "        question.next_to(area_label, DOWN)\n",
        "        question.to_edge(RIGHT)\n",
        "        self.add(question)\n",
        "\n",
        "\n",
        "class WeCanBeMoreElegant(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.play(\n",
        "            self.teacher.says(\"We can be\\nmore elegant\"),\n",
        "            self.change_students(\"pondering\", \"confused\", \"sassy\", look_at=self.screen)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(self.students[2].change(\"tease\", look_at=self.teacher.eyes))\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class OneMoreNuance(InteractiveScene):\n",
        "    def construct(self):\n",
        "        morty = Mortimer()\n",
        "        morty.to_edge(DOWN)\n",
        "\n",
        "        self.play(morty.says(\"One more\\nquick nuance\", mode=\"speaking\"))\n",
        "        self.play(Blink(morty))\n",
        "        self.play(morty.change(\"tease\", look_at=BOTTOM))\n",
        "        self.wait()\n",
        "        for x in range(2):\n",
        "            self.play(Blink(morty))\n",
        "            self.wait()\n",
        "\n",
        "\n",
        "class LetsHaveFun(InteractiveScene):\n",
        "    def construct(self):\n",
        "        morty = Mortimer()\n",
        "        morty.to_edge(DOWN)\n",
        "\n",
        "        self.play(morty.says(\"Let's have\\nsome fun\", mode=\"hooray\", look_at=BOTTOM))\n",
        "        for x in range(2):\n",
        "            self.play(Blink(morty))\n",
        "            self.wait()\n",
        "\n",
        "\n",
        "class AskAboutFormalStatement(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        morty = self.teacher\n",
        "        stds = self.students\n",
        "        question = Text(\n",
        "            \"But what is the\\ncentral limit\\ntheorem\",\n",
        "            t2s={\"theorem\": ITALIC},\n",
        "            t2c={\"theorem\": YELLOW},\n",
        "        )\n",
        "\n",
        "        self.play(\n",
        "            stds[2].says(question, mode=\"sassy\", bubble_direction=LEFT)\n",
        "        )\n",
        "        self.play(morty.change(\"guilty\"))\n",
        "        self.play(\n",
        "            stds[0].change(\"pondering\"),\n",
        "            stds[1].change(\"erm\"),\n",
        "        )\n",
        "        self.wait(8)\n",
        "\n",
        "\n",
        "class TrueTheoremWords(InteractiveScene):\n",
        "    def construct(self):\n",
        "        words = \"Actual rigorous\\nno-jokes-this-time\\nCentral Limit Theorem\"\n",
        "        text = Text(words)\n",
        "        text.set_height(0.3 * FRAME_HEIGHT)\n",
        "        text.to_edge(UP)\n",
        "\n",
        "        for word in [\"Actual\", \"rigorous\", \"no-\",\"jokes-\", \"this-\", \"time\", \"Central\", \"Limit\", \"Theorem\"]:\n",
        "            self.add(text[word])\n",
        "            self.wait(0.1 * len(word))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class ExampleQuestion(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        # Setup\n",
        "        question = Text(\"\"\"\n",
        "            Consider rolling a fair die 100 times,\n",
        "            and adding the results.\n",
        "\n",
        "            Find a range of values such that you're\n",
        "            95% sure the sum will fall within\n",
        "            this range.\n",
        "        \"\"\", alignment=\"LEFT\")\n",
        "        question.to_corner(UL)\n",
        "\n",
        "        die_values = np.random.randint(1, 7, 100)\n",
        "        dice = VGroup(*(\n",
        "            DieFace(\n",
        "                value,\n",
        "                fill_color=BLUE_E,\n",
        "                stroke_width=1,\n",
        "                dot_color=WHITE\n",
        "            )\n",
        "            for value in die_values\n",
        "        ))\n",
        "        dice.arrange_in_grid()\n",
        "        dice.set_height(3.0)\n",
        "        dice.next_to(question, RIGHT, buff=1)\n",
        "        dice.to_edge(UP, buff=1.0)\n",
        "\n",
        "        sum_label = TexText(\"Sum = 100\")\n",
        "        sum_label.next_to(dice, UP)\n",
        "        num = sum_label.make_number_changeable(\"100\")\n",
        "        n_tracker = ValueTracker(0)\n",
        "        num.add_updater(lambda m: m.set_value(sum(die_values[:int(n_tracker.get_value())])))\n",
        "\n",
        "        # Ask for an example\n",
        "        morty = self.teacher\n",
        "        stds = self.students\n",
        "\n",
        "        self.play(\n",
        "            stds[2].says(\"Can we see a\\nconcrete example?\"),\n",
        "            morty.change(\"happy\")\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Add up dice\n",
        "        die_highlights = dice.copy()\n",
        "        die_highlights.set_stroke(YELLOW, 1)\n",
        "\n",
        "        part1 = re.findall(r\"Consider .*\\n.* results.\", question.get_string())[0]\n",
        "        self.play(\n",
        "            morty.change(\"raise_right_hand\", question),\n",
        "            self.change_students(\"pondering\", \"pondering\", \"tease\", look_at=question),\n",
        "            FadeIn(question[part1], lag_ratio=0.1, run_time=1.5),\n",
        "            FadeOut(stds[2].bubble),\n",
        "            FadeOut(stds[2].bubble.content),\n",
        "        )\n",
        "        self.play(\n",
        "            FlashUnder(question[\"fair die\"]),\n",
        "            question[\"fair die\"].animate.set_color(YELLOW),\n",
        "            FadeIn(dice, lag_ratio=0.03, run_time=2),\n",
        "        )\n",
        "        self.play(\n",
        "            *(pi.animate.look_at(dice) for pi in [morty, *stds])\n",
        "        )\n",
        "        n_tracker.set_value(0)\n",
        "        self.play(\n",
        "            VFadeIn(sum_label),\n",
        "            n_tracker.animate.set_value(100).set_anim_args(run_time=2),\n",
        "            ShowIncreasingSubsets(die_highlights, run_time=2)\n",
        "        )\n",
        "        self.play(FadeOut(die_highlights))\n",
        "        self.wait()\n",
        "\n",
        "        # Find a range\n",
        "        part2 = re.findall(r\"Find .*\\n.*\\n.* range.\", question.get_string())[0]\n",
        "        self.play(\n",
        "            morty.change(\"tease\", question),\n",
        "            self.change_students(\"erm\", \"hesitant\", \"pondering\", look_at=question),\n",
        "            FadeIn(question[part2], lag_ratio=0.1, run_time=1.5),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FlashUnder(question[r\"95% sure\"], color=TEAL),\n",
        "            question[r\"95% sure\"].animate.set_color(TEAL)\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(self.change_students(\"confused\", \"erm\", \"tease\", look_at=question))\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class ExampleQuestionNoPiCreatures(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Setup\n",
        "        question = [\n",
        "            Text(\"\"\"\n",
        "                Consider rolling a die\n",
        "                100 times, and adding the\n",
        "                results.\n",
        "            \"\"\", alignment=\"LEFT\"),\n",
        "            Text(\"\"\"\n",
        "                Find a range of values such\n",
        "                that you're 95% sure the sum\n",
        "                will fall within this range.\n",
        "            \"\"\", alignment=\"LEFT\")\n",
        "        ]\n",
        "        question[0].to_corner(UL)\n",
        "        question[1].to_corner(UR)\n",
        "\n",
        "        # Dice\n",
        "        def get_dice():\n",
        "            die_values = np.random.randint(1, 7, 100)\n",
        "            dice = VGroup(*(\n",
        "                DieFace(\n",
        "                    value,\n",
        "                    fill_color=BLUE_E,\n",
        "                    stroke_width=1,\n",
        "                    dot_color=WHITE\n",
        "                )\n",
        "                for value in die_values\n",
        "            ))\n",
        "            dice.arrange_in_grid()\n",
        "            dice.set_height(4.5)\n",
        "            dice.next_to(question[0], DOWN, buff=1)\n",
        "            return dice\n",
        "\n",
        "        dice = get_dice()\n",
        "\n",
        "        sum_label = TexText(\"Sum = 100\", font_size=60)\n",
        "        sum_label.next_to(dice, RIGHT, buff=LARGE_BUFF)\n",
        "        num = sum_label.make_number_changeable(\"100\")\n",
        "        num.add_updater(lambda m: m.set_value(sum(\n",
        "            die.value for die in dice\n",
        "        )))\n",
        "\n",
        "        # Add up dice\n",
        "        self.play(FadeIn(question[0], lag_ratio=0.1, run_time=1.5))\n",
        "        self.play(\n",
        "            VFadeIn(sum_label),\n",
        "            ShowIncreasingSubsets(dice, run_time=2)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Find a range\n",
        "        self.play(\n",
        "            FadeIn(question[1], lag_ratio=0.1, run_time=1.5),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FlashUnder(question[1][r\"95% sure\"], color=TEAL),\n",
        "            question[1][r\"95% sure\"].animate.set_color(TEAL)\n",
        "        )\n",
        "\n",
        "        # More sums\n",
        "        for x in range(5):\n",
        "            old_dice = dice.copy()\n",
        "            dice.set_submobjects(list(get_dice()))\n",
        "            self.play(ShowIncreasingSubsets(dice, run_time=2), FadeOut(old_dice, run_time=0.5))\n",
        "            self.wait()\n",
        "\n",
        "\n",
        "class AverageDiceValues(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        avg_label = TexText(\"Average value = 0.00\")\n",
        "        avg_label.make_number_changeable(\"0.00\")\n",
        "        avg_label.next_to(ORIGIN, RIGHT)\n",
        "        avg_label.set_y(FRAME_HEIGHT / 4)\n",
        "        self.add(avg_label)\n",
        "\n",
        "        self.old_dice = VGroup()\n",
        "        for _ in range(20):\n",
        "            self.show_sample(avg_label, 100)\n",
        "            self.wait(2)\n",
        "\n",
        "    def show_sample(self, avg_label, n_dice, added_anims=[]):\n",
        "        dice = VGroup(*(\n",
        "            DieFace(random.randint(1, 6), fill_color=BLUE_E, dot_color=WHITE, stroke_width=1)\n",
        "            for x in range(n_dice)\n",
        "        ))\n",
        "        dice.arrange_in_grid()\n",
        "        dice.set_height(3.5)\n",
        "        dice.next_to(avg_label, LEFT, buff=LARGE_BUFF)\n",
        "        dice.to_edge(UP, buff=MED_SMALL_BUFF)\n",
        "\n",
        "        self.play(LaggedStart(\n",
        "            FadeOut(self.old_dice, run_time=0.5),\n",
        "            ShowIncreasingSubsets(dice, run_time=1, int_func=np.ceil),\n",
        "            UpdateFromFunc(avg_label[-1], lambda m: m.set_value(\n",
        "                np.mean([die.value for die in dice])\n",
        "            )),\n",
        "            *added_anims\n",
        "        ))\n",
        "        avg_label[-1].set_color(YELLOW)\n",
        "\n",
        "        self.old_dice = dice\n",
        "\n",
        "\n",
        "class DoesThisMakeSense(InteractiveScene):\n",
        "    def construct(self):\n",
        "        rect = SurroundingRectangle(Tex(R\"\\sigma_a = \\sigma / \\sqrt{100} = 0.171\"))\n",
        "        words = Text(\"Does this make sense?\")\n",
        "        words.next_to(rect, DOWN)\n",
        "        words.align_to(rect.get_center(), RIGHT)\n",
        "\n",
        "        rect.set_stroke(RED, 2)\n",
        "        words.set_color(RED)\n",
        "\n",
        "        self.play(\n",
        "            ShowCreation(rect),\n",
        "            Write(words)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class OneMoreSideNote(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        self.play(\n",
        "            self.change_students(\"pondering\", \"pondering\", \"erm\", look_at=self.screen)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            self.teacher.says(\n",
        "                \"Will you tolerate\\none more\\nside note?\",\n",
        "                mode=\"speaking\",\n",
        "            ),\n",
        "        )\n",
        "        self.play(\n",
        "            self.change_students(\"tired\", \"pondering\", \"hesitant\")\n",
        "        )\n",
        "        self.wait(4)\n",
        "\n",
        "\n",
        "class ThreeAssumptions(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Title\n",
        "        title = Text(\"Three assumptions\", font_size=60)\n",
        "        title.to_edge(UP, buff=MED_SMALL_BUFF)\n",
        "        title.set_color(RED)\n",
        "        underline = Underline(title, stretch_factor=1.5)\n",
        "        underline.match_color(title)\n",
        "        underline.shift(0.15 * UP)\n",
        "\n",
        "\n",
        "        # Points\n",
        "        points = [\n",
        "            TexText(R\"1. All $X_i$'s are independent \\\\ from each other.\"),\n",
        "            TexText(R\"2. Each $X_i$ is drawn from \\\\ the same distribution.\"),\n",
        "            TexText(R\"3. $0 < \\text{Var}(X_i) < \\infty$\"),\n",
        "        ]\n",
        "        points[0][\"from each other.\"].align_to(points[0][\"All\"], LEFT)\n",
        "        points[1][\"the same distribution.\"].align_to(points[1][\"Each\"], LEFT)\n",
        "        VGroup(*points).arrange(DOWN, buff=LARGE_BUFF, aligned_edge=LEFT).to_edge(LEFT)\n",
        "        for point in points:\n",
        "            point[\"X_i\"].set_color(BLUE)\n",
        "\n",
        "        rects = VGroup(*(SurroundingRectangle(point[2:]) for point in points))\n",
        "        rects.set_stroke(width=0)\n",
        "        rects.set_fill(interpolate_color(RED_E, BLACK, 0.9), 1.0)\n",
        "\n",
        "        # Add title and numbers\n",
        "        self.add(title)\n",
        "        self.play(ShowCreation(underline, run_time=2))\n",
        "        self.play(\n",
        "            LaggedStart(*(\n",
        "                Write(point[:2])\n",
        "                for point in points\n",
        "            ), lag_ratio=0.7),\n",
        "            LaggedStartMap(FadeIn, rects, lag_ratio=0.7)\n",
        "        )\n",
        "        self.add(*points, rects)\n",
        "        self.wait()\n",
        "\n",
        "        # Add first two points\n",
        "        self.play(rects[0].animate.stretch(0, 0, about_edge=RIGHT))\n",
        "        self.remove(rects[0])\n",
        "        self.wait()\n",
        "\n",
        "        word = points[0][\"independent\"]\n",
        "        self.play(\n",
        "            FlashUnder(word, color=TEAL),\n",
        "            word.animate.set_color(TEAL),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        self.play(rects[1].animate.stretch(0, 0, about_edge=RIGHT))\n",
        "        self.remove(rects[1])\n",
        "        self.wait()\n",
        "        word = points[1][\"same distribution\"]\n",
        "        self.play(\n",
        "            FlashUnder(word, color=YELLOW),\n",
        "            word.animate.set_color(YELLOW),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Mention iid\n",
        "        box = SurroundingRectangle(VGroup(*points[:2]))\n",
        "        box.set_stroke(GREY_C, 2)\n",
        "        iid_words = TexText(R\"i.i.d. $\\rightarrow$ independent and identically distributed\")\n",
        "        iid_words.next_to(box, UP, MED_LARGE_BUFF, aligned_edge=LEFT)\n",
        "\n",
        "        title.add(underline)\n",
        "\n",
        "        self.play(\n",
        "            FadeOut(title),\n",
        "            ShowCreation(box),\n",
        "        )\n",
        "        self.play(Write(iid_words))\n",
        "        self.wait(2)\n",
        "        self.play(\n",
        "            FadeOut(box),\n",
        "            FadeOut(iid_words),\n",
        "            FadeIn(title)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Mention generalizations\n",
        "        gen_words = TexText(R\"These can be relaxed (see Lindeberg CLT, $\\alpha$-mixing, etc.)\")\n",
        "        gen_words.scale(0.7)\n",
        "        gen_words.set_color(GREY_A, 1)\n",
        "        gen_words.next_to(box, UP, aligned_edge=LEFT)\n",
        "        self.play(\n",
        "            FadeOut(title),\n",
        "            FadeIn(gen_words),\n",
        "            FadeIn(box)\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(\n",
        "            FadeOut(box),\n",
        "            FadeOut(gen_words),\n",
        "            FadeIn(title),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Add last point\n",
        "        self.play(rects[2].animate.stretch(0, 0, about_edge=RIGHT))\n",
        "        self.remove(rects[2])\n",
        "        self.wait(2)\n",
        "\n",
        "\n",
        "class VariableSum(InteractiveScene):\n",
        "    def construct(self):\n",
        "        expr = Tex(R\"X_1 + X_2 + \\cdots + X_n\")\n",
        "        for c in \"12n\":\n",
        "            expr[\"X_\" + c].set_color(BLUE)\n",
        "        self.add(expr)\n",
        "\n",
        "\n",
        "class AssumingNormality(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Setup\n",
        "        randy = Randolph().to_corner(DL)\n",
        "        morty = Mortimer().to_corner(DR)\n",
        "\n",
        "        randy.shift(2 * RIGHT)\n",
        "        thought = ThoughtBubble(height=2, width=3, direction=RIGHT)\n",
        "        thought.pin_to(randy)\n",
        "        curve = FunctionGraph(lambda x: 5 * gauss_func(x, 0, 1), x_range=(-3, 3, 0.1))\n",
        "        curve.set_stroke(YELLOW, 3)\n",
        "        curve.scale(0.35)\n",
        "        curve.move_to(thought.get_bubble_center() + 0.15 * UL)\n",
        "\n",
        "        self.add(FullScreenRectangle().set_fill(GREY_E, 0.5))\n",
        "        self.add(randy, morty)\n",
        "        self.add(thought, curve)\n",
        "\n",
        "        # Words\n",
        "        self.play(\n",
        "            randy.says(\n",
        "                TexText(\n",
        "                    R\"\"\"\n",
        "                    It's a $3\\sigma$ event, \\\\\n",
        "                    so $p < 0.003$\n",
        "                    \"\"\",\n",
        "                    t2c={R\"\\sigma\": RED}\n",
        "                ),\n",
        "                look_at=morty.eyes,\n",
        "                mode=\"tease\"\n",
        "            ),\n",
        "            morty.change(\"hesitant\", randy.eyes)\n",
        "        )\n",
        "        self.play(Blink(morty))\n",
        "        self.wait()\n",
        "        self.play(Blink(randy))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            morty.says(\"Is it though?\", look_at=randy.eyes, mode=\"sassy\"),\n",
        "            randy.change(\"guilty\", morty.eyes)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(Blink(randy))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class FiniteExpectations(InteractiveScene):\n",
        "    def construct(self):\n",
        "        tex = TexText(R\"And finite $E[X]$ for that matter\", t2c={\"X\": BLUE})\n",
        "        self.add(tex)\n",
        "\n",
        "\n",
        "class EndScreen(PatreonEndScreen):\n",
        "    scroll_time = 30\n"
    ]
}