{
    "topic": "demonstrates the surface area of a sphere using Manim animation.",
    "code": [
        "from manim_imports_ext import *\n",
        "from _2018.sphere_area import *\n",
        "\n",
        "\n",
        "class MadAtMathologer(PiCreatureScene):\n",
        "    def create_pi_creature(self):\n",
        "        return Mortimer().to_corner(DR)\n",
        "\n",
        "    def construct(self):\n",
        "        morty = self.pi_creature\n",
        "        self.play(morty.change, \"angry\")\n",
        "        self.wait(3)\n",
        "        self.play(morty.change, \"heistant\")\n",
        "        self.wait(2)\n",
        "        self.play(morty.change, \"shruggie\")\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class JustTheIntegral(Scene):\n",
        "    def construct(self):\n",
        "        tex = OldTex(\"\\\\int_0^{\\\\pi / 2} \\\\cos(\\\\theta)d\\\\theta\")\n",
        "        tex.scale(2)\n",
        "        self.add(tex)\n",
        "\n",
        "\n",
        "class SphereVideoWrapper(Scene):\n",
        "    def construct(self):\n",
        "        title = OldTexText(\"Surface area of a sphere\")\n",
        "        title.scale(1.5)\n",
        "        title.to_edge(UP)\n",
        "        rect = ScreenRectangle(height=6)\n",
        "        rect.next_to(title, DOWN)\n",
        "        self.add(title)\n",
        "        self.play(ShowCreation(rect))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class SphereRings(SecondProof):\n",
        "    CONFIG = {\n",
        "        \"sphere_config\": {\n",
        "            \"resolution\": (60, 60),\n",
        "        },\n",
        "    }\n",
        "\n",
        "    def construct(self):\n",
        "        self.setup_shapes()\n",
        "        self.grow_rings()\n",
        "        self.show_one_ring()\n",
        "        self.show_radial_line()\n",
        "        self.show_thickness()\n",
        "        self.flash_through_rings()\n",
        "\n",
        "    def grow_rings(self):\n",
        "        sphere = self.sphere\n",
        "        rings = self.rings\n",
        "        north_rings = rings[:len(rings) // 2]\n",
        "        sphere.set_fill(opacity=0)\n",
        "        sphere.set_stroke(WHITE, 0.5, opacity=0.5)\n",
        "        southern_mesh = VGroup(*[\n",
        "            face.copy() for face in sphere\n",
        "            if face.get_center()[2] < 0\n",
        "        ])\n",
        "        southern_mesh.set_stroke(WHITE, 0.1, 0.5)\n",
        "\n",
        "        self.play(Write(sphere))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeOut(sphere),\n",
        "            FadeIn(southern_mesh),\n",
        "            FadeIn(north_rings),\n",
        "        )\n",
        "        self.wait(4)\n",
        "\n",
        "        self.north_rings = north_rings\n",
        "        self.southern_mesh = southern_mesh\n",
        "\n",
        "    def show_one_ring(self):\n",
        "        north_rings = self.north_rings\n",
        "        index = len(north_rings) // 2\n",
        "        ring = north_rings[index]\n",
        "        to_fade = VGroup(*[\n",
        "            nr for nr in north_rings\n",
        "            if nr is not ring\n",
        "        ])\n",
        "\n",
        "        north_rings.save_state()\n",
        "\n",
        "        circle = Circle()\n",
        "        circle.set_stroke(PINK, 5)\n",
        "        circle.set_width(ring.get_width())\n",
        "        circle.move_to(ring, IN)\n",
        "\n",
        "        thickness = ring.get_depth() * np.sqrt(2)\n",
        "        brace = Brace(Line(ORIGIN, 0.2 * RIGHT), UP)\n",
        "        brace.set_width(thickness)\n",
        "        brace.rotate(90 * DEGREES, RIGHT)\n",
        "        brace.rotate(45 * DEGREES, UP)\n",
        "        brace.move_to(1.5 * (RIGHT + OUT))\n",
        "        brace.set_stroke(WHITE, 1)\n",
        "        word = OldTexText(\"Thickness\")\n",
        "        word.rotate(90 * DEGREES, RIGHT)\n",
        "        word.next_to(brace, RIGHT + OUT, buff=0)\n",
        "\n",
        "        self.play(\n",
        "            to_fade.set_fill, {\"opacity\": 0.2},\n",
        "            to_fade.set_stroke, {\"opacity\": 0.0},\n",
        "        )\n",
        "        self.move_camera(\n",
        "            phi=0, theta=-90 * DEGREES,\n",
        "            run_time=2,\n",
        "        )\n",
        "        self.stop_ambient_camera_rotation()\n",
        "        self.play(ShowCreation(circle))\n",
        "        self.play(FadeOut(circle))\n",
        "        self.move_camera(\n",
        "            phi=70 * DEGREES,\n",
        "            theta=-100 * DEGREES,\n",
        "            run_time=2,\n",
        "        )\n",
        "        self.begin_ambient_camera_rotation(0.02)\n",
        "        self.play(\n",
        "            GrowFromCenter(brace),\n",
        "            Write(word),\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(FadeOut(VGroup(brace, word)))\n",
        "\n",
        "        self.circum_circle = circle\n",
        "        self.thickness_label = VGroup(brace, word)\n",
        "        self.ring = ring\n",
        "\n",
        "    def show_radial_line(self):\n",
        "        ring = self.ring\n",
        "\n",
        "        point = ring.get_corner(RIGHT + IN)\n",
        "        R_line = Line(ORIGIN, point)\n",
        "        xy_line = Line(ORIGIN, self.sphere.get_right())\n",
        "        theta = np.arccos(np.dot(\n",
        "            normalize(R_line.get_vector()),\n",
        "            normalize(xy_line.get_vector())\n",
        "        ))\n",
        "        arc = Arc(angle=theta, radius=0.5)\n",
        "        arc.rotate(90 * DEGREES, RIGHT, about_point=ORIGIN)\n",
        "\n",
        "        theta = OldTex(\"\\\\theta\")\n",
        "        theta.rotate(90 * DEGREES, RIGHT)\n",
        "        theta.next_to(arc, RIGHT)\n",
        "        theta.shift(SMALL_BUFF * (LEFT + OUT))\n",
        "\n",
        "        R_label = OldTex(\"R\")\n",
        "        R_label.rotate(90 * DEGREES, RIGHT)\n",
        "        R_label.next_to(\n",
        "            R_line.get_center(), OUT + LEFT,\n",
        "            buff=SMALL_BUFF\n",
        "        )\n",
        "        VGroup(R_label, R_line).set_color(YELLOW)\n",
        "\n",
        "        z_axis_point = np.array(point)\n",
        "        z_axis_point[:2] = 0\n",
        "        r_line = DashedLine(z_axis_point, point)\n",
        "        r_line.set_color(RED)\n",
        "        r_label = OldTex(\"R\\\\cos(\\\\theta)\")\n",
        "        r_label.rotate(90 * DEGREES, RIGHT)\n",
        "        r_label.scale(0.7)\n",
        "        r_label.match_color(r_line)\n",
        "        r_label.set_stroke(width=0, background=True)\n",
        "        r_label.next_to(r_line, OUT, 0.5 * SMALL_BUFF)\n",
        "\n",
        "        VGroup(\n",
        "            R_label, xy_line, arc, R_label,\n",
        "            r_line, r_label,\n",
        "        ).set_shade_in_3d(True)\n",
        "\n",
        "        # self.stop_ambient_camera_rotation()\n",
        "        self.move_camera(\n",
        "            phi=85 * DEGREES,\n",
        "            theta=-100 * DEGREES,\n",
        "            added_anims=[\n",
        "                ring.set_fill, {\"opacity\": 0.5},\n",
        "                ring.set_stroke, {\"opacity\": 0.1},\n",
        "                ShowCreation(R_line),\n",
        "                FadeIn(R_label, IN),\n",
        "            ]\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(xy_line),\n",
        "            ShowCreation(arc),\n",
        "            Write(theta),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            ShowCreation(r_line),\n",
        "            FadeIn(r_label, IN),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.move_camera(\n",
        "            phi=70 * DEGREES,\n",
        "            theta=-110 * DEGREES,\n",
        "            run_time=3\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "    def show_thickness(self):\n",
        "        brace, word = self.thickness_label\n",
        "        R_dtheta = OldTex(\"R \\\\, d\\\\theta\")\n",
        "        R_dtheta.rotate(90 * DEGREES, RIGHT)\n",
        "        R_dtheta.move_to(word, LEFT)\n",
        "\n",
        "        self.play(\n",
        "            GrowFromCenter(brace),\n",
        "            Write(R_dtheta)\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "    def flash_through_rings(self):\n",
        "        rings = self.north_rings.copy()\n",
        "        rings.fade(1)\n",
        "        rings.sort(lambda p: p[2])\n",
        "\n",
        "        for x in range(8):\n",
        "            self.play(LaggedStartMap(\n",
        "                ApplyMethod, rings,\n",
        "                lambda m: (m.set_fill, PINK, 0.5),\n",
        "                rate_func=there_and_back,\n",
        "                lag_ratio=0.1,\n",
        "                run_time=2,\n",
        "            ))\n",
        "\n",
        "\n",
        "class IntegralSymbols(Scene):\n",
        "    def construct(self):\n",
        "        int_sign = OldTex(\"\\\\displaystyle \\\\int\")\n",
        "        int_sign.set_height(1.5)\n",
        "        int_sign.move_to(5 * LEFT)\n",
        "\n",
        "        circumference, times, thickness = ctt = OldTexText(\n",
        "            \"circumference\", \"$\\\\times$\", \"thickness\"\n",
        "        )\n",
        "        circumference.set_color(MAROON_B)\n",
        "        ctt.next_to(int_sign, RIGHT, SMALL_BUFF)\n",
        "        area_brace = Brace(ctt, DOWN)\n",
        "        area_text = area_brace.get_text(\"Area of a ring\")\n",
        "\n",
        "        all_rings = OldTexText(\"All rings\")\n",
        "        all_rings.scale(0.5)\n",
        "        all_rings.next_to(int_sign, DOWN, SMALL_BUFF)\n",
        "        all_rings.shift(SMALL_BUFF * LEFT)\n",
        "\n",
        "        circum_formula = OldTex(\n",
        "            \"2\\\\pi\", \"R\\\\cos(\\\\theta)\",\n",
        "        )\n",
        "        circum_formula[1].set_color(RED)\n",
        "        circum_formula.move_to(circumference)\n",
        "        circum_brace = Brace(circum_formula, UP)\n",
        "\n",
        "        R_dtheta = OldTex(\"R \\\\, d\\\\theta\")\n",
        "        R_dtheta.move_to(thickness, LEFT)\n",
        "        R_dtheta_brace = Brace(R_dtheta, UP)\n",
        "\n",
        "        zero, pi_halves = bounds = OldTex(\"0\", \"\\\\pi / 2\")\n",
        "        bounds.scale(0.5)\n",
        "        zero.move_to(all_rings)\n",
        "        pi_halves.next_to(int_sign, UP, SMALL_BUFF)\n",
        "        pi_halves.shift(SMALL_BUFF * RIGHT)\n",
        "\n",
        "        self.add(int_sign)\n",
        "        self.play(\n",
        "            GrowFromCenter(area_brace),\n",
        "            FadeIn(area_text, UP),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(FadeInFromDown(circumference))\n",
        "        self.play(\n",
        "            FadeInFromDown(thickness),\n",
        "            Write(times)\n",
        "        )\n",
        "        self.play(Write(all_rings))\n",
        "        self.wait()\n",
        "\n",
        "        self.play(\n",
        "            circumference.next_to, circum_brace, UP, MED_SMALL_BUFF,\n",
        "            circumference.shift, SMALL_BUFF * UR,\n",
        "            GrowFromCenter(circum_brace),\n",
        "        )\n",
        "        self.play(FadeIn(circum_formula, UP))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            thickness.next_to, circumference, RIGHT, MED_SMALL_BUFF,\n",
        "            GrowFromCenter(R_dtheta_brace),\n",
        "            area_brace.stretch, 0.84, 0, {\"about_edge\": LEFT},\n",
        "            MaintainPositionRelativeTo(area_text, area_brace),\n",
        "        )\n",
        "        self.play(FadeIn(R_dtheta, UP))\n",
        "        self.wait()\n",
        "        self.play(ReplacementTransform(all_rings, bounds))\n",
        "        self.wait()\n",
        "\n",
        "        # RHS\n",
        "        rhs = OldTex(\n",
        "            \"\\\\displaystyle =\", \"2\\\\pi R^2\", \"\\\\int_0^{\\\\pi / 2}\",\n",
        "            \"\\\\cos(\\\\theta)\", \"d\\\\theta\",\n",
        "        )\n",
        "        rhs.set_color_by_tex(\"cos\", RED)\n",
        "        rhs.next_to(R_dtheta, RIGHT)\n",
        "        int_brace = Brace(rhs[2:], DOWN)\n",
        "        q_marks = int_brace.get_text(\"???\")\n",
        "        one = OldTex(\"1\")\n",
        "        one.move_to(q_marks)\n",
        "\n",
        "        self.play(FadeIn(rhs, 4 * LEFT))\n",
        "        self.wait()\n",
        "        self.play(ShowCreationThenFadeAround(rhs[1]))\n",
        "        self.wait()\n",
        "        self.play(ShowCreationThenFadeAround(rhs[2:]))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            GrowFromCenter(int_brace),\n",
        "            LaggedStartMap(\n",
        "                FadeInFrom, q_marks,\n",
        "                lambda m: (m, UP),\n",
        "            )\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(ReplacementTransform(q_marks, one))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class ShamelessPlug(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.student_says(\n",
        "            \"But why $4\\\\pi R^2$?\",\n",
        "            target_mode=\"maybe\"\n",
        "        )\n",
        "        self.play_student_changes(\n",
        "            \"erm\", \"maybe\", \"happy\",\n",
        "            added_anims=[self.teacher.change, \"happy\"]\n",
        "        )\n",
        "        self.wait(3)\n"
    ]
}