{
    "topic": "The mathematical concept being demonstrated is Bayes' theorem and its application to a disease example.",
    "code": [
        "from manim_imports_ext import *\n",
        "\n",
        "from _2018.eop.bayes import IntroducePokerHand\n",
        "\n",
        "SICKLY_GREEN = \"#9BBD37\"\n",
        "\n",
        "\n",
        "class BayesClassicExampleOpeningQuote(OpeningQuote):\n",
        "    CONFIG = {\n",
        "        \"quote\" : [\n",
        "            \"When faced with a difficult question, we often \" \\\n",
        "            \"answer an easier one instead, usually without \" \\\n",
        "            \"noticing the substitution.\",\n",
        "        ],\n",
        "        \"author\" : \"Daniel Kahneman\",\n",
        "    }\n",
        "\n",
        "class Introduction(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.hold_up_example()\n",
        "        self.write_counter_intuitive()\n",
        "        self.comment_on_crazy_results()\n",
        "        self.put_it_first()\n",
        "        self.swap_example_order()\n",
        "        self.other_culprit()\n",
        "\n",
        "    def hold_up_example(self):\n",
        "        everyone = self.get_pi_creatures()\n",
        "        self.teacher.change_mode(\"raise_right_hand\")\n",
        "        rect = ScreenRectangle()\n",
        "        rect.set_stroke(YELLOW, 2)\n",
        "        rect.to_edge(UP)\n",
        "        randy = Randolph()\n",
        "        randy.scale(0.7)\n",
        "        name = OldTexText(r\"\"\"\n",
        "            Bayes' theorem \\\\\n",
        "            disease example\n",
        "        \"\"\")\n",
        "        name.next_to(rect.get_top(), DOWN, SMALL_BUFF)\n",
        "        randy.next_to(name, DOWN)\n",
        "        example = VGroup(rect, name, randy)\n",
        "\n",
        "        self.remove(everyone)\n",
        "        self.add(name, randy)\n",
        "        self.play(\n",
        "            randy.change_mode, \"sick\",\n",
        "            randy.set_color, SICKLY_GREEN\n",
        "        )\n",
        "        self.play(ShowCreation(rect))\n",
        "        self.play(\n",
        "            FadeIn(everyone),\n",
        "            example.scale, 0.5,\n",
        "            example.next_to, self.teacher.get_corner(UP+LEFT), UP,\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "        self.example = example\n",
        "\n",
        "    def write_counter_intuitive(self):\n",
        "        bayes = OldTexText(\"Bayes\")\n",
        "        arrow = OldTex(\"\\\\leftrightarrow\")\n",
        "        intuition = OldTexText(\"Intuition\")\n",
        "\n",
        "        group = VGroup(bayes, arrow, intuition)\n",
        "        group.arrange(RIGHT, buff = SMALL_BUFF)\n",
        "        group.scale(0.8)\n",
        "        group.next_to(self.example, UP, buff = SMALL_BUFF)\n",
        "        group.shift_onto_screen()\n",
        "        cross = VGroup(\n",
        "            Line(UP+LEFT, DOWN+RIGHT),\n",
        "            Line(UP+RIGHT, DOWN+LEFT),\n",
        "        )\n",
        "        cross.replace(arrow, stretch = True)\n",
        "        cross.set_stroke(RED, 6)\n",
        "        group.add(cross)\n",
        "\n",
        "        self.play(*list(map(FadeIn, [bayes, intuition])))\n",
        "        self.play(Write(arrow))\n",
        "        self.play(ShowCreation(cross))\n",
        "        self.play_student_changes(*[\"confused\"]*3)\n",
        "        self.wait(2)\n",
        "\n",
        "        self.bayes_to_intuition = group\n",
        "\n",
        "    def comment_on_crazy_results(self):\n",
        "        disease_group = VGroup(self.example, self.bayes_to_intuition)\n",
        "        disease_group.save_state()\n",
        "\n",
        "        self.teacher_says(\n",
        "            \"Who doesn't love \\\\\\\\ crazy results?\",\n",
        "            target_mode = \"hooray\",\n",
        "            added_anims = [disease_group.to_corner, UP+LEFT]\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "        self.disease_group = disease_group\n",
        "\n",
        "    def put_it_first(self):\n",
        "        poker_example = self.get_poker_example()\n",
        "        music_example = self.get_music_example()\n",
        "        disease_group = self.disease_group\n",
        "\n",
        "        self.play(\n",
        "            disease_group.restore,\n",
        "            disease_group.to_edge, LEFT,\n",
        "            RemovePiCreatureBubble(\n",
        "                self.teacher,\n",
        "                target_mode = \"hesitant\"\n",
        "            )\n",
        "        )\n",
        "        self.play_student_changes(\n",
        "            *[\"pondering\"]*3, \n",
        "            look_at = disease_group\n",
        "        )\n",
        "\n",
        "        poker_example.next_to(self.example, RIGHT)\n",
        "        music_example.next_to(poker_example, RIGHT)\n",
        "        examples = VGroup(poker_example, music_example)\n",
        "        brace = Brace(examples, UP)\n",
        "        bayes_to_intuition = VGroup(*list(map(TexText, [\n",
        "            \"Bayes\", \"$\\\\leftrightarrow$\", \"Intuition\"\n",
        "        ])))\n",
        "        bayes_to_intuition.arrange(RIGHT, buff = SMALL_BUFF)\n",
        "        bayes_to_intuition.next_to(brace, UP, SMALL_BUFF)\n",
        "        check = OldTex(\"\\\\checkmark\")\n",
        "        check.set_color(GREEN)\n",
        "        check.next_to(bayes_to_intuition[1], UP, SMALL_BUFF)\n",
        "\n",
        "        for example in examples:\n",
        "            self.play(FadeIn(example))\n",
        "            self.wait()\n",
        "        self.play(GrowFromCenter(brace))\n",
        "        self.play(FadeIn(bayes_to_intuition))\n",
        "        self.play(Write(check))\n",
        "        self.wait(2)\n",
        "\n",
        "        self.intuitive_examples = VGroup(\n",
        "            examples, brace, bayes_to_intuition, check\n",
        "        )\n",
        "\n",
        "    def swap_example_order(self):\n",
        "        intuitive_examples = self.intuitive_examples\n",
        "        disease_group = VGroup(\n",
        "            self.example, self.bayes_to_intuition\n",
        "        )\n",
        "\n",
        "        self.play(\n",
        "            disease_group.next_to, \n",
        "                self.teacher.get_corner(UP+LEFT), UP,\n",
        "            disease_group.shift, LEFT,\n",
        "            intuitive_examples.scale, 0.7,\n",
        "            intuitive_examples.to_corner, UP+LEFT,\n",
        "            self.teacher.change_mode, \"sassy\"\n",
        "        )\n",
        "\n",
        "    def other_culprit(self):\n",
        "        bayes = self.bayes_to_intuition[0]\n",
        "        something_else = OldTexText(\"Something else\")\n",
        "        something_else.set_color(YELLOW)\n",
        "        something_else.set_height(bayes.get_height())\n",
        "        something_else.move_to(bayes, RIGHT)\n",
        "        new_group = VGroup(\n",
        "            something_else, \n",
        "            *self.bayes_to_intuition[1:]\n",
        "        )\n",
        "\n",
        "        self.play(bayes.to_edge, UP)\n",
        "        self.play(Write(something_else))\n",
        "        self.play(new_group.next_to, self.example, UP, SMALL_BUFF)\n",
        "        self.play_student_changes(\n",
        "            \"erm\", \"confused\", \"hesitant\",\n",
        "            added_anims = [self.teacher.change_mode, \"happy\"]\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "    #####\n",
        "\n",
        "    def get_poker_example(self):\n",
        "        rect = self.get_example_rect()\n",
        "        values = IntroducePokerHand.CONFIG[\"community_card_values\"]\n",
        "        community_cards = VGroup(*list(map(PlayingCard, values)))\n",
        "        community_cards.arrange(RIGHT)\n",
        "        deck = VGroup(*[\n",
        "            PlayingCard(turned_over = True)\n",
        "            for x in range(5)\n",
        "        ])\n",
        "        for i, card in enumerate(deck):\n",
        "            card.shift(i*(0.03*RIGHT + 0.015*DOWN))\n",
        "        deck.next_to(community_cards, LEFT)\n",
        "        cards = VGroup(deck, community_cards)\n",
        "        cards.set_width(rect.get_width() - 2*SMALL_BUFF)\n",
        "        cards.next_to(rect.get_bottom(), UP, MED_SMALL_BUFF)\n",
        "\n",
        "        probability = OldTex(\n",
        "            \"P(\", \"\\\\text{Flush}\", \"|\", \"\\\\text{High bet}\", \")\"\n",
        "        )\n",
        "        probability.set_color_by_tex(\"Flush\", RED)\n",
        "        probability.set_color_by_tex(\"High bet\", GREEN)\n",
        "        probability.scale(0.5)\n",
        "        probability.next_to(rect.get_top(), DOWN)\n",
        "\n",
        "        return VGroup(rect, probability, cards)\n",
        "\n",
        "    def get_music_example(self):\n",
        "        rect = self.get_example_rect()\n",
        "\n",
        "        musician = Randolph(mode = \"soulful_musician\")\n",
        "        musician.left_arm_range = [.36, .45]\n",
        "        musician.arms = musician.get_arm_copies()\n",
        "        guitar = musician.guitar = Guitar()\n",
        "        guitar.move_to(musician)\n",
        "        guitar.shift(0.31*RIGHT + 0.6*UP)\n",
        "        musician.add(guitar, musician.arms)\n",
        "        musician.set_height(0.7*rect.get_height())\n",
        "        musician.next_to(rect.get_bottom(), UP, SMALL_BUFF)\n",
        "\n",
        "        probability = OldTex(\n",
        "            \"P(\", \"\\\\text{Suck }\", \"|\", \"\\\\text{ Good review}\", \")\"\n",
        "        )\n",
        "        probability.set_color_by_tex(\"Suck\", RED)\n",
        "        probability.set_color_by_tex(\"Good\", GREEN)\n",
        "        probability.scale(0.5)\n",
        "        probability.next_to(rect.get_top(), DOWN)\n",
        "\n",
        "        return VGroup(rect, musician, probability)\n",
        "\n",
        "    def get_example_rect(self):\n",
        "        rect = self.example[0].copy()\n",
        "        rect.set_color(WHITE)\n",
        "        return rect\n",
        "\n",
        "class OneInOneThousandHaveDisease(Scene):\n",
        "    def construct(self):\n",
        "        title = OldTexText(\"1 in 1{,}000\")\n",
        "        title.to_edge(UP)\n",
        "        creature = PiCreature()\n",
        "        all_creatures = VGroup(*[\n",
        "            VGroup(*[\n",
        "                creature.copy()\n",
        "                for y in range(25)\n",
        "            ]).arrange(DOWN, SMALL_BUFF)\n",
        "            for x in range(40)\n",
        "        ]).arrange(RIGHT, SMALL_BUFF)\n",
        "        all_creatures.set_width(FRAME_WIDTH - 4)\n",
        "        all_creatures.next_to(title, DOWN)\n",
        "        randy = all_creatures[0][0]\n",
        "        all_creatures[0].remove(randy)\n",
        "        randy.change_mode(\"sick\")\n",
        "        randy.set_color(SICKLY_GREEN)\n",
        "        randy.save_state()\n",
        "        randy.set_height(3)\n",
        "        randy.center()\n",
        "        randy.change_mode(\"plain\")\n",
        "        randy.set_color(BLUE)\n",
        "\n",
        "        self.add(randy)\n",
        "        self.play(\n",
        "            randy.change_mode, \"sick\",\n",
        "            randy.set_color, SICKLY_GREEN\n",
        "        )\n",
        "        self.play(Blink(randy))\n",
        "        self.play(randy.restore)\n",
        "        self.play(\n",
        "            Write(title),\n",
        "            LaggedStartMap(FadeIn, all_creatures, run_time = 3)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "class TestScene(PiCreatureScene):\n",
        "    def get_result(self, creature, word, color):\n",
        "        arrow = self.get_test_arrow()\n",
        "        test_result = OldTexText(word)\n",
        "        test_result.set_color(color)\n",
        "        test_result.next_to(arrow.get_end(), RIGHT)\n",
        "        group = VGroup(arrow, test_result)\n",
        "        group.next_to(creature, RIGHT, aligned_edge = UP)\n",
        "        return group\n",
        "\n",
        "    def get_positive_result(self, creature):\n",
        "        return self.get_result(creature, \"Diseased\", SICKLY_GREEN)\n",
        "\n",
        "    def get_negative_result(self, creature):\n",
        "        return self.get_result(creature, \"Healthy\", GREEN)\n",
        "\n",
        "    def get_test_arrow(self):\n",
        "        arrow = Arrow(\n",
        "            LEFT, RIGHT, \n",
        "            color = WHITE,\n",
        "        )\n",
        "        word = OldTexText(\"Test\")\n",
        "        word.scale(0.8)\n",
        "        word.next_to(arrow, UP, buff = 0)\n",
        "        arrow.add(word)\n",
        "        return arrow\n",
        "\n",
        "    def create_pi_creature(self):\n",
        "        randy = Randolph()\n",
        "        randy.next_to(ORIGIN, LEFT)\n",
        "        return randy\n",
        "\n",
        "class TestDiseaseCase(TestScene):\n",
        "    def construct(self):\n",
        "        randy = self.pi_creature\n",
        "        randy.change_mode(\"sick\")\n",
        "        randy.set_color(SICKLY_GREEN)\n",
        "        result = self.get_positive_result(randy)\n",
        "        accuracy = OldTexText(\"100\\\\% Accuracy\")\n",
        "        accuracy.next_to(VGroup(randy, result), UP)\n",
        "        accuracy.to_edge(UP)\n",
        "\n",
        "        self.add(randy)\n",
        "        self.play(FadeIn(result[0]))\n",
        "        self.play(Write(result[1]))\n",
        "        self.play(FadeIn(accuracy))\n",
        "        self.wait()\n",
        "\n",
        "class TestNonDiseaseCase(TestScene):\n",
        "    def construct(self):\n",
        "        randy = self.pi_creature\n",
        "        randy.change_mode(\"happy\")\n",
        "        randy.next_to(ORIGIN, LEFT)\n",
        "        result = self.get_negative_result(randy)\n",
        "        accuracy = OldTexText(\"99\\\\% Accuracy\")\n",
        "        accuracy.next_to(VGroup(randy, result), UP)\n",
        "        accuracy.to_edge(UP)\n",
        "\n",
        "        all_creatures = VGroup(*[\n",
        "            VGroup(*[\n",
        "                randy.copy()\n",
        "                for y in range(10)\n",
        "            ]).arrange(DOWN)\n",
        "            for y in range(10)\n",
        "        ]).arrange(RIGHT)\n",
        "        all_creatures.set_height(6)\n",
        "        all_creatures.to_corner(DOWN+LEFT)\n",
        "        last_guy = all_creatures[-1][-1]\n",
        "        rect = SurroundingRectangle(last_guy, buff = 0)\n",
        "        rect.set_color(YELLOW)\n",
        "\n",
        "        self.add(randy, accuracy)\n",
        "        self.play(FadeIn(result[0]))\n",
        "        self.play(Write(result[1]))\n",
        "        self.play(Blink(randy))\n",
        "        self.play(\n",
        "            ReplacementTransform(randy, all_creatures[0][0]),\n",
        "            LaggedStartMap(FadeIn, all_creatures, run_time = 2),\n",
        "            FadeOut(result)\n",
        "        )\n",
        "        self.play(ShowCreation(rect))\n",
        "        self.play(\n",
        "            last_guy.set_height, 2,\n",
        "            last_guy.next_to, all_creatures, RIGHT\n",
        "        )\n",
        "        result = self.get_positive_result(last_guy)\n",
        "        false_positive = OldTexText(\"False positive\")\n",
        "        false_positive.scale(0.8)\n",
        "        false_positive.next_to(result, UP, LARGE_BUFF)\n",
        "        false_positive.to_edge(RIGHT)\n",
        "        arrow = Arrow(\n",
        "            false_positive.get_bottom(), result[1].get_top(),\n",
        "            buff = SMALL_BUFF\n",
        "        )\n",
        "        self.play(FadeIn(result))\n",
        "        self.play(\n",
        "            FadeIn(false_positive),\n",
        "            ShowCreation(arrow),\n",
        "            last_guy.change, \"confused\", result,\n",
        "        )\n",
        "        for x in range(2):\n",
        "            self.play(Blink(last_guy))\n",
        "            self.wait(2)\n",
        "\n",
        "class ReceivePositiveResults(TestScene):\n",
        "    def construct(self):\n",
        "        status = OldTexText(\"Health status: ???\")\n",
        "        status.to_edge(UP)\n",
        "\n",
        "        randy = self.pi_creature\n",
        "        result = self.get_positive_result(randy)\n",
        "        accuracy = OldTexText(\"99\\% Accuracy\")\n",
        "        accuracy.next_to(result[1], DOWN, LARGE_BUFF)\n",
        "        accuracy.set_color(YELLOW)\n",
        "\n",
        "        self.add(status, randy)\n",
        "        self.play(FadeIn(result[0]))\n",
        "        self.wait()\n",
        "        self.play(Write(result[1]))\n",
        "        self.play(randy.change, \"maybe\", result)\n",
        "        self.wait(2)\n",
        "        self.play(\n",
        "            randy.change, \"pleading\", accuracy,\n",
        "            Write(accuracy, run_time = 1)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(randy.change, \"sad\", accuracy)\n",
        "        self.wait(2)\n",
        "\n",
        "class AskAboutRephrasingQuestion(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.teacher_says(\n",
        "            \"What if we rephrased \\\\\\\\ the question?\",\n",
        "            run_time = 1\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "class RephraseQuestion(Scene):\n",
        "    def construct(self):\n",
        "        words = VGroup(*list(map(TexText, [\n",
        "            r\"1 in $1{,000}$ chance \\\\ of having disease\",\n",
        "            r\"1 in $100$ \\\\ false positive rate.\",\n",
        "            r\"\"\"\\underline{\\phantom{1 in 10}} chance \\\\\n",
        "                of having disease \\\\\n",
        "                after testing positive.\n",
        "            \"\"\",\n",
        "        ])))\n",
        "        words.arrange(RIGHT, buff = LARGE_BUFF)\n",
        "        words.set_width(2*(FRAME_X_RADIUS - MED_LARGE_BUFF))\n",
        "\n",
        "        prior = OldTexText(\"Prior\")\n",
        "        prior.set_color(GREEN)\n",
        "        prior.next_to(words[0], UP, 1.5*LARGE_BUFF)\n",
        "        prior_arrow = Arrow(prior, words[0])\n",
        "        prior_arrow.set_color(prior.get_color())\n",
        "\n",
        "        posterior = OldTexText(\"Posterior\")\n",
        "        posterior.next_to(words[2], UP)\n",
        "        posterior.shift(\n",
        "            (prior.get_center() - posterior.get_center())[1]*UP\n",
        "        )\n",
        "        posterior.set_color(YELLOW)\n",
        "        posterior_arrow = Arrow(posterior, words[2])\n",
        "        posterior_arrow.set_color(posterior.get_color())\n",
        "\n",
        "        self.add(words[0])\n",
        "        self.play(\n",
        "            LaggedStartMap(FadeIn, prior),\n",
        "            ShowCreation(prior_arrow),\n",
        "            run_time = 1\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(FadeIn(words[1]))\n",
        "        self.wait()\n",
        "        self.play(FadeIn(words[2]))\n",
        "        self.play(\n",
        "            LaggedStartMap(FadeIn, posterior),\n",
        "            ShowCreation(posterior_arrow),\n",
        "            run_time = 1\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "class TryUnitSquareVisual(SampleSpaceScene):\n",
        "    def construct(self):\n",
        "        sample_space = self.get_sample_space()\n",
        "        self.add_prior_division()\n",
        "        self.add(sample_space)\n",
        "        self.add_conditional_divisions()\n",
        "        prior_label = sample_space.horizontal_parts.labels[0]\n",
        "        final_labels = self.final_labels\n",
        "\n",
        "        hard_to_see = OldTexText(\"Hard to see\")\n",
        "        hard_to_see.scale(0.7)\n",
        "        hard_to_see.next_to(prior_label, UP)\n",
        "        hard_to_see.to_edge(UP)\n",
        "        hard_to_see.set_color(YELLOW)\n",
        "        arrow = Arrow(hard_to_see, prior_label)\n",
        "\n",
        "        self.wait()\n",
        "        anims = self.get_division_change_animations(\n",
        "            sample_space, sample_space.horizontal_parts,\n",
        "            0.001, new_label_kwargs = {\"labels\" : final_labels}\n",
        "        )\n",
        "        self.play(*anims, run_time = 2)\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            Write(hard_to_see, run_time = 2),\n",
        "            ShowCreation(arrow)\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "    def add_prior_division(self):\n",
        "        sample_space = self.sample_space\n",
        "        sample_space.divide_horizontally(0.1)\n",
        "        initial_labels, final_labels = [\n",
        "            VGroup(\n",
        "                OldTex(\"P(\\\\text{Disease})\", s1),\n",
        "                OldTex(\"P(\\\\text{Not disease})\", s2),\n",
        "            ).scale(0.7)\n",
        "            for s1, s2 in ((\"\", \"\"), (\"= 0.001\", \"= 0.999\"))\n",
        "        ]\n",
        "        sample_space.get_side_braces_and_labels(initial_labels)\n",
        "        sample_space.add_braces_and_labels()\n",
        "\n",
        "        self.final_labels = final_labels\n",
        "\n",
        "    def add_conditional_divisions(self):\n",
        "        sample_space = self.sample_space\n",
        "        top_part, bottom_part = sample_space.horizontal_parts\n",
        "\n",
        "        top_brace = Brace(top_part, UP)\n",
        "        top_label = OldTex(\n",
        "            \"P(\", \"+\", \"|\", \"\\\\text{Disease}\", \")\", \"=\", \"1\"\n",
        "        )\n",
        "        top_label.scale(0.7)\n",
        "        top_label.next_to(top_brace, UP)\n",
        "        top_label.set_color_by_tex(\"+\", GREEN)\n",
        "\n",
        "        self.play(GrowFromCenter(top_brace))\n",
        "        self.play(FadeIn(top_label))\n",
        "        self.wait()\n",
        "\n",
        "        bottom_part.divide_vertically(\n",
        "            0.95, colors = [BLUE_E, YELLOW_E]\n",
        "        )\n",
        "        bottom_label = OldTex(\n",
        "            \"P(\", \"+\", \"|\", \"\\\\text{Not disease}\", \")\", \"=\", \"1\"\n",
        "        )\n",
        "        bottom_label.scale(0.7)\n",
        "        bottom_label.set_color_by_tex(\"+\", GREEN)\n",
        "        braces, labels = bottom_part.get_bottom_braces_and_labels(\n",
        "            [bottom_label]\n",
        "        )\n",
        "        bottom_brace = braces[0]\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(bottom_part.vertical_parts),\n",
        "            GrowFromCenter(bottom_brace),\n",
        "        )\n",
        "        self.play(FadeIn(bottom_label))\n",
        "        self.wait()\n",
        "\n",
        "class ShowRestrictedSpace(Scene):\n",
        "    CONFIG = {\n",
        "        \"n_rows\" : 25,\n",
        "        \"n_cols\" : 40,\n",
        "        \"n_false_positives\" : 10,\n",
        "        \"false_positive_color\" : YELLOW_E,\n",
        "    }\n",
        "    def construct(self):\n",
        "        self.add_all_creatures()\n",
        "        self.show_accurate_positive_result()\n",
        "        self.show_false_positive_conditional()\n",
        "        self.show_false_positive_individuals()\n",
        "        self.fade_out_negative_result_individuals()\n",
        "        self.show_posterior_probability()\n",
        "        self.contrast_with_prior()\n",
        "\n",
        "    def add_all_creatures(self):\n",
        "        title = OldTexText(\"$1{,}000$ individuals\")\n",
        "        title.to_edge(UP)\n",
        "        all_creatures = self.get_all_creatures()\n",
        "        sick_one = all_creatures.sick_one\n",
        "        healthy_creatures = all_creatures.healthy_creatures\n",
        "\n",
        "        sick_one.save_state()\n",
        "        sick_one_words = OldTexText(\"1 sick\")\n",
        "        sick_one_words.next_to(sick_one, RIGHT)\n",
        "        sick_one_words.to_edge(RIGHT)\n",
        "        sick_one_words.set_color(SICKLY_GREEN)\n",
        "        sick_one_arrow = Arrow(\n",
        "            sick_one_words, sick_one,\n",
        "            color = SICKLY_GREEN\n",
        "        )\n",
        "\n",
        "        healthy_words = OldTexText(\"999 healthy\")\n",
        "        healthy_words.next_to(sick_one_words, UP, MED_LARGE_BUFF)\n",
        "        healthy_words.shift_onto_screen()\n",
        "        healthy_words.set_color(BLUE)\n",
        "\n",
        "        self.add(title)\n",
        "        self.play(LaggedStartMap(FadeIn, all_creatures))\n",
        "        self.play(\n",
        "            FadeIn(sick_one_words),\n",
        "            ShowCreation(sick_one_arrow)\n",
        "        )\n",
        "        self.play(\n",
        "            sick_one.set_height, 2,\n",
        "            sick_one.next_to, sick_one_words, DOWN,\n",
        "            sick_one.to_edge, RIGHT,\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(sick_one.restore)\n",
        "        self.play(\n",
        "            Write(healthy_words),\n",
        "            LaggedStartMap(\n",
        "                ApplyMethod, healthy_creatures,\n",
        "                lambda m : (m.shift, MED_SMALL_BUFF*UP),\n",
        "                rate_func = there_and_back,\n",
        "                lag_ratio = 0.2,\n",
        "            )\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(FadeOut(title))\n",
        "\n",
        "        self.all_creatures = all_creatures\n",
        "        self.healthy_creatures = healthy_creatures\n",
        "        self.sick_one = sick_one\n",
        "        self.sick_one_label = VGroup(sick_one_words, sick_one_arrow)\n",
        "        self.healthy_ones_label = healthy_words\n",
        "\n",
        "    def show_accurate_positive_result(self):\n",
        "        equation = OldTex(\n",
        "            \"P(\", \"\\\\text{Test positive }\", \"|\", \n",
        "            \"\\\\text{ sick}\", \")\", \"=\", \"100\\\\%\"\n",
        "        )\n",
        "        equation.set_color_by_tex(\"positive\", YELLOW)\n",
        "        equation.set_color_by_tex(\"sick\", SICKLY_GREEN)\n",
        "        equation.to_corner(UP+LEFT)\n",
        "\n",
        "        self.play(Write(equation, run_time = 1))\n",
        "        self.wait(2)\n",
        "\n",
        "        self.disease_conditional = equation\n",
        "\n",
        "    def show_false_positive_conditional(self):\n",
        "        equation = OldTex(\n",
        "            \"P(\", \"\\\\text{Test positive }\", \"|\", \n",
        "            \"\\\\text{ healthy}\", \")\", \"=\", \"1\\\\%\"\n",
        "        )\n",
        "        equation.set_color_by_tex(\"positive\", YELLOW)\n",
        "        equation.set_color_by_tex(\"healthy\", BLUE)\n",
        "        equation.to_corner(UP+LEFT)\n",
        "\n",
        "        self.play(ReplacementTransform(\n",
        "            self.disease_conditional, equation\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "        self.healthy_conditional = equation\n",
        "\n",
        "    def show_false_positive_individuals(self):\n",
        "        all_creatures = self.all_creatures\n",
        "        false_positives = VGroup(\n",
        "            *all_creatures[-1][1:1+self.n_false_positives]\n",
        "        )\n",
        "        self.healthy_creatures.remove(*false_positives)\n",
        "        brace = Brace(false_positives, RIGHT)\n",
        "        words = OldTexText(\"10 False positives\")\n",
        "        words.scale(0.8)\n",
        "        words.next_to(brace, RIGHT)\n",
        "\n",
        "        self.play(\n",
        "            GrowFromCenter(brace),\n",
        "            LaggedStartMap(\n",
        "                ApplyMethod, false_positives,\n",
        "                lambda pi : (pi.set_color, self.false_positive_color),\n",
        "                run_time = 1\n",
        "            )\n",
        "        )\n",
        "        self.play(Write(words))\n",
        "        self.wait()\n",
        "\n",
        "        self.false_positives = false_positives\n",
        "        self.false_positives_brace = brace\n",
        "        self.false_positives_words = words\n",
        "\n",
        "    def fade_out_negative_result_individuals(self):\n",
        "        to_fade = VGroup(\n",
        "            self.healthy_creatures,\n",
        "            self.healthy_conditional,\n",
        "            self.sick_one_label,\n",
        "            self.healthy_ones_label,\n",
        "        )\n",
        "        movers = VGroup(self.sick_one, *self.false_positives)\n",
        "        movers.generate_target()\n",
        "        movers.target.set_width(1)\n",
        "        movers.target.arrange(RIGHT)\n",
        "        movers.target.shift(DOWN)\n",
        "        brace = Brace(VGroup(*movers.target[1:]))\n",
        "\n",
        "        words = OldTexText(\"You are one of these\")\n",
        "        words.to_edge(UP)\n",
        "        arrows = [\n",
        "            Arrow(words.get_bottom(), movers.target[i].get_top())\n",
        "            for i in (0, -1)\n",
        "        ]\n",
        "\n",
        "        self.play(FadeOut(to_fade))\n",
        "        self.play(\n",
        "            MoveToTarget(movers),\n",
        "            ReplacementTransform(self.false_positives_brace, brace),\n",
        "            self.false_positives_words.next_to, brace, DOWN\n",
        "        )\n",
        "        self.play(\n",
        "            Write(words, run_time = 2),\n",
        "            ShowCreation(arrows[0])\n",
        "        )\n",
        "        self.play(Transform(\n",
        "            *arrows, run_time = 4, rate_func = there_and_back\n",
        "        ))\n",
        "        self.play(*list(map(FadeOut, [words, arrows[0]])))\n",
        "\n",
        "        self.brace = brace\n",
        "\n",
        "    def show_posterior_probability(self):\n",
        "        posterior = OldTex(\n",
        "            \"P(\", \"\\\\text{Sick }\", \"|\", \n",
        "            \"\\\\text{ Positive test result}\", \")\",\n",
        "            \"\\\\approx \\\\frac{1}{11}\", \"\\\\approx 9\\\\%\"\n",
        "        )\n",
        "        posterior.set_color_by_tex(\"Sick\", SICKLY_GREEN)\n",
        "        posterior.set_color_by_tex(\"Positive\", YELLOW)\n",
        "        posterior.to_edge(UP)\n",
        "        posterior.shift(LEFT)\n",
        "\n",
        "        self.play(FadeIn(posterior))\n",
        "        self.wait(2)\n",
        "\n",
        "        self.posterior = posterior\n",
        "\n",
        "    def contrast_with_prior(self):\n",
        "        prior = OldTex(\n",
        "            \"P(\", \"\\\\text{Sick}\", \")\", \"= 0.1\\\\%\"\n",
        "        )\n",
        "        prior.set_color_by_tex(\"Sick\", SICKLY_GREEN)\n",
        "        prior.move_to(self.posterior, UP+RIGHT)\n",
        "\n",
        "        self.revert_to_original_skipping_status()\n",
        "        self.play(\n",
        "            Write(prior, run_time = 1),\n",
        "            self.posterior.shift, DOWN,\n",
        "        )\n",
        "        arrow = Arrow(\n",
        "            prior.get_right(), self.posterior.get_right(),\n",
        "            path_arc = -np.pi,\n",
        "        )\n",
        "        times_90 = OldTex(\"\\\\times 90\")\n",
        "        times_90.next_to(arrow, RIGHT)\n",
        "        self.play(ShowCreation(arrow))\n",
        "        self.play(Write(times_90, run_time = 1))\n",
        "        self.wait(2)\n",
        "\n",
        "    ######\n",
        "\n",
        "    def get_all_creatures(self):\n",
        "        creature = PiCreature()\n",
        "        all_creatures = VGroup(*[\n",
        "            VGroup(*[\n",
        "                creature.copy()\n",
        "                for y in range(self.n_rows)\n",
        "            ]).arrange(DOWN, SMALL_BUFF)\n",
        "            for x in range(self.n_cols)\n",
        "        ]).arrange(RIGHT, SMALL_BUFF)\n",
        "        all_creatures.set_height(5)\n",
        "        all_creatures.center().to_edge(LEFT)\n",
        "\n",
        "        healthy_creatures = VGroup(*it.chain(*all_creatures))\n",
        "        sick_one = all_creatures[-1][0]\n",
        "        sick_one.change_mode(\"sick\")\n",
        "        sick_one.set_color(SICKLY_GREEN)\n",
        "        healthy_creatures.remove(sick_one)\n",
        "        all_creatures.sick_one = sick_one\n",
        "        all_creatures.healthy_creatures = healthy_creatures\n",
        "        return all_creatures\n",
        "\n",
        "class DepressingForMedicalTestDesigners(TestScene):\n",
        "    def construct(self):\n",
        "        self.remove(self.pi_creature)\n",
        "        self.show_99_percent_accuracy()\n",
        "        self.reject_test()\n",
        "\n",
        "    def show_99_percent_accuracy(self):\n",
        "        title = OldTexText(\"99\\\\% Accuracy\")\n",
        "        title.to_edge(UP)\n",
        "        title.generate_target()\n",
        "        title.target.to_corner(UP+LEFT)\n",
        "\n",
        "        checks = VGroup(*[\n",
        "            VGroup(*[\n",
        "                OldTex(\"\\\\checkmark\").set_color(GREEN)\n",
        "                for y in range(10)\n",
        "            ]).arrange(DOWN)\n",
        "            for x in range(10)\n",
        "        ]).arrange(RIGHT)\n",
        "        cross = OldTex(\"\\\\times\")\n",
        "        cross.replace(checks[-1][-1])\n",
        "        cross.set_color(RED)\n",
        "        Transform(checks[-1][-1], cross).update(1)\n",
        "        checks.set_height(6)\n",
        "        checks.next_to(title, DOWN)\n",
        "        checks.generate_target()\n",
        "        checks.target.scale(0.5)\n",
        "        checks.target.next_to(title.target, DOWN)\n",
        "\n",
        "        self.add(title)\n",
        "        self.play(Write(checks))\n",
        "        self.wait(2)\n",
        "        self.play(*list(map(MoveToTarget, [title, checks])))\n",
        "\n",
        "    def reject_test(self):\n",
        "        randy = self.pi_creature\n",
        "        randy.to_edge(DOWN)\n",
        "        result = self.get_positive_result(randy)\n",
        "\n",
        "        self.play(FadeIn(randy))\n",
        "        self.play(\n",
        "            FadeIn(result),\n",
        "            randy.change_mode, \"pondering\"\n",
        "        )\n",
        "        self.wait()\n",
        "        self.say(\n",
        "            \"Whatever, I'm 91\\\\% \\\\\\\\ sure that's wrong\",\n",
        "            target_mode = \"shruggie\"\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "class HowMuchCanYouChangeThisPrior(ShowRestrictedSpace, PiCreatureScene):\n",
        "    def construct(self):\n",
        "        self.single_out_new_sick_one()\n",
        "        self.show_subgroups()\n",
        "        self.isolate_special_group()\n",
        "\n",
        "    def create_pi_creatures(self):\n",
        "        creatures = self.get_all_creatures()\n",
        "        creatures.set_height(6.5)\n",
        "        creatures.center()\n",
        "        creatures.submobjects  = list(it.chain(*creatures))\n",
        "\n",
        "        self.add(creatures)\n",
        "        self.sick_one = creatures.sick_one\n",
        "        return creatures\n",
        "\n",
        "    def single_out_new_sick_one(self):\n",
        "        creatures = self.pi_creatures\n",
        "        sick_one = self.sick_one\n",
        "        new_sick_one = sick_one.copy()\n",
        "        new_sick_one.shift(1.3*sick_one.get_width()*RIGHT)\n",
        "        sick_one.change_mode(\"plain\")\n",
        "        sick_one.set_color(BLUE_E)\n",
        "\n",
        "        self.add(new_sick_one)\n",
        "        self.sick_one = new_sick_one\n",
        "\n",
        "    def show_subgroups(self):\n",
        "        subgroups = VGroup(*[\n",
        "            VGroup(*it.chain(\n",
        "                self.pi_creatures[i:i+5],\n",
        "                self.pi_creatures[i+25:i+25+5:]\n",
        "            ))\n",
        "            for i in range(0, 1000)\n",
        "            if i%5 == 0 and (i/25)%2 == 0\n",
        "        ])\n",
        "        special_group = subgroups[-5]\n",
        "        special_group.add(self.sick_one)\n",
        "        subgroups.generate_target()\n",
        "        width_factor = FRAME_WIDTH/subgroups.get_width()\n",
        "        height_factor = FRAME_HEIGHT/subgroups.get_height()\n",
        "        subgroups.target.stretch_in_place(width_factor, 0)\n",
        "        subgroups.target.stretch_in_place(height_factor, 1)\n",
        "        for subgroup in subgroups.target:\n",
        "            subgroup.stretch_in_place(1./width_factor, 0)\n",
        "            subgroup.stretch_in_place(1./height_factor, 1)\n",
        "\n",
        "        self.wait()\n",
        "        self.play(MoveToTarget(subgroups))\n",
        "        subgroups.remove(special_group)\n",
        "\n",
        "        rects = VGroup(*[\n",
        "            SurroundingRectangle(\n",
        "                group, buff = 0, color = GREEN\n",
        "            )\n",
        "            for group in subgroups\n",
        "        ])\n",
        "        special_rect = SurroundingRectangle(\n",
        "            special_group, buff = 0, color = RED\n",
        "        )\n",
        "        self.play(FadeIn(rects), FadeIn(special_rect))\n",
        "        self.wait()\n",
        "\n",
        "        self.to_fade = VGroup(subgroups, rects)\n",
        "        self.special_group = special_group\n",
        "        self.special_rect = special_rect\n",
        "\n",
        "    def isolate_special_group(self):\n",
        "        to_fade, special_group = self.to_fade, self.special_group\n",
        "        self.play(FadeOut(to_fade))\n",
        "        self.play(\n",
        "            FadeOut(self.special_rect),\n",
        "            special_group.set_height, 6,\n",
        "            special_group.center,\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "class ShowTheFormula(TeacherStudentsScene):\n",
        "    CONFIG = {\n",
        "        \"seconds_to_blink\" : 3,\n",
        "    }\n",
        "    def construct(self):\n",
        "        scale_factor = 0.7\n",
        "        sick = \"\\\\text{sick}\"\n",
        "        positive = \"\\\\text{positive}\"\n",
        "        formula = OldTex(\n",
        "            \"P(\", sick, \"\\\\,|\\\\,\", positive, \")\", \"=\",\n",
        "            \"{\\\\quad P(\", sick, \"\\\\text{ and }\", positive, \") \\\\quad\",\n",
        "            \"\\\\over\",\n",
        "            \"P(\", positive, \")}\", \"=\",\n",
        "            \"{1/1{,}000\", \"\\\\over\", \"1/1{,}000\", \"+\", \"(999/1{,}000)(0.01)}\"\n",
        "        )\n",
        "        formula.scale(scale_factor)\n",
        "        formula.next_to(self.pi_creatures, UP, LARGE_BUFF)\n",
        "        formula.shift_onto_screen(buff = MED_LARGE_BUFF)\n",
        "        equals_group = formula.get_parts_by_tex(\"=\")\n",
        "        equals_indices = [\n",
        "            formula.index_of_part(equals)\n",
        "            for equals in equals_group\n",
        "        ]\n",
        "\n",
        "        lhs = VGroup(*formula[:equals_indices[0]])\n",
        "        initial_formula = VGroup(*formula[:equals_indices[1]])\n",
        "        initial_formula.save_state()\n",
        "        initial_formula.shift(3*RIGHT)\n",
        "\n",
        "        over = formula.get_part_by_tex(\"\\\\over\")\n",
        "        num_start_index = equals_indices[0] + 1\n",
        "        num_end_index = formula.index_of_part(over)\n",
        "        numerator = VGroup(\n",
        "            *formula[num_start_index:num_end_index]\n",
        "        )\n",
        "        numerator_rect = SurroundingRectangle(numerator)\n",
        "\n",
        "        alt_numerator = OldTex(\n",
        "            \"P(\", sick, \")\", \"P(\", positive, \"\\\\,|\\\\,\", sick, \")\"\n",
        "        )\n",
        "        alt_numerator.scale(scale_factor)\n",
        "        alt_numerator.move_to(numerator)\n",
        "\n",
        "        number_fraction = VGroup(*formula[equals_indices[-1]:])\n",
        "\n",
        "        rhs = OldTex(\"\\\\approx 0.09\")\n",
        "        rhs.scale(scale_factor)\n",
        "        rhs.move_to(equals_group[-1], LEFT)\n",
        "        rhs.set_color(YELLOW)\n",
        "\n",
        "        for mob in formula, alt_numerator:\n",
        "            mob.set_color_by_tex(sick, SICKLY_GREEN)\n",
        "            mob.set_color_by_tex(positive, YELLOW)\n",
        "\n",
        "\n",
        "        #Ask question\n",
        "        self.student_says(\"What does the \\\\\\\\ formula look like here?\")\n",
        "        self.play(self.teacher.change, \"happy\")\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            Write(lhs),\n",
        "            RemovePiCreatureBubble(\n",
        "                self.students[1], target_mode = \"pondering\",\n",
        "            ),\n",
        "            self.teacher.change, \"raise_right_hand\",\n",
        "            self.students[0].change, \"pondering\",\n",
        "            self.students[2].change, \"pondering\",\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        #Show initial formula\n",
        "        lhs_copy = lhs.copy()\n",
        "        self.play(\n",
        "            LaggedStartMap(\n",
        "                FadeIn, initial_formula, \n",
        "                lag_ratio = 0.7\n",
        "            ),\n",
        "            Animation(lhs_copy, remover = True),\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(ShowCreation(numerator_rect))\n",
        "        self.play(FadeOut(numerator_rect))\n",
        "        self.wait()\n",
        "        self.play(Transform(numerator, alt_numerator))\n",
        "        initial_formula.add(*numerator)\n",
        "        formula.add(*numerator)\n",
        "        self.wait(3)\n",
        "\n",
        "        #Show number_fraction\n",
        "        self.play(\n",
        "            initial_formula.move_to, initial_formula.saved_state,\n",
        "            FadeIn(VGroup(*number_fraction[:3]))\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(LaggedStartMap(\n",
        "            FadeIn, VGroup(*number_fraction[3:]),\n",
        "            run_time = 3,\n",
        "            lag_ratio = 0.7\n",
        "        ))\n",
        "        self.wait(2)\n",
        "\n",
        "        #Show rhs\n",
        "        self.play(formula.shift, UP)\n",
        "        self.play(Write(rhs))\n",
        "        self.play_student_changes(*[\"happy\"]*3)\n",
        "        self.look_at(rhs)\n",
        "        self.wait(2)\n",
        "\n",
        "class SourceOfConfusion(Scene):\n",
        "    CONFIG = {\n",
        "        \"arrow_width\" : 5,\n",
        "    }\n",
        "    def construct(self):\n",
        "        self.add_progression()\n",
        "        self.ask_question()\n",
        "        self.write_bayes_rule()\n",
        "        self.shift_arrow()\n",
        "\n",
        "    def add_progression(self):\n",
        "        prior = OldTex(\"P(\", \"S\", \")\", \"= 0.001\")\n",
        "        arrow = Arrow(ORIGIN, self.arrow_width*RIGHT)\n",
        "        posterior = OldTex(\"P(\", \"S\", \"|\", \"+\", \")\", \"= 0.09\")\n",
        "        for mob in prior, posterior:\n",
        "            mob.set_color_by_tex(\"S\", SICKLY_GREEN)\n",
        "            mob.set_color_by_tex(\"+\", YELLOW)\n",
        "        progression = VGroup(prior, arrow, posterior)\n",
        "        progression.arrange(RIGHT)\n",
        "        progression.shift(DOWN)\n",
        "\n",
        "        bayes_rule_words = OldTexText(\"Bayes' rule\")\n",
        "        bayes_rule_words.next_to(arrow, UP, buff = 0)\n",
        "        arrow.add(bayes_rule_words)\n",
        "\n",
        "        for mob, word in (prior, \"Prior\"), (posterior, \"Posterior\"):\n",
        "            brace = Brace(mob, DOWN)\n",
        "            label = brace.get_text(word)\n",
        "            mob.add(brace, label)\n",
        "\n",
        "        self.add(progression)\n",
        "        self.progression = progression\n",
        "        self.bayes_rule_words = bayes_rule_words\n",
        "\n",
        "    def ask_question(self):\n",
        "        question = OldTexText(\n",
        "            \"Where do math and \\\\\\\\ intuition disagree?\"\n",
        "        )\n",
        "        question.to_corner(UP+LEFT)\n",
        "        question_arrow = Arrow(\n",
        "            question.get_bottom(),\n",
        "            self.bayes_rule_words.get_top(),\n",
        "            color = WHITE\n",
        "        )\n",
        "\n",
        "        self.play(Write(question))\n",
        "        self.wait()\n",
        "        self.play(ShowCreation(question_arrow))\n",
        "\n",
        "        self.question = question\n",
        "        self.question_arrow = question_arrow\n",
        "\n",
        "    def write_bayes_rule(self):\n",
        "        words = self.bayes_rule_words\n",
        "        words_rect = SurroundingRectangle(words)\n",
        "        rule = OldTex(\n",
        "            \"P(\", \"S\", \"|\", \"+\", \")\", \"=\", \n",
        "            \"P(\", \"S\", \")\", \n",
        "            \"{P(\", \"+\", \"|\", \"S\", \")\", \"\\\\over\",\n",
        "            \"P(\", \"+\", \")}\"\n",
        "        )\n",
        "        rule.set_color_by_tex(\"S\", SICKLY_GREEN)\n",
        "        rule.set_color_by_tex(\"+\", YELLOW)\n",
        "        rule.to_corner(UP+RIGHT)\n",
        "        rule_rect = SurroundingRectangle(rule)\n",
        "        rule_rect.set_color(BLUE)\n",
        "        rule.save_state()\n",
        "        rule.replace(words_rect)\n",
        "        rule.scale(0.9)\n",
        "        rule.set_fill(opacity = 0)\n",
        "\n",
        "        self.play(ShowCreation(words_rect))\n",
        "        self.play(\n",
        "            ReplacementTransform(words_rect, rule_rect),\n",
        "            rule.restore,\n",
        "            run_time = 2\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "    def shift_arrow(self):\n",
        "        new_arrow = Arrow(\n",
        "            self.question.get_bottom(),\n",
        "            self.progression[0].get_top(),\n",
        "            color = WHITE\n",
        "        )\n",
        "\n",
        "        self.play(Transform(\n",
        "            self.question_arrow,\n",
        "            new_arrow\n",
        "        ))\n",
        "        self.wait(2)\n",
        "\n",
        "class StatisticsVsEmpathy(PiCreatureScene):\n",
        "    def construct(self):\n",
        "        randy, morty = self.randy, self.morty\n",
        "        sick_one = PiCreature()\n",
        "        sick_one.scale(0.5)\n",
        "        sick_group = VGroup(\n",
        "            sick_one, VectorizedPoint(sick_one.get_bottom())\n",
        "        )\n",
        "        priors = VGroup(*[\n",
        "            OldTex(\"%.1f\"%p+ \"\\\\%\").move_to(ORIGIN, RIGHT)\n",
        "            for p in np.arange(0.1, 2.0, 0.1)\n",
        "        ])\n",
        "        priors.next_to(randy, UP+LEFT, LARGE_BUFF)\n",
        "        prior = priors[0]\n",
        "        prior.save_state()\n",
        "\n",
        "        self.play(PiCreatureSays(\n",
        "            morty, \n",
        "            \"1 in 1{,}000 people \\\\\\\\ have this disease.\",\n",
        "            look_at = randy.eyes\n",
        "        ))\n",
        "        self.play(randy.change, \"pondering\", morty.eyes)\n",
        "        self.wait()\n",
        "        self.play(Write(prior))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            prior.scale, 0.1,\n",
        "            prior.set_fill, None, 0,\n",
        "            prior.move_to, randy.eyes\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            PiCreatureBubbleIntroduction(\n",
        "                randy, sick_group,\n",
        "                target_mode = \"guilty\",\n",
        "                bubble_type = ThoughtBubble,\n",
        "                content_introduction_class = FadeIn,\n",
        "                look_at = sick_one,\n",
        "            ),\n",
        "            RemovePiCreatureBubble(morty)\n",
        "        )\n",
        "        self.play(\n",
        "            sick_one.change_mode, \"sick\",\n",
        "            sick_one.set_color, SICKLY_GREEN\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        probably_me = OldTexText(\"That's probably \\\\\\\\ me\")\n",
        "        probably_me.next_to(sick_one, DOWN)\n",
        "        target_sick_group = VGroup(\n",
        "            sick_one.copy(),\n",
        "            probably_me\n",
        "        )\n",
        "        target_sick_group.scale(0.8)\n",
        "        self.pi_creature_thinks(\n",
        "            target_sick_group,\n",
        "            target_mode = \"pleading\",\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "        self.play(prior.restore)\n",
        "        for new_prior in priors[1:]:\n",
        "            self.play(Transform(prior, new_prior, run_time = 0.5))\n",
        "        self.wait()\n",
        "\n",
        "    ######\n",
        "\n",
        "    def create_pi_creatures(self):\n",
        "        randy = self.randy = Randolph()\n",
        "        morty = self.morty = Mortimer()\n",
        "        randy.to_edge(DOWN).shift(3*LEFT)\n",
        "        morty.to_edge(DOWN).shift(3*RIGHT)\n",
        "        return VGroup(randy, morty)\n",
        "\n",
        "class LessMedicalExample(Scene):\n",
        "    def construct(self):\n",
        "        disease = OldTex(\"P(\\\\text{Having a disease})\")\n",
        "        telepathy = OldTex(\"P(\\\\text{Telepathy})\")\n",
        "        cross = Cross(disease)\n",
        "\n",
        "        self.add(disease)\n",
        "        self.wait()\n",
        "        self.play(ShowCreation(cross))\n",
        "        self.play(\n",
        "            FadeIn(telepathy),\n",
        "            VGroup(disease, cross).shift, 2*UP\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "class PlaneCrashProbability(Scene):\n",
        "    def construct(self):\n",
        "        plane_prob = OldTex(\n",
        "            \"P(\\\\text{Dying in a }\", \"\\\\text{plane}\", \"\\\\text{ crash})\", \n",
        "            \"\\\\approx\", \"1/\", \"11{,}000{,}000\"\n",
        "        )\n",
        "        plane_prob.set_color_by_tex(\"plane\", BLUE)\n",
        "        car_prob = OldTex(\n",
        "            \"P(\\\\text{Dying in a }\", \"\\\\text{car}\", \"\\\\text{ crash})\", \n",
        "            \"\\\\approx\", \"1/\", \"5{,}000\"\n",
        "        )\n",
        "        car_prob.set_color_by_tex(\"car\", YELLOW)\n",
        "        plane_prob.shift(UP)\n",
        "        car_prob.shift(\n",
        "            plane_prob.get_part_by_tex(\"approx\").get_center() -\\\n",
        "            car_prob.get_part_by_tex(\"approx\").get_center() +\\\n",
        "            DOWN\n",
        "        )\n",
        "\n",
        "        self.play(Write(plane_prob))\n",
        "        self.wait(2)\n",
        "        self.play(ReplacementTransform(\n",
        "            plane_prob.copy(), car_prob\n",
        "        ))\n",
        "        self.wait(2)\n",
        "\n",
        "class IntroduceTelepathyExample(StatisticsVsEmpathy):\n",
        "    def construct(self):\n",
        "        self.force_skipping()\n",
        "\n",
        "        self.show_mind_reading_powers()\n",
        "        self.claim_mind_reading_powers()\n",
        "        self.generate_random_number()\n",
        "        self.guess_number_correctly()\n",
        "        self.ask_about_chances()\n",
        "        self.revert_to_original_skipping_status()\n",
        "        self.say_you_probably_got_lucky()\n",
        "\n",
        "    def show_mind_reading_powers(self):\n",
        "        randy, morty = self.randy, self.morty\n",
        "        title = OldTexText(\"1 in 1{,}000 read minds\")\n",
        "        title.to_edge(UP)\n",
        "\n",
        "        self.add(title)\n",
        "        self.read_mind(randy, morty)\n",
        "\n",
        "        self.title = title\n",
        "\n",
        "    def claim_mind_reading_powers(self):\n",
        "        randy, morty = self.randy, self.morty\n",
        "        self.play(PiCreatureSays(\n",
        "            randy, \"I have the gift.\",\n",
        "            run_time = 1,\n",
        "            look_at = morty.eyes,\n",
        "        ))\n",
        "        self.wait()\n",
        "        self.play(RemovePiCreatureBubble(\n",
        "            randy,\n",
        "            target_mode = \"happy\",\n",
        "            look_at = morty.eyes\n",
        "        ))\n",
        "\n",
        "    def generate_random_number(self):\n",
        "        morty = self.morty\n",
        "        bubble = morty.get_bubble(\"\", direction = LEFT)\n",
        "        numbers = [\n",
        "            Integer(random.choice(list(range(100))))\n",
        "            for x in range(30)\n",
        "        ]\n",
        "        numbers.append(Integer(67))\n",
        "        for number in numbers:\n",
        "            number.next_to(morty, UP, LARGE_BUFF, RIGHT)\n",
        "\n",
        "\n",
        "        for number in numbers:\n",
        "            self.add(number)\n",
        "            Scene.wait(self, 0.1)\n",
        "            self.remove(number)\n",
        "        self.play(\n",
        "            ShowCreation(bubble),\n",
        "            number.move_to, bubble.get_bubble_center(), DOWN+LEFT,\n",
        "            morty.change, \"pondering\", \n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        morty.bubble = bubble\n",
        "        self.number = number\n",
        "\n",
        "    def guess_number_correctly(self):\n",
        "        randy, morty = self.randy, self.morty\n",
        "        number_copy = self.number.copy()\n",
        "\n",
        "        self.read_mind(randy, morty)\n",
        "        self.play(PiCreatureSays(\n",
        "            randy, number_copy,\n",
        "            target_mode = \"hooray\",\n",
        "            look_at = morty.eyes\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "    def ask_about_chances(self):\n",
        "        probability = OldTex(\n",
        "            \"P(\", \"\\\\text{Telepath }\", \"|\", \"\\\\text{ Correct}\", \")\",\n",
        "            \"=\", \"???\"\n",
        "        )\n",
        "        probability.set_color_by_tex(\"Telepath\", BLUE)\n",
        "        probability.set_color_by_tex(\"Correct\", GREEN)\n",
        "        probability.to_edge(UP)\n",
        "\n",
        "        self.play(morty.change, \"confused\", randy.eyes)\n",
        "        self.wait()\n",
        "        self.play(ReplacementTransform(\n",
        "            self.title, VGroup(*it.chain(*probability))\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "    def say_you_probably_got_lucky(self):\n",
        "        randy, morty = self.randy, self.morty\n",
        "\n",
        "        self.play(\n",
        "            PiCreatureSays(\n",
        "                morty, \"You probably \\\\\\\\ got lucky.\",\n",
        "                target_mode = \"sassy\",\n",
        "                look_at = randy.eyes,\n",
        "                bubble_config = {\"height\" : 3, \"width\" : 4}\n",
        "            ),\n",
        "            RemovePiCreatureBubble(\n",
        "                randy, \n",
        "                target_mode = \"plain\",\n",
        "                look_at = morty.eyes,\n",
        "            )\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "\n",
        "    ###\n",
        "\n",
        "    def read_mind(self, pi1, pi2):\n",
        "        self.play(pi1.change, \"telepath\", pi2.eyes)\n",
        "        self.send_mind_waves(pi1, pi2)\n",
        "        self.send_mind_waves(pi2, pi1)\n",
        "        self.wait()\n",
        "\n",
        "    def send_mind_waves(self, pi1, pi2):\n",
        "        angle = np.pi/3\n",
        "        n_arcs = 5\n",
        "        vect = pi2.eyes.get_center() - pi1.eyes.get_center()\n",
        "        vect[1] = 0\n",
        "\n",
        "        arc = Arc(angle = angle)\n",
        "        arc.rotate(-angle/2 + angle_of_vector(vect), about_point = ORIGIN)\n",
        "        arc.scale(3)\n",
        "        arcs = VGroup(*[arc.copy() for x in range(n_arcs)])\n",
        "        arcs.move_to(pi2.eyes.get_center(), vect)\n",
        "        arcs.set_stroke(BLACK, 0)\n",
        "        for arc in arcs:\n",
        "            arc.save_state()\n",
        "        arcs.scale(0.1)\n",
        "        arcs.move_to(pi1.eyes, vect)\n",
        "        arcs.set_stroke(WHITE, 4)\n",
        "\n",
        "        self.play(LaggedStartMap(\n",
        "            ApplyMethod, arcs,\n",
        "            lambda m : (m.restore,),\n",
        "            lag_ratio = 0.7,\n",
        "        ))\n",
        "        self.remove(arcs)\n",
        "\n",
        "class CompareNumbersInBothExamples(Scene):\n",
        "    def construct(self):\n",
        "        v_line = Line(UP, DOWN).scale(FRAME_Y_RADIUS)\n",
        "        v_line.shift(MED_LARGE_BUFF*LEFT)\n",
        "        h_line = Line(LEFT, RIGHT).scale(FRAME_X_RADIUS)\n",
        "        h_line.to_edge(UP, buff = 1.25*LARGE_BUFF)\n",
        "        titles = VGroup()\n",
        "        for word, vect in (\"Disease\", LEFT), (\"Telepathy\", RIGHT):\n",
        "            title = OldTexText(\"%s example\"%word)\n",
        "            title.shift(vect*FRAME_X_RADIUS/2.0)\n",
        "            title.to_edge(UP)\n",
        "            titles.add(title)\n",
        "        priors = VGroup(*[\n",
        "            OldTex(\n",
        "                \"P(\", \"\\\\text{%s}\"%s, \")\", \"= 1/1{,}000}\"\n",
        "            )\n",
        "            for s in (\"Sick\", \"Powers\")\n",
        "        ])\n",
        "        likelihoods = VGroup(*[\n",
        "            OldTex(\n",
        "                \"P(\", \"\\\\text{%s}\"%s1, \"|\", \n",
        "                \"\\\\text{Not }\", \"\\\\text{%s}\"%s2, \")\",\n",
        "                \"=\", \"1/100\"\n",
        "            )\n",
        "            for s1, s2 in [(\"+\", \"Sick\"), (\"Correct\", \"Powers\")]\n",
        "        ])\n",
        "        priors.next_to(likelihoods, UP, LARGE_BUFF)\n",
        "        for group in priors, likelihoods:\n",
        "            for mob, vect in zip(group, [LEFT, RIGHT]):\n",
        "                mob.set_color_by_tex(\"Sick\", BLUE)\n",
        "                mob.set_color_by_tex(\"Powers\", BLUE)\n",
        "                mob.set_color_by_tex(\"+\", GREEN)\n",
        "                mob.set_color_by_tex(\"Correct\", GREEN)\n",
        "                mob.scale(0.8)\n",
        "                mob.shift(vect*FRAME_X_RADIUS/2)\n",
        "\n",
        "        self.play(\n",
        "            LaggedStartMap(FadeIn, titles, lag_ratio = 0.7),\n",
        "            *list(map(ShowCreation, [h_line, v_line]))\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(FadeIn(priors))\n",
        "        self.wait()\n",
        "        self.play(FadeIn(likelihoods))\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class NonchalantReactionToPositiveTest(TestScene):\n",
        "    def construct(self):\n",
        "        randy = self.pi_creature\n",
        "        randy.shift(DOWN+2*RIGHT)\n",
        "        result = self.get_positive_result(randy)\n",
        "        accuracy = OldTexText(\"99\\\\% Accuracy\")\n",
        "        accuracy.set_color(YELLOW)\n",
        "        accuracy.next_to(result, DOWN, LARGE_BUFF, RIGHT)\n",
        "\n",
        "        self.add(accuracy)\n",
        "        self.play(Write(result, run_time = 2))\n",
        "        self.play(randy.change, \"pondering\", result)\n",
        "        self.wait()\n",
        "        words = OldTexText(\"Pssht, I'm probably fine.\")\n",
        "        words.scale(0.8)\n",
        "        self.pi_creature_says(\n",
        "            words,\n",
        "            target_mode = \"shruggie\",\n",
        "            bubble_config = {\n",
        "                \"direction\" : RIGHT,\n",
        "                \"width\" : 6,\n",
        "                \"height\" : 3,\n",
        "            },\n",
        "            content_introduction_class = FadeIn,\n",
        "        )\n",
        "        self.wait(4)\n",
        "\n",
        "class OneInOneThousandHaveDiseaseCopy(OneInOneThousandHaveDisease):\n",
        "    pass\n",
        "\n",
        "class ExampleMeasuresDisbeliefInStatistics(Introduction):\n",
        "    def construct(self):\n",
        "        self.teacher.shift(LEFT)\n",
        "        self.hold_up_example()\n",
        "        self.write_counter_intuitive()\n",
        "        self.write_new_theory()\n",
        "        self.either_way()\n",
        "\n",
        "    def write_new_theory(self):\n",
        "        bayes_to_intuition = self.bayes_to_intuition\n",
        "        cross = bayes_to_intuition[-1]\n",
        "        bayes_to_intuition.remove(cross)\n",
        "        statistics_to_belief = OldTexText(\n",
        "            \"Statistics \", \"$\\\\leftrightarrow$\", \" Belief\"\n",
        "        )\n",
        "        statistics_to_belief.scale(0.8)\n",
        "        arrow = statistics_to_belief.get_part_by_tex(\"arrow\")\n",
        "        statistics_to_belief.next_to(self.example, UP)\n",
        "\n",
        "        self.revert_to_original_skipping_status()\n",
        "        self.play(bayes_to_intuition.to_edge, UP)\n",
        "        self.play(\n",
        "            LaggedStartMap(FadeIn, statistics_to_belief),\n",
        "            cross.move_to, arrow\n",
        "        )\n",
        "        self.play_student_changes(\n",
        "            *[\"pondering\"]*3,\n",
        "            look_at = statistics_to_belief\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "        statistics_to_belief.add(cross)\n",
        "        self.statistics_to_belief = statistics_to_belief\n",
        "\n",
        "    def either_way(self):\n",
        "        b_to_i = self.bayes_to_intuition\n",
        "        s_to_b = self.statistics_to_belief\n",
        "        \n",
        "        self.play(FadeOut(self.example))\n",
        "        self.play(\n",
        "            self.teacher.change_mode, \"raise_left_hand\",\n",
        "            self.teacher.look, UP+RIGHT,\n",
        "            b_to_i.next_to, self.teacher, UP,\n",
        "            b_to_i.to_edge, RIGHT, MED_SMALL_BUFF,\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(\n",
        "            self.teacher.change_mode, \"raise_right_hand\",\n",
        "            self.teacher.look, UP+LEFT,\n",
        "            s_to_b.next_to, self.teacher, UP,\n",
        "            s_to_b.shift, LEFT,\n",
        "            b_to_i.shift, 2*UP\n",
        "        )\n",
        "        self.wait(2)\n",
        "\n",
        "class AlwaysPictureTheSpaceOfPossibilities(PiCreatureScene):\n",
        "    def construct(self):\n",
        "        self.pi_creature_thinks(\n",
        "            \"\", bubble_config = {\n",
        "                \"height\" : 4.5,\n",
        "                \"width\" : 8,\n",
        "            }\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "    def create_pi_creature(self):\n",
        "        return Randolph().to_corner(DOWN+LEFT)\n",
        "\n",
        "class Thumbnail(Scene):\n",
        "    def construct(self):\n",
        "        title = OldTexText(\"Why is this \\\\\\\\ counterintuitive?\")\n",
        "        title.scale(2)\n",
        "        title.to_edge(UP)\n",
        "\n",
        "        randy = Randolph(mode = \"sick\",  color = SICKLY_GREEN)\n",
        "        # randy.look_at(title)\n",
        "        randy.scale(1.5)\n",
        "        randy.shift(3*LEFT)\n",
        "        randy.to_edge(DOWN)\n",
        "\n",
        "        prob = OldTex(\"P(\", \"\\\\text{Sick}\", \"|\", \"\\\\text{Test+}\", \")\")\n",
        "        prob.scale(2)\n",
        "        prob.set_color_by_tex(\"Sick\", YELLOW)\n",
        "        prob.set_color_by_tex(\"Test\", GREEN)\n",
        "        prob.next_to(randy, RIGHT)\n",
        "\n",
        "        self.add(title, randy, prob)\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n"
    ]
}