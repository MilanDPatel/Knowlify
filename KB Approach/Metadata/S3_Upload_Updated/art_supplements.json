{
    "topic": "demonstrates the concept of permutations and their visualization using Manim animation.",
    "code": [
        "from manim_imports_ext import *\n",
        "\n",
        "\n",
        "class AmbientPermutations(Scene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        text = Text(\"abcde\", font_size=72)\n",
        "        text.arrange_to_fit_width(4.5)\n",
        "        self.add(text)\n",
        "\n",
        "        # Animate swaps\n",
        "        n_swaps = 10\n",
        "        perms = list(it.permutations(range(len(text))))\n",
        "\n",
        "        for x in range(n_swaps):\n",
        "            perm = random.choice(perms)\n",
        "            letter_anims = []\n",
        "            arrow_anims = []\n",
        "            for i, letter in enumerate(text):\n",
        "                target = text[perm[i]]\n",
        "                letter_anims.append(letter.animate.move_to(target, DOWN).set_anim_args(path_arc=90 * DEGREES))\n",
        "                if i < perm[i]:\n",
        "                    arrow = Arrow(letter.get_bottom(), target.get_bottom(), path_arc=90 * DEGREES)\n",
        "                elif i > perm[i]:\n",
        "                    arrow = Arrow(letter.get_top(), target.get_top(), path_arc=90 * DEGREES)\n",
        "                else:\n",
        "                    arrow = VMobject()\n",
        "                arrow.set_stroke(BLUE)\n",
        "                arrow_anims.append(ShowCreationThenFadeOut(arrow, run_time=2))\n",
        "\n",
        "            self.play(LaggedStart(*arrow_anims, *letter_anims, lag_ratio=0.05))\n",
        "            text.sort()\n",
        "\n",
        "\n",
        "class WriteName(InteractiveScene):\n",
        "    def construct(self):\n",
        "        self.play(Write(\n",
        "            Text(\"\u00c9variste Galois\", font_size=90).to_corner(UL),\n",
        "            run_time=3\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class TimelineTransition(InteractiveScene):\n",
        "    def construct(self):\n",
        "        pass\n",
        "\n",
        "\n",
        "class OutpaintTransition(InteractiveScene):\n",
        "    image_path = \"/Users/grant/3Blue1Brown Dropbox/3Blue1Brown/videos/2022/galois/artwork/chapter 1/wounded-by-pond/transition-to-hospital-2.png\"\n",
        "\n",
        "    def construct(self):\n",
        "        image = ImageMobject(self.image_path)\n",
        "        image.set_height(FRAME_HEIGHT)\n",
        "        image.to_edge(LEFT, buff=0)\n",
        "        self.add(image)\n",
        "\n",
        "        # Pan\n",
        "        self.play(\n",
        "            image.animate.to_edge(RIGHT, buff=-1),\n",
        "            run_time=8,\n",
        "            rate_func=bezier([0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1])\n",
        "        )\n",
        "        image.to_edge(RIGHT, buff=-1)\n",
        "\n",
        "\n",
        "class NightSkyOutpaintingTransition(InteractiveScene):\n",
        "    image_path = \"/Users/grant/3Blue1Brown Dropbox/3Blue1Brown/videos/2022/galois/artwork/chapter 1/transition-to-night-sky/mural.png\"\n",
        "\n",
        "    def construct(self):\n",
        "        # Add image\n",
        "        image = ImageMobject(self.image_path)\n",
        "        image.set_width(FRAME_WIDTH + 6)\n",
        "        image.to_edge(DL, buff=0)\n",
        "        image.shift(2 * DOWN + LEFT)\n",
        "        self.add(image)\n",
        "\n",
        "        # Pan\n",
        "        image.generate_target()\n",
        "        image.target.set_width(FRAME_WIDTH)\n",
        "        image.target.center().to_edge(UP, buff=0)\n",
        "\n",
        "        self.play(\n",
        "            MoveToTarget(image),\n",
        "            run_time=12,\n",
        "            rate_func=bezier([0, 0, 0, 1, 1, 1])\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class LastWordsQuote(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # French quote\n",
        "        fr_quote = Text(\n",
        "            \"\"\"\n",
        "            Ne pleure pas, Alfred! J'ai besoin de\n",
        "            tout mon courage pour mourir \u00e0 vingt ans!\n",
        "            \"\"\",\n",
        "            alignment=\"LEFT\",\n",
        "            font=\"Better Grade\",\n",
        "            font_size=72\n",
        "        )\n",
        "        fr_quote.to_corner(UR)\n",
        "        self.add(fr_quote)\n",
        "\n",
        "        # Write english quote\n",
        "        en_quote = Text(\n",
        "            \"\"\"\n",
        "            Do not cry, Alfred! I\n",
        "            need all my courage to die\n",
        "            at twenty years of age!\n",
        "            \"\"\",\n",
        "            alignment=\"LEFT\",\n",
        "        )\n",
        "        en_quote.match_width(fr_quote)\n",
        "        en_quote.next_to(fr_quote, DOWN, buff=1)\n",
        "        self.play(FadeIn(en_quote, lag_ratio=0.1, run_time=6))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class InfamousCoquette(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Write quote\n",
        "        quote = OldTexText(\n",
        "            \"``I die the victim of an infamous coquette and her two dupes.''\",\n",
        "        )\n",
        "        quote.to_edge(UP)\n",
        "        quote.set_width(FRAME_WIDTH - 1)\n",
        "        quote.set_stroke(BLACK, 0)\n",
        "        quote.set_fill(BLACK)\n",
        "        self.play(Write(quote, run_time=3))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class NightBeforeQuote(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Write\n",
        "        quote = OldTexText(\"\"\"\n",
        "            ``You will publicly ask Jacobi\\\\\\\\\n",
        "            or Gauss to give their opinion\\\\\\\\\n",
        "            not on the truth but on the\\\\\\\\\n",
        "            importance of the theorems.''\n",
        "        \"\"\", alignment=\"\")[0]\n",
        "\n",
        "        quote.to_edge(RIGHT)\n",
        "        self.play(FadeIn(quote, run_time=2, lag_ratio=0.025))\n",
        "        self.wait()\n",
        "        self.play(quote[33:-2].animate.set_color(YELLOW).set_anim_args(lag_ratio=0.5, run_time=3))\n",
        "        self.wait(2)\n",
        "\n",
        "\n",
        "class CauchyFourierPoisson(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        self.add(FullScreenRectangle(fill_color=\"#211F22\", fill_opacity=1))\n",
        "        folder = \"/Users/grant/3Blue1Brown Dropbox/3Blue1Brown/videos/2022/galois/artwork/chapter 1/Portraits/\"\n",
        "        images = Group(\n",
        "            ImageMobject(os.path.join(folder, \"Cauchy-Portrait-Cutoff\")),\n",
        "            ImageMobject(os.path.join(folder, \"Fourier-Portrait\")),\n",
        "            ImageMobject(os.path.join(folder, \"Poisson-Portrait-Outpainted\")),\n",
        "        )\n",
        "        for image in images:\n",
        "            image.set_width(4)\n",
        "        images[0].set_width(3.5)\n",
        "        images.arrange(RIGHT, aligned_edge=DOWN)\n",
        "        images.set_width(FRAME_WIDTH - 1)\n",
        "        images.to_edge(UP, buff=LARGE_BUFF)\n",
        "\n",
        "        # Names\n",
        "        names = VGroup(\n",
        "            Text(\"Augustin Cauchy\"),\n",
        "            Text(\"Joseph Fourier\"),\n",
        "            Text(\"Sim\u00e9on Poisson\"),\n",
        "        )\n",
        "        for name, image in zip(names, images):\n",
        "            name.next_to(image, DOWN)\n",
        "            name.set_fill(GREY_A)\n",
        "        names[1:].shift(SMALL_BUFF * RIGHT)\n",
        "\n",
        "        # Animations\n",
        "        kw = dict(lag_ratio=0.5, run_time=3)\n",
        "        self.play(\n",
        "            LaggedStart(*(FadeIn(image, 0.5 * UP, scale=1.1) for image in images), **kw),\n",
        "            LaggedStart(*(Write(name, rate_func=squish_rate_func(smooth, 0, 0.85)) for name in names), **kw),\n",
        "        )\n",
        "        self.wait()\n"
    ]
}