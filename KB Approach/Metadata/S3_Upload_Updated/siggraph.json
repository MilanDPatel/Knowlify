{
    "topic": "The mathematical concept being demonstrated is the ability to interpolate between different orientations of a 3",
    "code": [
        "from manim_imports_ext import *\n",
        "\n",
        "\n",
        "class ThreePis(Scene):\n",
        "    def construct(self):\n",
        "        pis = VGroup(*(PiCreature() for x in range(3)))\n",
        "        for pi, color in zip(pis, (BLUE_E, BLUE_C, BLUE_D)):\n",
        "            pi.set_color(color)\n",
        "        pis.set_height(2)\n",
        "        pis.arrange(RIGHT, buff=2)\n",
        "        pis.to_corner(DR)\n",
        "        pis[2].flip()\n",
        "\n",
        "        words = [\"Choas\", \"Linear\\nalgebra\", \"Quaternions\"]\n",
        "        modes = [\"speaking\", \"tease\", \"hooray\"]\n",
        "        for pi, word, mode in zip(pis, words, modes):\n",
        "            bubble = pi.get_bubble(\n",
        "                word,\n",
        "                bubble_type=SpeechBubble,\n",
        "                height=3, width=3, direction=RIGHT\n",
        "            )\n",
        "            bubble.add(bubble.content)\n",
        "            bubble.next_to(pi, UL)\n",
        "            bubble.shift(RIGHT)\n",
        "            pi.change(mode, bubble.content)\n",
        "            self.add(pi, bubble)\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class PendulumAxes(Scene):\n",
        "    def construct(self):\n",
        "        plane = NumberPlane(\n",
        "            (-2, 2),\n",
        "            (-2, 2),\n",
        "            height=8,\n",
        "            width=8,\n",
        "            background_line_style={\n",
        "                \"stroke_color\": WHITE,\n",
        "            }\n",
        "        )\n",
        "        theta1 = OldTex(\"\\\\theta_1\").next_to(plane.c2p(2, 0), RIGHT, SMALL_BUFF)\n",
        "        theta2 = OldTex(\"\\\\theta_2\").next_to(plane.c2p(0, 2), DR, SMALL_BUFF)\n",
        "        labels = VGroup(theta1, theta2)\n",
        "\n",
        "        x_labels = VGroup(OldTex(\"-\\\\pi\"), OldTex(\"-{\\\\pi \\\\over 2}\"), OldTex(\"{\\\\pi \\\\over 2}\"), OldTex(\"\\\\pi\"))\n",
        "        y_labels = VGroup()\n",
        "        for label, x in zip(x_labels, (-2, -1, 1, 2)):\n",
        "            label.scale(0.5)\n",
        "            label.set_stroke(BLACK, 5, background=True)\n",
        "            label.next_to(plane.c2p(x, 0), DL, SMALL_BUFF)\n",
        "            y_label = label.copy()\n",
        "            y_label.next_to(plane.c2p(0, x), DL, SMALL_BUFF)\n",
        "            y_labels.add(y_label)\n",
        "\n",
        "        self.add(plane)\n",
        "        self.add(labels)\n",
        "        self.add(x_labels, y_labels)\n",
        "\n",
        "\n",
        "class InterpolatingOrientations(ThreeDScene):\n",
        "    matrix = True\n",
        "\n",
        "    def construct(self):\n",
        "        # Frame\n",
        "        frame = self.camera.frame\n",
        "        frame.set_height(5)\n",
        "        self.camera.light_source.move_to((-5, -10, 5))\n",
        "\n",
        "        # 3d model\n",
        "        color = \"#539ac3\"\n",
        "        logo = Cube(color=color)\n",
        "        logo.replace_submobject(0, TexturedSurface(logo[0], \"acm_logo\"))\n",
        "        logo.set_depth(0.5, stretch=True)\n",
        "        logo.rotate(-45 * DEGREES)\n",
        "        logo.set_height(2)\n",
        "        logo.set_opacity(0.8)\n",
        "\n",
        "        logo_template = logo.copy()\n",
        "\n",
        "        # Axes\n",
        "        axes = ThreeDAxes(\n",
        "            (-3, 3),\n",
        "            (-3, 3),\n",
        "            (-2, 2),\n",
        "            width=6,\n",
        "            height=6,\n",
        "            depth=4,\n",
        "        )\n",
        "        axes.set_stroke(width=1)\n",
        "        axes.apply_depth_test()\n",
        "\n",
        "        # Bases\n",
        "        bases = DotCloud(np.identity(3))\n",
        "        bases.set_color((RED, GREEN, BLUE))\n",
        "        bases.make_3d()\n",
        "\n",
        "        lines = VGroup(*(Line() for x in range(3)))\n",
        "        lines.set_submobject_colors_by_gradient(RED, GREEN, BLUE)\n",
        "        lines.set_stroke(width=2)\n",
        "        lines.insert_n_curves(20)\n",
        "        lines.apply_depth_test()\n",
        "\n",
        "        def update_lines(lines):\n",
        "            for line, point in zip(lines, bases.get_points()):\n",
        "                line.put_start_and_end_on(ORIGIN, point)\n",
        "\n",
        "        lines.add_updater(update_lines)\n",
        "\n",
        "        def get_matrix():\n",
        "            return bases.get_points().T\n",
        "\n",
        "        # Tie logo to matrix\n",
        "        logo = always_redraw(\n",
        "            lambda: logo_template.copy().apply_matrix(get_matrix()).sort(lambda p: -p[1])\n",
        "        )\n",
        "\n",
        "        # Show matrix/quaternion label\n",
        "        if self.matrix:\n",
        "            mat_mob = DecimalMatrix(\n",
        "                get_matrix(),\n",
        "                element_to_mobject_config={\n",
        "                    \"num_decimal_places\": 2,\n",
        "                    \"edge_to_fix\": RIGHT\n",
        "                }\n",
        "            )\n",
        "            mat_mob.to_corner(UL)\n",
        "\n",
        "            def update_mat_mob(mat_mob):\n",
        "                for entry, value in zip(mat_mob.get_entries(), get_matrix().flatten()):\n",
        "                    entry.set_value(value)\n",
        "                mat_mob.fix_in_frame()\n",
        "                mat_mob.set_column_colors(RED, GREEN, BLUE)\n",
        "                return mat_mob\n",
        "\n",
        "            mat_mob.add_updater(update_mat_mob)\n",
        "\n",
        "            self.add(mat_mob)\n",
        "        else:\n",
        "            quat_tracker = ValueTracker([1, 0, 0, 0])\n",
        "            bases.add_updater(lambda m: m.set_points(\n",
        "                rotation_matrix_from_quaternion(quat_tracker.get_value()).T\n",
        "            ))\n",
        "\n",
        "            kw = {\"num_decimal_places\": 3, \"include_sign\": True}\n",
        "            quat_label = VGroup(\n",
        "                VGroup(DecimalNumber(1, **kw)),\n",
        "                VGroup(DecimalNumber(0, **kw), OldTex(\"i\")),\n",
        "                VGroup(DecimalNumber(0, **kw), OldTex(\"j\")),\n",
        "                VGroup(DecimalNumber(0, **kw), OldTex(\"k\")),\n",
        "            )\n",
        "            for mob in quat_label:\n",
        "                mob.arrange(RIGHT, buff=SMALL_BUFF)\n",
        "            quat_label.arrange(DOWN, aligned_edge=LEFT, buff=MED_SMALL_BUFF)\n",
        "            quat_label.to_corner(UL)\n",
        "            quat_label.shift(2 * RIGHT)\n",
        "\n",
        "            def update_quat_label(quat_label):\n",
        "                colors = [WHITE, RED, GREEN, BLUE]\n",
        "                for mob, value, color in zip(quat_label, quat_tracker.get_value(), colors):\n",
        "                    mob[0].set_value(value)\n",
        "                    mob.set_color(color)\n",
        "                quat_label.fix_in_frame()\n",
        "                return quat_label\n",
        "\n",
        "            quat_label.add_updater(update_quat_label)\n",
        "            self.add(quat_label)\n",
        "\n",
        "        # Show 3d scene\n",
        "        self.add(axes)\n",
        "        self.add(bases)\n",
        "        self.add(lines)\n",
        "        self.add(logo)\n",
        "\n",
        "        def move_to_matrix(matrix, run_time=5):\n",
        "            self.play(\n",
        "                bases.animate.set_points(np.transpose(matrix)),\n",
        "                run_time=run_time\n",
        "            )\n",
        "            self.wait()\n",
        "\n",
        "        def move_to_quaternion(quaternion, run_time=5):\n",
        "            self.play(\n",
        "                quat_tracker.animate.set_value(quaternion),\n",
        "                UpdateFromFunc(\n",
        "                    quat_tracker,\n",
        "                    lambda m: m.set_value(normalize(m.get_value()))\n",
        "                ),\n",
        "                run_time=run_time\n",
        "            )\n",
        "            self.wait()\n",
        "\n",
        "        self.play(\n",
        "            ShowCreation(axes),\n",
        "            frame.animate.reorient(-20, 60), run_time=3\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Using the matrix to interpolate\n",
        "        if self.matrix:\n",
        "            move_to_matrix(z_to_vector(RIGHT))\n",
        "            move_to_matrix(z_to_vector(LEFT))\n",
        "            move_to_matrix(z_to_vector(DOWN + RIGHT))\n",
        "            move_to_matrix(z_to_vector(UP + LEFT + OUT))\n",
        "        else:\n",
        "            move_to_quaternion(quaternion_from_angle_axis(PI / 2, UP))\n",
        "            move_to_quaternion(quaternion_from_angle_axis(-PI / 2, UP))\n",
        "            move_to_quaternion(quaternion_from_angle_axis(PI / 2, UR))\n",
        "            move_to_quaternion(quaternion_from_angle_axis(-0.3 * PI, UR))\n",
        "\n",
        "\n",
        "class InterpolatingOrientationsWithQuaternions(InterpolatingOrientations):\n",
        "    matrix = False\n",
        "\n",
        "\n",
        "class FirstStepIsToCare(Scene):\n",
        "    def construct(self):\n",
        "        morty = Mortimer()\n",
        "        morty.to_corner(DR)\n",
        "        self.play(PiCreatureSays(morty, OldTexText(\"The first step\\\\\\\\is to care.\")))\n",
        "\n",
        "\n",
        "class NeverNeeded(Scene):\n",
        "    def construct(self):\n",
        "        formula = OldTex(\"\\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}\")\n",
        "        formula.set_height(2)\n",
        "        formula.to_corner(UL)\n",
        "        self.add(formula)\n",
        "\n",
        "        morty = Mortimer()\n",
        "        morty.to_corner(DR)\n",
        "        self.play(PiCreatureSays(morty, OldTexText(\"Who actually\\\\\\\\uses it!\"), target_mode=\"angry\"))\n",
        "\n",
        "\n",
        "class Thanks(Scene):\n",
        "    def construct(self):\n",
        "        morty = Mortimer()\n",
        "        morty.to_corner(DR)\n",
        "        self.play(PiCreatureSays(morty, OldTexText(\"Thanks\"), target_mode=\"gracious\"))\n",
        "        morty.look_at(OUT)\n"
    ]
}