{
    "topic": "demonstrates the creation of a table of contents with animations, where each item is",
    "code": [
        "from manim_imports_ext import *\n",
        "\n",
        "\n",
        "def get_tripple_underline(mobject, buff=0.1):\n",
        "    ul1 = Underline(mobject, buff=buff).set_stroke(BLUE_C, 3)\n",
        "    ul2 = Underline(ul1).scale(0.9).set_stroke(BLUE_D, 2)\n",
        "    ul3 = Underline(ul2).scale(0.9).set_stroke(BLUE_E, 1)\n",
        "    return VGroup(ul1, ul2, ul3)\n",
        "\n",
        "\n",
        "def get_h_line():\n",
        "    line = DashedLine(ORIGIN, FRAME_WIDTH * RIGHT)\n",
        "    line.center()\n",
        "    return line\n",
        "\n",
        "\n",
        "# Scenes\n",
        "\n",
        "class TableOfContents(Scene):\n",
        "    def construct(self):\n",
        "        # plane = NumberPlane()\n",
        "        # self.add(plane, FullScreenFadeRectangle(opacity=0.8))\n",
        "\n",
        "        items = VGroup(\n",
        "            Text(\"Summer of Math Exposition\"),\n",
        "            Text(\"The Universal Advice\"),\n",
        "            Text(\"How to structure math explanations\"),\n",
        "            Text(\"Thoughts on animation software\"),\n",
        "            Text(\"The 3b1b Podcast/Second channel\"),\n",
        "        )\n",
        "        items.arrange(DOWN, buff=LARGE_BUFF, aligned_edge=LEFT)\n",
        "        items.to_edge(LEFT, buff=0.5)\n",
        "\n",
        "        self.add(items)\n",
        "\n",
        "        for i in range(len(items)):\n",
        "            for item in items:\n",
        "                item.generate_target()\n",
        "                if item is items[i]:\n",
        "                    height = 0.55\n",
        "                    opacity = 1.0\n",
        "                else:\n",
        "                    height = 0.3\n",
        "                    opacity = 0.25\n",
        "                item.target.scale(\n",
        "                    height / item[0].get_height(),\n",
        "                    about_edge=LEFT\n",
        "                )\n",
        "                item.target.set_opacity(opacity)\n",
        "            self.play(*map(MoveToTarget, items))\n",
        "            self.wait()\n",
        "\n",
        "\n",
        "class SoME1Name(Scene):\n",
        "    def construct(self):\n",
        "        strings = [\"Summer\", \"of\", \"Math\", \"Exposition\", \"#1\"]\n",
        "        lens = list(map(lambda s: len(s) + 1, strings))\n",
        "        indices = [0, *np.cumsum(lens)]\n",
        "        phrase = Text(\" \".join(strings))\n",
        "        phrase.set_width(12)\n",
        "        words = VGroup()\n",
        "        for i1, i2 in zip(indices, indices[1:]):\n",
        "            words.add(phrase[i1:i2])\n",
        "\n",
        "        acronym = VGroup(*(word[0].copy() for word in words[:-1]))\n",
        "        acronym.add(words[-1][-1].copy())\n",
        "        acronym.generate_target()\n",
        "        acronym.target.arrange(RIGHT, buff=SMALL_BUFF, aligned_edge=DOWN)\n",
        "        acronym.target.move_to(DOWN)\n",
        "\n",
        "        self.play(LaggedStartMap(FadeIn, words, lag_ratio=0.5, run_time=1))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            # FadeOut(phrase),\n",
        "            phrase.animate.move_to(UP),\n",
        "            MoveToTarget(acronym)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        self.play(\n",
        "            ShowCreation(get_tripple_underline(words[2])),\n",
        "            words[2].animate.set_color(BLUE_B),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class LinkAndDate(Scene):\n",
        "    def construct(self):\n",
        "        words = link, date = VGroup(\n",
        "            Text(\"https://3b1b.co/SoME1\", font=\"CMU Serif\"),\n",
        "            Text(\"August 22nd\", font=\"CMU Serif\")\n",
        "        )\n",
        "        words.set_width(10)\n",
        "        words.arrange(DOWN, buff=0.5)\n",
        "        words.set_stroke(BLACK, 5, background=True)\n",
        "\n",
        "        lines = get_tripple_underline(date)\n",
        "\n",
        "        details = Text(\"(Full details here)\")\n",
        "        details.to_corner(UR)\n",
        "        arrow = Arrow(details, link, buff=0.5)\n",
        "\n",
        "        self.play(Write(link), run_time=1)\n",
        "        self.wait()\n",
        "        self.add(lines, words)\n",
        "        self.play(\n",
        "            FadeIn(date, scale=1.2, rate_func=squish_rate_func(smooth, 0.3, 0.7)),\n",
        "            ShowCreation(lines, lag_ratio=0.25)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        self.play(FadeIn(details), GrowArrow(arrow))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class Featuring(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        screen = ScreenRectangle()\n",
        "        screen.set_height(4)\n",
        "        screen.to_corner(UL)\n",
        "        screen.set_stroke(WHITE, 2)\n",
        "        screen.set_fill(BLACK, 1)\n",
        "\n",
        "        self.add(screen)\n",
        "\n",
        "        words = OldTexText(\"Your work here\")\n",
        "        words.set_width(screen.get_width() - 1)\n",
        "        words.move_to(screen)\n",
        "\n",
        "        self.play(\n",
        "            self.teacher.change(\"tease\"),\n",
        "            self.change_students(*3 * [\"hooray\"], look_at=screen),\n",
        "            FadeIn(screen, UP)\n",
        "        )\n",
        "        self.play(Write(words))\n",
        "        self.play(ShowCreation(get_tripple_underline(words)))\n",
        "        self.wait(5)\n",
        "        self.student_says(\n",
        "            OldTexText(\"Anything\\\\\\\\else?\"),\n",
        "            target_mode=\"raise_left_hand\",\n",
        "            look_at=self.teacher,\n",
        "        )\n",
        "        self.play(self.teacher.change(\"sassy\"))\n",
        "        self.wait(2)\n",
        "\n",
        "\n",
        "class Constraints(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.student_says(\n",
        "            OldTexText(\"What are the\\\\\\\\constraints?\"),\n",
        "            added_anims=[self.teacher.change(\"tease\")]\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class TopicChoice(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.student_says(\n",
        "            OldTexText(\"What kind of\\\\\\\\topics?\"),\n",
        "            added_anims=[self.teacher.change(\"tease\")],\n",
        "            index=1,\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class PartialFraction(Scene):\n",
        "    def construct(self):\n",
        "        frac = OldTex(\n",
        "            r\"\\frac{x+9}{(x-3)(x+5)} = \\frac{?}{x - 3} + \\frac{?}{x + 5}\"\n",
        "        )\n",
        "        frac.set_width(10)\n",
        "        self.add(frac)\n",
        "\n",
        "\n",
        "class TrigIdentity(Scene):\n",
        "    def construct(self):\n",
        "        plane = NumberPlane().scale(2)\n",
        "        circle = Circle(radius=2)\n",
        "        circle.set_stroke(YELLOW, 2)\n",
        "\n",
        "        theta_tracker = ValueTracker(60 * DEGREES)\n",
        "        get_theta = theta_tracker.get_value\n",
        "\n",
        "        def get_point():\n",
        "            return circle.pfp(get_theta() / TAU)\n",
        "\n",
        "        dot = Dot()\n",
        "        f_always(dot.move_to, get_point)\n",
        "        radial_line = always_redraw(lambda: Line(plane.c2p(0, 0), get_point()))\n",
        "        tan_line = always_redraw(\n",
        "            lambda: Line(get_point(), plane.c2p(1 / math.cos(get_theta()), 0), stroke_color=RED)\n",
        "        )\n",
        "        sec_line = always_redraw(\n",
        "            lambda: Line(plane.c2p(0, 0), tan_line.get_end(), stroke_color=PINK)\n",
        "        )\n",
        "\n",
        "        def get_one_label():\n",
        "            one = Integer(1)\n",
        "            one.next_to(radial_line.get_center(), UL, SMALL_BUFF)\n",
        "            return one\n",
        "\n",
        "        def get_tan_label():\n",
        "            label = OldTex(\"\\\\tan(\\\\theta)\")\n",
        "            label.set_color(RED)\n",
        "            point = tan_line.get_center()\n",
        "            label.next_to(point, UP, SMALL_BUFF)\n",
        "            label.rotate(tan_line.get_angle(), about_point=point)\n",
        "            label.set_stroke(BLACK, 3, background=True)\n",
        "            return label\n",
        "\n",
        "        def get_sec_label():\n",
        "            label = OldTex(\"\\\\sec(\\\\theta)\")\n",
        "            label.set_color(PINK)\n",
        "            label.next_to(sec_line, DOWN, SMALL_BUFF)\n",
        "            label.set_stroke(BLACK, 3, background=True)\n",
        "            return label\n",
        "\n",
        "        one_label = always_redraw(get_one_label)\n",
        "        tan_label = always_redraw(get_tan_label)\n",
        "        sec_label = always_redraw(get_sec_label)\n",
        "\n",
        "        arc = always_redraw(lambda: Arc(0, get_theta(), radius=0.25))\n",
        "        arc_label = OldTex(\"\\\\theta\", font_size=36)\n",
        "        arc_label.next_to(arc, RIGHT, SMALL_BUFF, DOWN).shift(SMALL_BUFF * UP)\n",
        "\n",
        "        equation = OldTex(\n",
        "            \"\\\\tan^2(\\\\theta) + 1 = \\\\sec^2(\\\\theta)\",\n",
        "            tex_to_color_map={\n",
        "                \"\\\\tan\": RED,\n",
        "                \"\\\\sec\": PINK,\n",
        "            },\n",
        "            font_size=60\n",
        "        )\n",
        "        equation.to_corner(UL)\n",
        "        equation.set_stroke(BLACK, 7, background=True)\n",
        "\n",
        "        self.add(plane)\n",
        "        self.add(circle)\n",
        "        self.add(equation)\n",
        "\n",
        "        self.add(radial_line)\n",
        "        self.add(tan_line)\n",
        "        self.add(sec_line)\n",
        "        self.add(dot)\n",
        "\n",
        "        self.add(one_label)\n",
        "        self.add(tan_label)\n",
        "        self.add(sec_label)\n",
        "\n",
        "        self.add(arc)\n",
        "        self.add(arc_label)\n",
        "\n",
        "        angles = [40 * DEGREES, 70 * DEGREES]\n",
        "        for angle in angles:\n",
        "            self.play(theta_tracker.animate.set_value(angle), run_time=4)\n",
        "\n",
        "\n",
        "class TeacherStudentPairing(Scene):\n",
        "    def construct(self):\n",
        "        randy = Randolph(height=2.5)\n",
        "        morty = Mortimer(height=3.0)\n",
        "        pis = VGroup(randy, morty)\n",
        "        pis.arrange(RIGHT, buff=3, aligned_edge=DOWN)\n",
        "        pis.to_edge(DOWN, buff=1.5)\n",
        "\n",
        "        self.add(pis)\n",
        "        self.add(Text(\"Teacher\").next_to(morty, DOWN))\n",
        "        self.add(Text(\"Student\").next_to(randy, DOWN))\n",
        "\n",
        "        teacher_label = Text(\"Delivers/writes lesson\", font_size=36)\n",
        "        student_label = Text(\"Produces/edits/animates\", font_size=36)\n",
        "        teacher_label.next_to(morty, UP, buff=1.5).shift(RIGHT)\n",
        "        student_label.next_to(randy, UP, buff=1.5).shift(LEFT)\n",
        "        teacher_arrow = Arrow(teacher_label, morty)\n",
        "        student_arrow = Arrow(student_label, randy)\n",
        "\n",
        "        self.play(\n",
        "            Write(student_label),\n",
        "            GrowArrow(student_arrow),\n",
        "            randy.change(\"hooray\", student_label)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            Write(teacher_label),\n",
        "            GrowArrow(teacher_arrow),\n",
        "            morty.change(\"pondering\", teacher_label)\n",
        "        )\n",
        "        self.wait()\n",
        "        for x in range(4):\n",
        "            self.play(Blink(random.choice(pis)))\n",
        "            self.wait(random.random())\n",
        "\n",
        "\n",
        "class Grey(Scene):\n",
        "    def construct(self):\n",
        "        self.add(FullScreenRectangle().set_fill(GREY_D, 1))\n",
        "\n",
        "\n",
        "class ButIHaveNoExperience(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.student_says(\n",
        "            OldTexText(\"But I have no\\\\\\\\experience!\"),\n",
        "            index=0,\n",
        "            target_mode=\"pleading\",\n",
        "        )\n",
        "        self.play_student_changes(\n",
        "            \"pleading\", \"pondering\", \"pondering\",\n",
        "            look_at=self.students[0].bubble,\n",
        "        )\n",
        "        self.students[0].look_at(self.teacher.eyes)\n",
        "        self.play(self.teacher.change(\"tease\", self.students[0].eyes))\n",
        "\n",
        "        self.wait(4)\n",
        "\n",
        "\n",
        "class ContentAdvice(Scene):\n",
        "    def construct(self):\n",
        "        title = Text(\"Advice for structuring math explanations\")\n",
        "        title.set_width(10)\n",
        "        title.to_edge(UP)\n",
        "        underline = Underline(title).scale(1.2).set_stroke(GREY_B, 2)\n",
        "\n",
        "        self.play(FadeIn(title, UP))\n",
        "        self.play(ShowCreation(underline))\n",
        "\n",
        "        points = VGroup(\n",
        "            Text(\"1) Concrete before abstract\"),\n",
        "            Text(\"2) Topic choice > production quality\"),\n",
        "            Text(\"3) Be niche\"),\n",
        "            Text(\"4) Know your genre\"),\n",
        "            Text(\"5) Definitions are not the beginning\"),\n",
        "        )\n",
        "        points.arrange(DOWN, buff=0.7, aligned_edge=LEFT)\n",
        "        points.next_to(title, DOWN, buff=1.0)\n",
        "\n",
        "        self.play(LaggedStartMap(\n",
        "            FadeIn,\n",
        "            VGroup(*(point[:2] for point in points)),\n",
        "            shift=0.25 * RIGHT\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "        for point in points:\n",
        "            self.play(Write(point[2:]))\n",
        "\n",
        "        self.wait()\n",
        "        gt0 = OldTex(\"> 0\")\n",
        "        gt0.next_to(points[1], RIGHT)\n",
        "        self.play(\n",
        "            VGroup(points[0], *points[2:]).animate.set_opacity(0.25)\n",
        "        )\n",
        "        self.play(Write(gt0))\n",
        "        self.play(ShowCreation(get_tripple_underline(\n",
        "            VGroup(points[1].get_part_by_text(\"production quality\"), gt0)\n",
        "        )))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class LayersOfAbstraction(Scene):\n",
        "    def construct(self):\n",
        "        self.save_count = 0\n",
        "        self.add_title()\n",
        "        self.show_layers()\n",
        "        self.show_pairwise_relations()\n",
        "        self.circle_certain_pairs()\n",
        "\n",
        "    def add_title(self):\n",
        "        title = OldTexText(\"Layers of abstraction\")\n",
        "        title.scale(1.5)\n",
        "        title.to_edge(UP, buff=MED_SMALL_BUFF)\n",
        "        line = Line(LEFT, RIGHT)\n",
        "        line.set_width(FRAME_WIDTH)\n",
        "        line.next_to(title, DOWN, SMALL_BUFF)\n",
        "\n",
        "        self.add(title, line)\n",
        "\n",
        "    def show_layers(self):\n",
        "        layers = self.layers = self.get_layers()\n",
        "\n",
        "        for layer in layers:\n",
        "            self.play(FadeIn(layer, shift=0.1 * UP))\n",
        "\n",
        "    def show_pairwise_relations(self):\n",
        "        p1, p2 = [layer.get_left() for layer in self.layers[2:4]]\n",
        "        down_arrow = Arrow(p2, p1, path_arc=PI)\n",
        "        down_words = OldTexText(\"``For example''\")\n",
        "        down_words.scale(0.8)\n",
        "        down_words.next_to(down_arrow, LEFT)\n",
        "        up_arrow = Arrow(p1, p2, path_arc=-PI)\n",
        "        up_words = OldTexText(\"``In general''\")\n",
        "        up_words.scale(0.8)\n",
        "        up_words.next_to(up_arrow, LEFT)\n",
        "\n",
        "        VGroup(up_words, down_words).set_color(YELLOW)\n",
        "\n",
        "        self.play(\n",
        "            GrowArrow(down_arrow),\n",
        "            FadeIn(down_words)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            ReplacementTransform(down_arrow, up_arrow, path_arc=PI),\n",
        "            FadeTransform(down_words, up_words)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(FadeOut(up_arrow), FadeOut(up_words))\n",
        "\n",
        "    def circle_certain_pairs(self):\n",
        "        layers = self.layers\n",
        "\n",
        "        for l1, l2 in zip(layers, layers[1:]):\n",
        "            group = VGroup(l1, l2)\n",
        "            group.save_state()\n",
        "            layers.save_state()\n",
        "            layers.fade(0.75)\n",
        "            rect = SurroundingRectangle(group)\n",
        "            rect.set_stroke(YELLOW, 5)\n",
        "            group.restore()\n",
        "            self.add(rect)\n",
        "            self.wait()\n",
        "            self.remove(rect)\n",
        "            layers.restore()\n",
        "\n",
        "    #\n",
        "\n",
        "    def get_layers(self):\n",
        "        layers = VGroup(*[\n",
        "            VGroup(Rectangle(height=1, width=5))\n",
        "            for x in range(6)\n",
        "        ])\n",
        "        layers.arrange(UP, buff=0)\n",
        "        layers.set_stroke(GREY, 2)\n",
        "        layers.set_gloss(1)\n",
        "\n",
        "        # Layer 0: Quantities\n",
        "        triangle = Triangle().set_height(0.25)\n",
        "        tri_dots = VGroup(*[Dot(v) for v in triangle.get_vertices()])\n",
        "        dots_rect = VGroup(*[Dot() for x in range(12)])\n",
        "        dots_rect.arrange_in_grid(3, 4, buff=SMALL_BUFF)\n",
        "        for i, color in enumerate([RED, GREEN, BLUE]):\n",
        "            dots_rect[i::4].set_color(color)\n",
        "        pi_chart = VGroup(*[\n",
        "            Sector(start_angle=a, angle=TAU / 3)\n",
        "            for a in np.arange(0, TAU, TAU / 3)\n",
        "        ])\n",
        "        pi_chart.set_fill(opacity=0)\n",
        "        pi_chart.set_stroke(WHITE, 2)\n",
        "        pi_chart[0].set_fill(BLUE, 1)\n",
        "        pi_chart.rotate(PI / 3)\n",
        "        pi_chart.match_height(dots_rect)\n",
        "        quantities = VGroup(tri_dots, dots_rect, pi_chart)\n",
        "        quantities.arrange(RIGHT, buff=LARGE_BUFF)\n",
        "\n",
        "        # Layer 1: Numbers\n",
        "        numbers = VGroup(\n",
        "            OldTex(\"3\"),\n",
        "            OldTex(\"3 \\\\times 4\"),\n",
        "            OldTex(\"1 / 3\"),\n",
        "        )\n",
        "        for number, quantity in zip(numbers, quantities):\n",
        "            number.move_to(quantity)\n",
        "\n",
        "        # Layer 2: Algebra\n",
        "        algebra = VGroup(\n",
        "            OldTex(\"x^2 - 1 = (x + 1)(x - 1)\")\n",
        "        )\n",
        "        algebra.set_width(layers.get_width() - MED_LARGE_BUFF)\n",
        "\n",
        "        # Layer 3: Functions\n",
        "        functions = VGroup(\n",
        "            OldTex(\"f(x) = 0\"),\n",
        "            OldTex(\"\\\\frac{df}{dx}\"),\n",
        "        )\n",
        "        functions.set_height(layers[0].get_height() - 2 * SMALL_BUFF)\n",
        "        functions.arrange(RIGHT, buff=LARGE_BUFF)\n",
        "        # functions.match_width(algebra)\n",
        "\n",
        "        # Layer 4: Vector space\n",
        "        t2c_map = {\n",
        "            \"\\\\textbf{v}\": YELLOW,\n",
        "            \"\\\\textbf{w}\": PINK,\n",
        "        }\n",
        "        vector_spaces = VGroup(\n",
        "            OldTex(\n",
        "                \"\\\\textbf{v} + \\\\textbf{w} =\"\n",
        "                \"\\\\textbf{w} + \\\\textbf{v}\",\n",
        "                tex_to_color_map=t2c_map,\n",
        "            ),\n",
        "            OldTex(\n",
        "                \"s(\\\\textbf{v} + \\\\textbf{w}) =\"\n",
        "                \"s\\\\textbf{v} + s\\\\textbf{w}\",\n",
        "                tex_to_color_map=t2c_map,\n",
        "            ),\n",
        "        )\n",
        "        vector_spaces.arrange(DOWN, buff=MED_SMALL_BUFF)\n",
        "        vector_spaces.set_height(layers[0].get_height() - MED_LARGE_BUFF)\n",
        "        v, w = vectors = VGroup(\n",
        "            Vector([2, 1, 0], color=YELLOW),\n",
        "            Vector([1, 2, 0], color=PINK),\n",
        "        )\n",
        "        vectors.add(DashedLine(v.get_end(), v.get_end() + w.get_vector()))\n",
        "        vectors.add(DashedLine(w.get_end(), w.get_end() + v.get_vector()))\n",
        "        vectors.match_height(vector_spaces)\n",
        "        vectors.next_to(vector_spaces, RIGHT)\n",
        "        vectors.set_stroke(width=2)\n",
        "        # vector_spaces.add(vectors)\n",
        "\n",
        "        inner_product = OldTex(\n",
        "            \"\\\\langle f, g \\\\rangle =\"\n",
        "            \"\\\\int f(x)g(x)dx\"\n",
        "        )\n",
        "        inner_product.match_height(vector_spaces)\n",
        "        inner_product.next_to(vector_spaces, RIGHT)\n",
        "        vector_spaces.add(inner_product)\n",
        "\n",
        "        # Layer 5: Categories\n",
        "        dots = VGroup(Dot(UL), Dot(UR), Dot(RIGHT))\n",
        "        arrows = VGroup(\n",
        "            Arrow(dots[0], dots[1], buff=SMALL_BUFF),\n",
        "            Arrow(dots[1], dots[2], buff=SMALL_BUFF),\n",
        "            Arrow(dots[0], dots[2], buff=SMALL_BUFF),\n",
        "        )\n",
        "        arrows.set_stroke(width=2)\n",
        "        arrow_labels = VGroup(\n",
        "            OldTex(\"m_1\").next_to(arrows[0], UP, SMALL_BUFF),\n",
        "            OldTex(\"m_2\").next_to(arrows[1], RIGHT, SMALL_BUFF),\n",
        "            OldTex(\"m_2 \\\\circ m_1\").rotate(-np.arctan(1 / 2)).move_to(\n",
        "                arrows[2]\n",
        "            ).shift(MED_SMALL_BUFF * DL)\n",
        "        )\n",
        "        categories = VGroup(dots, arrows, arrow_labels)\n",
        "        categories.set_height(layers[0].get_height() - MED_SMALL_BUFF)\n",
        "\n",
        "        # Put it all together\n",
        "        all_content = [\n",
        "            quantities, numbers, algebra,\n",
        "            functions, vector_spaces, categories,\n",
        "        ]\n",
        "\n",
        "        for layer, content in zip(layers, all_content):\n",
        "            content.move_to(layer)\n",
        "            layer.add(content)\n",
        "            layer.content = content\n",
        "\n",
        "        layer_titles = VGroup(*map(TexText, [\n",
        "            \"Quantities\",\n",
        "            \"Numbers\",\n",
        "            \"Algebra\",\n",
        "            \"Functions\",\n",
        "            \"Vector spaces\",\n",
        "            \"Categories\",\n",
        "        ]))\n",
        "        for layer, title in zip(layers, layer_titles):\n",
        "            title.next_to(layer, RIGHT)\n",
        "            layer.add(title)\n",
        "            layer.title = title\n",
        "        layers.titles = layer_titles\n",
        "\n",
        "        layers.center()\n",
        "        layers.to_edge(DOWN)\n",
        "        layers.shift(0.5 * RIGHT)\n",
        "        return layers\n",
        "\n",
        "\n",
        "class FractionsExample(Scene):\n",
        "    def construct(self):\n",
        "        expr = OldTex(\"{2 \\\\over 3}\", \"+\", \"{1 \\\\over 5}\")\n",
        "        expr.scale(1.5)\n",
        "        h_line = DashedLine(ORIGIN, FRAME_WIDTH * RIGHT).center()\n",
        "\n",
        "        quantities = Text(\"Quantities\")\n",
        "        quantities.to_corner(UL, buff=MED_SMALL_BUFF)\n",
        "        quantities.shift(FRAME_HEIGHT * DOWN / 2)\n",
        "        numbers = Text(\"Numbers\")\n",
        "        numbers.to_corner(UL, buff=MED_SMALL_BUFF)\n",
        "\n",
        "        def get_pie(numer, denom, color=BLUE, height=1.5):\n",
        "            pie = VGroup(*(\n",
        "                AnnularSector(\n",
        "                    angle=TAU / denom,\n",
        "                    start_angle=i * TAU / denom,\n",
        "                    inner_radius=0.0,\n",
        "                    outer_radius=1.0,\n",
        "                )\n",
        "                for i in range(denom)\n",
        "            ))\n",
        "            pie.set_stroke(WHITE, 2)\n",
        "            pie.set_fill(BLACK, 1)\n",
        "            pie[:numer].set_fill(color)\n",
        "            pie.set_height(height)\n",
        "            return pie\n",
        "\n",
        "        pies = VGroup(\n",
        "            get_pie(2, 3, color=BLUE_C),\n",
        "            OldTex(\"+\"),\n",
        "            get_pie(1, 5, color=BLUE_D),\n",
        "        )\n",
        "        pies.arrange(RIGHT)\n",
        "        pies.move_to(FRAME_HEIGHT * DOWN / 4)\n",
        "\n",
        "        self.add(expr)\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            expr.animate.move_to(FRAME_HEIGHT * UP / 4),\n",
        "            ShowCreation(h_line),\n",
        "            Write(numbers),\n",
        "        )\n",
        "        self.play(\n",
        "            *(\n",
        "                FadeTransform(expr[i].copy(), pies[i])\n",
        "                for i in range(len(pies))\n",
        "            ),\n",
        "            FadeTransform(numbers.copy(), quantities)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Evaluate bottom\n",
        "        bottom_eq = OldTex(\"=\")\n",
        "        bottom_eq.move_to(pies[2])\n",
        "        self.play(\n",
        "            pies.animate.next_to(bottom_eq, LEFT),\n",
        "            Write(bottom_eq),\n",
        "        )\n",
        "\n",
        "        bottom_rhs = VGroup(\n",
        "            *pies[0][:2].copy(),\n",
        "            pies[2][0].copy()\n",
        "        )\n",
        "        bottom_rhs.generate_target()\n",
        "        bottom_rhs.target[2].shift(pies[0].get_center() - pies[2].get_center())\n",
        "        bottom_rhs.target[2].rotate(TAU * 2 / 3, about_point=pies[0].get_center())\n",
        "        bottom_rhs.target.next_to(bottom_eq, RIGHT)\n",
        "\n",
        "        self.play(MoveToTarget(bottom_rhs))\n",
        "        self.wait()\n",
        "\n",
        "        # Evaluate top\n",
        "        rhs = OldTex(\n",
        "            \"=\",\n",
        "            \"{10 \\\\over 15}\",\n",
        "            \"+\",\n",
        "            \"{3 \\\\over 15}\",\n",
        "            \"=\",\n",
        "            \"{13 \\\\over 15}\"\n",
        "        )\n",
        "        rhs.match_height(expr)\n",
        "        rhs.next_to(expr, RIGHT)\n",
        "        expr.generate_target()\n",
        "        VGroup(expr.target, rhs).set_x(0)\n",
        "\n",
        "        self.play(\n",
        "            MoveToTarget(expr),\n",
        "            FadeIn(rhs, lag_ratio=0.1)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Show overlays\n",
        "        overlays = VGroup()\n",
        "        for pie in (*pies[::2], bottom_rhs):\n",
        "            overlay = get_pie(0, 15)\n",
        "            overlay.set_fill(BLACK, 0)\n",
        "            overlay.set_stroke(WHITE, 1, opacity=0.5)\n",
        "            overlay.move_to(pie)\n",
        "            overlays.add(overlay)\n",
        "\n",
        "        self.play(ShowCreation(overlays))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class CalculusStatement(Scene):\n",
        "    def construct(self):\n",
        "        statement = VGroup(\n",
        "            OldTexText(\n",
        "                \"If $f(x)$ has a local maximum or minimum\\\\\\\\\"\n",
        "                \"at $x_0$, and $f$ is differentiable at $x_0$, then\"\n",
        "            ),\n",
        "            OldTex(\"\\\\frac{df}{dx}(x_0) = 0.\")\n",
        "        )\n",
        "        statement.arrange(DOWN)\n",
        "        statement[1].scale(1.5, about_edge=UP).shift(0.25 * DOWN)\n",
        "        self.add(statement)\n",
        "\n",
        "\n",
        "class ExamplesOfFunctions(Scene):\n",
        "    def construct(self):\n",
        "        plane = NumberPlane((-15, 15, 5), (-10, 10, 5))\n",
        "        plane.scale(0.5)\n",
        "        self.add(plane)\n",
        "\n",
        "        graphs = VGroup(\n",
        "            plane.get_graph(lambda x: -x * (x - 4)),\n",
        "            plane.get_graph(lambda x: x / 3),\n",
        "            plane.get_graph(lambda x: (1 / 3) * x**3 - 2 * x + 1),\n",
        "            plane.get_graph(lambda x: -5 * x * np.exp(-x**2 / 2)),\n",
        "        )\n",
        "        graph_labels = VGroup(\n",
        "            OldTex(\"f(x) = \", \"-x^2 - 4x\"),\n",
        "            OldTex(\"f(x) = \", \"x / 3\"),\n",
        "            OldTex(\"f(x) = \", \"x^3 / 3- 2x + 1\"),\n",
        "            OldTex(\"f(x) = \", \"-(5x) e^{-{1 \\\\over 2} x^2}\"),\n",
        "        )\n",
        "        colors = [YELLOW, RED, TEAL, PINK]\n",
        "        for graph, color, label in zip(graphs, colors, graph_labels):\n",
        "            graph.set_stroke(color)\n",
        "            label.scale(1.5)\n",
        "            label[1].set_color(color)\n",
        "            label.next_to(plane.c2p(0, 5), UR, SMALL_BUFF)\n",
        "            label.set_stroke(BLACK, 3, background=True)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(graph_labels[0]), ShowCreation(graphs[0]),\n",
        "            run_time=1.5\n",
        "        )\n",
        "        self.wait()\n",
        "        for i in range(1, len(graphs)):\n",
        "            self.play(\n",
        "                ReplacementTransform(graphs[i - 1], graphs[i]),\n",
        "                FadeTransform(graph_labels[i - 1], graph_labels[i]),\n",
        "                run_time=0.5\n",
        "            )\n",
        "            self.wait(1.5)\n",
        "\n",
        "\n",
        "class SpecificCases(Scene):\n",
        "    def construct(self):\n",
        "        self.add(FullScreenRectangle())\n",
        "        title = Text(\"Applications for optimization\", font_size=72)\n",
        "        title.to_edge(UP)\n",
        "        self.add(title)\n",
        "\n",
        "        grid = Square().get_grid(1, 2, buff=0)\n",
        "        grid.set_height(6)\n",
        "        grid.set_width(13, stretch=True)\n",
        "        grid.to_edge(DOWN)\n",
        "        grid.set_fill(BLACK, 1)\n",
        "\n",
        "        labels = VGroup(\n",
        "            Text(\"Profit maximization\"),\n",
        "            Text(\"Distance between curves\"),\n",
        "        )\n",
        "        for label, square in zip(labels, grid):\n",
        "            label.next_to(square.get_top(), DOWN)\n",
        "\n",
        "        self.add(grid)\n",
        "        self.add(labels)\n",
        "\n",
        "        # Fill 'em\n",
        "        r_axes = Axes(\n",
        "            x_range=(-3, 3), y_range=(-3, 3),\n",
        "            width=6, height=4.5,\n",
        "            axis_config={\"include_tip\": False},\n",
        "        )\n",
        "        r_axes.move_to(grid[1], DOWN).shift(0.25 * UP)\n",
        "        circle = Circle()\n",
        "        circle.set_height(get_norm(r_axes.c2p(0, 0) - r_axes.c2p(0, 2)))\n",
        "        circle.move_to(r_axes.c2p(1, 1))\n",
        "        circle.set_stroke(YELLOW)\n",
        "        parabola = r_axes.get_graph(\n",
        "            lambda x: 0.2 * (x**2 - 4)\n",
        "        )\n",
        "        parabola.set_stroke(RED_D)\n",
        "        smallest_line = Line(\n",
        "            circle.pfp(0.83),\n",
        "            parabola.pfp(0.76),\n",
        "            stroke_width=3\n",
        "        )\n",
        "\n",
        "        self.add(circle, parabola, smallest_line)\n",
        "\n",
        "        l_axes = Axes(\n",
        "            (0, 10),\n",
        "            (-3, 8),\n",
        "            width=6, height=4.5,\n",
        "        )\n",
        "        l_axes.move_to(grid[0], DOWN).shift(0.25 * UP)\n",
        "        x_label = Text(\"production\", font_size=24)\n",
        "        x_label.next_to(l_axes.x_axis, DOWN, SMALL_BUFF, aligned_edge=RIGHT)\n",
        "        y_label = Text(\"profit\", font_size=24)\n",
        "        y_label.next_to(l_axes.y_axis, RIGHT, SMALL_BUFF, aligned_edge=UP)\n",
        "        graph = l_axes.get_graph(\n",
        "            lambda x: -0.07 * x * (x - 4) * (x - 9.5)\n",
        "        )\n",
        "        graph.set_stroke(GREEN, 3)\n",
        "\n",
        "        self.add(l_axes, x_label, y_label, graph)\n",
        "\n",
        "\n",
        "class ConcreteToAbstract(Scene):\n",
        "    def construct(self):\n",
        "        self.add(\n",
        "            get_h_line().move_to(FRAME_HEIGHT * UP / 6),\n",
        "            get_h_line().move_to(FRAME_HEIGHT * DOWN / 6),\n",
        "        )\n",
        "\n",
        "        labels = VGroup(\n",
        "            Text(\"Algebra\"),\n",
        "            Text(\"Numbers\"),\n",
        "            Text(\"Quantities\"),\n",
        "        )\n",
        "        for i, label in enumerate(labels):\n",
        "            label.scale(30 / label.font_size)\n",
        "            label.to_corner(UL, buff=SMALL_BUFF)\n",
        "            label.shift(i * FRAME_HEIGHT * DOWN / 3)\n",
        "\n",
        "        self.add(labels)\n",
        "\n",
        "        # Algebra\n",
        "        expr = OldTex(\n",
        "            \"x^2 - y^2 = (x + y)(x - y)\",\n",
        "            tex_to_color_map={\"x\": BLUE_D, \"y\": BLUE_B}\n",
        "        )\n",
        "        expr.scale(1.5)\n",
        "        expr.move_to(FRAME_HEIGHT * UP / 3)\n",
        "        expr.to_edge(LEFT, buff=LARGE_BUFF)\n",
        "        self.add(expr)\n",
        "\n",
        "        # Numbers\n",
        "        tricks = VGroup(\n",
        "            OldTex(\"143 = (12 + 1)(12 - 1) = 13 \\\\cdot 11\"),\n",
        "            OldTex(\"3{,}599 = (60 + 1)(60 - 1) = 61 \\\\cdot 59\"),\n",
        "            OldTex(\"9{,}991 = (100 + 3)(100 - 3) = 103 \\\\cdot 97\"),\n",
        "        )\n",
        "        tricks.arrange(DOWN, aligned_edge=LEFT)\n",
        "        tricks[0].shift((tricks[1][0][5].get_x() - tricks[0][0][3].get_x()) * RIGHT)\n",
        "        tricks.set_height(FRAME_HEIGHT / 3 - 1)\n",
        "        tricks.center()\n",
        "        brace = Brace(tricks, LEFT)\n",
        "        words = OldTexText(\"Factoring\\\\\\\\tricks\", font_size=30)\n",
        "        words.set_color(GREY_A)\n",
        "        words.next_to(brace, LEFT)\n",
        "        VGroup(tricks, brace, words).to_edge(LEFT, buff=MED_LARGE_BUFF)\n",
        "\n",
        "        self.add(tricks, brace, words)\n",
        "        self.wait()\n",
        "\n",
        "        # Arrows\n",
        "        arrow = Arrow(\n",
        "            ORIGIN, FRAME_HEIGHT * UP / 3,\n",
        "            path_arc=60 * DEGREES,\n",
        "            thickness=0.15,\n",
        "            fill_color=YELLOW,\n",
        "            stroke_color=YELLOW,\n",
        "        )\n",
        "        up_arrows = VGroup(arrow.copy().shift(FRAME_HEIGHT * DOWN / 3), arrow)\n",
        "        up_arrows.to_edge(RIGHT, buff=1.5)\n",
        "\n",
        "        self.play(Write(up_arrows, lag_ratio=0.5))\n",
        "        self.wait()\n",
        "\n",
        "        top_words = Text(\"Once you understand\\n algebra...\")\n",
        "        top_words.next_to(up_arrows, UP)\n",
        "        top_words.shift_onto_screen()\n",
        "        top_words.set_color(YELLOW)\n",
        "\n",
        "        self.play(FadeIn(top_words, lag_ratio=0.05))\n",
        "        self.play(LaggedStartMap(Rotate, up_arrows, angle=PI, axis=RIGHT))\n",
        "        self.wait()\n",
        "\n",
        "        new_top_words = Text(\"If you're learning\\n algebra.\")\n",
        "        new_top_words.move_to(top_words)\n",
        "        new_top_words.match_color(top_words)\n",
        "        self.play(\n",
        "            FadeTransform(top_words, new_top_words),\n",
        "            LaggedStartMap(Rotate, up_arrows, angle=PI, axis=RIGHT)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        self.embed()\n",
        "\n",
        "\n",
        "class DifferenceOfSquares(Scene):\n",
        "    def construct(self):\n",
        "        x = 6\n",
        "        y = 1\n",
        "        squares = VGroup(*[\n",
        "            VGroup(*[\n",
        "                Square()\n",
        "                for x in range(x)\n",
        "            ]).arrange(RIGHT, buff=0)\n",
        "            for y in range(x)\n",
        "        ]).arrange(DOWN, buff=0)\n",
        "        squares.set_height(4)\n",
        "        squares.set_stroke(BLUE_D, 3)\n",
        "        squares.set_fill(BLUE_D, 0.5)\n",
        "\n",
        "        last_row_parts = VGroup()\n",
        "        for row in squares[-y:]:\n",
        "            row[-y:].set_color(GREY_E)\n",
        "            row[:-y].set_color(BLUE_B)\n",
        "            last_row_parts.add(row[:-y])\n",
        "        squares.to_edge(LEFT)\n",
        "\n",
        "        arrow = Vector(RIGHT, color=WHITE)\n",
        "        arrow.shift(1.5 * LEFT)\n",
        "        squares.next_to(arrow, LEFT)\n",
        "\n",
        "        new_squares = squares[:-y].copy()\n",
        "        new_squares.next_to(arrow, RIGHT)\n",
        "        new_squares.align_to(squares, UP)\n",
        "\n",
        "        x1 = OldTex(str(x)).set_color(BLUE_D)\n",
        "        x2 = x1.copy()\n",
        "        x1.next_to(squares, UP)\n",
        "        x2.next_to(squares, LEFT)\n",
        "        y1 = OldTex(str(y)).set_color(BLUE_B)\n",
        "        y2 = y1.copy()\n",
        "        y1.next_to(squares[-int(np.ceil(y / 2))], RIGHT)\n",
        "        y2.next_to(squares[-1][-int(np.ceil(y / 2))], DOWN)\n",
        "\n",
        "        xpy = OldTex(str(x), \"+\", str(y))\n",
        "        xmy = OldTex(str(x), \"-\", str(y))\n",
        "        for mob in xpy, xmy:\n",
        "            mob[0].set_color(BLUE)\n",
        "            mob[2].set_color(BLUE_B)\n",
        "        xpy.next_to(new_squares, UP)\n",
        "        # xmy.rotate(90 * DEGREES)\n",
        "        xmy.next_to(new_squares, RIGHT)\n",
        "        xmy.shift(squares[0][0].get_width() * RIGHT)\n",
        "\n",
        "        self.add(squares, x1, x2, y1, y2)\n",
        "        self.play(\n",
        "            ReplacementTransform(\n",
        "                squares[:-y].copy().set_fill(opacity=0),\n",
        "                new_squares\n",
        "            ),\n",
        "            ShowCreation(arrow),\n",
        "            lag_ratio=0,\n",
        "        )\n",
        "        last_row_parts = last_row_parts.copy()\n",
        "        last_row_parts.save_state()\n",
        "        last_row_parts.set_fill(opacity=0)\n",
        "        self.play(\n",
        "            last_row_parts.restore,\n",
        "            last_row_parts.rotate, -90 * DEGREES,\n",
        "            last_row_parts.next_to, new_squares, RIGHT, {\"buff\": 0},\n",
        "            lag_ratio=0,\n",
        "        )\n",
        "        self.play(Write(xmy), Write(xpy))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class AbstractVectorSpace(Scene):\n",
        "    def construct(self):\n",
        "        self.add(get_h_line())\n",
        "        top_title = Text(\"Abstract vector space axioms\")\n",
        "        top_title.to_edge(UP, buff=MED_SMALL_BUFF)\n",
        "        low_title = Text(\"Concrete vectors\")\n",
        "        low_title.next_to(ORIGIN, DOWN, buff=MED_SMALL_BUFF)\n",
        "        self.add(top_title, low_title)\n",
        "\n",
        "        # Vectors\n",
        "        kw = {\"bracket_h_buff\": 0.1}\n",
        "        columns = VGroup(\n",
        "            Matrix([[\"1\"], [\"1\"]], **kw).set_color(BLUE_B),\n",
        "            OldTex(\"+\"),\n",
        "            Matrix([[\"-2\"], [\"3\"]], **kw).set_color(BLUE_D),\n",
        "            OldTex(\"=\"),\n",
        "            Matrix([[\"1 - 2\"], [\"1 + 3\"]], **kw).set_color(GREEN),\n",
        "        )\n",
        "        columns.arrange(RIGHT, buff=SMALL_BUFF)\n",
        "        columns.next_to(low_title, DOWN, LARGE_BUFF)\n",
        "        columns.to_edge(LEFT)\n",
        "\n",
        "        arrows = VGroup(\n",
        "            Arrow(ORIGIN, (1, 1), fill_color=BLUE_B, buff=0),\n",
        "            Arrow((1, 1), (-1, 4), fill_color=BLUE_D, buff=0),\n",
        "            Arrow(ORIGIN, (-1, 4), fill_color=GREEN, buff=0),\n",
        "        )\n",
        "        arrows.match_height(columns)\n",
        "        arrows.scale(1.5)\n",
        "        arrows.match_y(columns)\n",
        "        arrows.match_x(low_title)\n",
        "\n",
        "        funcs = OldTex(\n",
        "            \"(f + g)(x) = f(x) + g(x)\",\n",
        "            tex_to_color_map={\"f\": BLUE_B, \"g\": BLUE_D}\n",
        "        )\n",
        "        funcs.next_to(arrows, RIGHT, LARGE_BUFF)\n",
        "\n",
        "        self.add(columns)\n",
        "        self.add(arrows)\n",
        "        self.add(funcs)\n",
        "\n",
        "        # Axioms\n",
        "        u_tex = \"\\\\vec{\\\\textbf{u}}\"\n",
        "        w_tex = \"\\\\vec{\\\\textbf{w}}\"\n",
        "        v_tex = \"\\\\vec{\\\\textbf{v}}\"\n",
        "        axioms = VGroup(*it.starmap(Tex, [\n",
        "            (\n",
        "                \"1. \\\\,\",\n",
        "                u_tex, \"+\", \"(\", v_tex, \"+\", w_tex, \")=(\",\n",
        "                u_tex, \"+\", v_tex, \")+\", w_tex\n",
        "            ),\n",
        "            (\n",
        "                \"2. \\\\,\",\n",
        "                v_tex, \"+\", w_tex, \"=\", w_tex, \"+\", v_tex\n",
        "            ),\n",
        "            (\n",
        "                \"3. \\\\,\",\n",
        "                \"\\\\textbf{0}+\", v_tex,\n",
        "                \"=\", v_tex, \"\\\\text{ for all }\", v_tex\n",
        "            ),\n",
        "            (\n",
        "                \"4. \\\\,\",\n",
        "                \"\\\\forall\", v_tex, \"\\\\;\\\\exists\", w_tex,\n",
        "                \"\\\\text{ s.t. }\", v_tex, \"+\", w_tex, \"=\\\\textbf{0}\"\n",
        "            ),\n",
        "            (\n",
        "                \"5. \\\\,\",\n",
        "                \"a\", \"(\", \"b\", v_tex, \")=(\", \"a\", \"b\", \")\", v_tex\n",
        "            ),\n",
        "            (\n",
        "                \"6. \\\\,\",\n",
        "                \"1\", v_tex, \"=\", v_tex\n",
        "            ),\n",
        "            (\n",
        "                \"7. \\\\,\",\n",
        "                \"a\", \"(\", v_tex, \"+\", w_tex, \")\", \"=\",\n",
        "                \"a\", v_tex, \"+\", \"a\", w_tex\n",
        "            ),\n",
        "            (\n",
        "                \"8. \\\\,\",\n",
        "                \"(\", \"a\", \"+\", \"b\", \")\", v_tex, \"=\",\n",
        "                \"a\", v_tex, \"+\", \"b\", v_tex\n",
        "            ),\n",
        "        ]))\n",
        "        for axiom in axioms:\n",
        "            axiom.set_color_by_tex_to_color_map({\n",
        "                u_tex: BLUE_B,\n",
        "                w_tex: BLUE_D,\n",
        "                v_tex: GREEN,\n",
        "            })\n",
        "        axioms[:4].arrange(DOWN, buff=MED_LARGE_BUFF, aligned_edge=LEFT)\n",
        "        axioms[4:].arrange(DOWN, buff=MED_LARGE_BUFF, aligned_edge=LEFT)\n",
        "        axioms[4:].next_to(axioms[:4], RIGHT, buff=1.5)\n",
        "        axioms.set_height(2.5)\n",
        "        axioms.next_to(top_title, DOWN)\n",
        "\n",
        "        for axiom in axioms:\n",
        "            self.play(FadeIn(axiom))\n",
        "\n",
        "        self.add(axioms)\n",
        "\n",
        "\n",
        "class Nicheness(Scene):\n",
        "    def construct(self):\n",
        "        words = OldTexText(\n",
        "            \"Perceived \", \"nicheness\",\n",
        "            \" $>$ \",\n",
        "            \"Actual \", \"nichness\",\n",
        "        )\n",
        "        words[:2].set_color(BLUE_B)\n",
        "        words[3:].set_color(BLUE_D)\n",
        "\n",
        "        self.add(words[:2])\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeTransformPieces(words[:2].copy(), words[3:], path_arc=PI / 2),\n",
        "            GrowFromCenter(words[2]),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class TransitionToProductionQuality(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.play(\n",
        "            self.students[0].change(\"pondering\"),\n",
        "            self.students[2].change(\"pondering\"),\n",
        "        )\n",
        "        self.student_says(\n",
        "            OldTexText(\"What parts of\\\\\\\\production quality matter?\"),\n",
        "            index=1\n",
        "        )\n",
        "        self.play(\n",
        "            self.teacher.change(\"happy\"),\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class SurfaceExample(Scene):\n",
        "    CONFIG = {\n",
        "        \"camera_class\": ThreeDCamera,\n",
        "    }\n",
        "\n",
        "    def construct(self):\n",
        "        torus1 = Torus(r1=1, r2=1)\n",
        "        torus2 = Torus(r1=3, r2=1)\n",
        "        sphere = Sphere(radius=2.5, resolution=torus1.resolution)\n",
        "        # You can texture a surface with up to two images, which will\n",
        "        # be interpreted as the side towards the light, and away from\n",
        "        # the light.  These can be either urls, or paths to a local file\n",
        "        # in whatever you've set as the image directory in\n",
        "        # the custom_config.yml file\n",
        "\n",
        "        day_texture = \"EarthTextureMap\"\n",
        "        night_texture = \"NightEarthTextureMap\"\n",
        "\n",
        "        surfaces = [\n",
        "            TexturedSurface(surface, day_texture, night_texture)\n",
        "            for surface in [sphere, torus1, torus2]\n",
        "        ]\n",
        "\n",
        "        for mob in surfaces:\n",
        "            mob.mesh = SurfaceMesh(mob)\n",
        "            mob.mesh.set_stroke(BLUE, 1, opacity=0.5)\n",
        "\n",
        "        # Set perspective\n",
        "        frame = self.camera.frame\n",
        "        frame.set_euler_angles(\n",
        "            theta=-30 * DEGREES,\n",
        "            phi=70 * DEGREES,\n",
        "        )\n",
        "\n",
        "        surface = surfaces[0]\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(surface),\n",
        "            ShowCreation(surface.mesh, lag_ratio=0.01, run_time=3),\n",
        "        )\n",
        "        for mob in surfaces:\n",
        "            mob.add(mob.mesh)\n",
        "        surface.save_state()\n",
        "        self.play(Rotate(surface, PI / 2), run_time=2)\n",
        "        for mob in surfaces[1:]:\n",
        "            mob.rotate(PI / 2)\n",
        "\n",
        "        self.play(\n",
        "            Transform(surface, surfaces[1]),\n",
        "            run_time=3\n",
        "        )\n",
        "\n",
        "        self.play(\n",
        "            Transform(surface, surfaces[2]),\n",
        "            # Move camera frame during the transition\n",
        "            frame.animate.increment_phi(-10 * DEGREES),\n",
        "            frame.animate.increment_theta(-20 * DEGREES),\n",
        "            run_time=3\n",
        "        )\n",
        "        # Add ambient rotation\n",
        "        frame.add_updater(lambda m, dt: m.increment_theta(-0.1 * dt))\n",
        "\n",
        "        # Play around with where the light is\n",
        "\n",
        "        light = self.camera.light_source\n",
        "        self.add(light)\n",
        "        light.save_state()\n",
        "        self.play(light.animate.move_to(3 * IN), run_time=5)\n",
        "        self.play(light.animate.shift(10 * OUT), run_time=5)\n",
        "\n",
        "\n",
        "class Spotlight(Scene):\n",
        "    def construct(self):\n",
        "        self.add(FullScreenRectangle())\n",
        "        screen = ScreenRectangle()\n",
        "        screen.set_height(6.0)\n",
        "        screen.set_stroke(WHITE, 2)\n",
        "        screen.set_fill(BLACK, 1)\n",
        "        screen.to_edge(DOWN)\n",
        "        animated_screen = AnimatedBoundary(screen)\n",
        "        self.add(screen, animated_screen)\n",
        "        self.wait(16)\n",
        "\n",
        "\n",
        "class BadManimExample(Scene):\n",
        "    def construct(self):\n",
        "        words = OldTexText(\n",
        "            \"Does any of this \",\n",
        "            \"need to be \",\n",
        "            \"animated?\\\\\\\\\",\n",
        "            \"Much less programatically?\"\n",
        "        )\n",
        "        words[-1].shift(MED_SMALL_BUFF * DOWN)\n",
        "        words.set_width(FRAME_WIDTH - 2)\n",
        "\n",
        "        self.play(Write(words[0]), run_time=1)\n",
        "        self.play(FadeIn(words[1], scale=10, shift=0.25 * UP))\n",
        "        self.play(TransformMatchingShapes(words[0].copy(), words[2], path_arc=PI / 2))\n",
        "        self.wait()\n",
        "        self.play(Transform(\n",
        "            VGroup(*words[0], *words[1], *words[2]).copy(),\n",
        "            words[3],\n",
        "            lag_ratio=0.03,\n",
        "            run_time=1\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class WhereCanIEngageWithOthers(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.student_says(\n",
        "            OldTexText(\"Where can I find\\\\\\\\others joining SoME1?\"),\n",
        "            index=0,\n",
        "            added_anims=[\n",
        "                self.students[1].change(\"pondering\", UL),\n",
        "                self.students[2].change(\"pondering\", UL),\n",
        "            ]\n",
        "        )\n",
        "        self.play(\n",
        "            self.teacher.change(\"tease\"),\n",
        "        )\n",
        "        self.wait(4)\n",
        "\n",
        "\n",
        "class BeTheFirst(Scene):\n",
        "    def construct(self):\n",
        "        circ = Circle(color=RED)\n",
        "        circ.stretch(5, 0)\n",
        "        circ.set_height(0.4)\n",
        "\n",
        "        circ.to_edge(LEFT)\n",
        "        words = Text(\"Be the first!\")\n",
        "        words.next_to(circ, RIGHT, aligned_edge=UP)\n",
        "        words.set_color(RED)\n",
        "\n",
        "        self.play(ShowCreation(circ))\n",
        "        self.play(Write(words))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class SoME1EndScreen(PatreonEndScreen):\n",
        "    pass"
    ]
}