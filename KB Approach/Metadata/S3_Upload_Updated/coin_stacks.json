{
    "topic": "demonstrates the concept of a tally stack, which is a visual representation of the number",
    "code": [
        "from mobject.geometry import *\n",
        "from mobject.svg.tex_mobject import *\n",
        "from _2018.eop.reusables.upright_coins import *\n",
        "\n",
        "\n",
        "class CoinStack(VGroup):\n",
        "    CONFIG = {\n",
        "        \"coin_thickness\": COIN_THICKNESS,\n",
        "        \"size\": 5,\n",
        "        \"face\": FlatCoin,\n",
        "    }\n",
        "\n",
        "    def init_points(self):\n",
        "        for n in range(self.size):\n",
        "            coin = self.face(thickness = self.coin_thickness)\n",
        "            coin.shift(n * self.coin_thickness * UP)\n",
        "            self.add(coin)\n",
        "        if self.size == 0:\n",
        "            point = VectorizedPoint()\n",
        "            self.add(point)\n",
        "\n",
        "class HeadsStack(CoinStack):\n",
        "    CONFIG = {\n",
        "        \"face\": FlatHeads\n",
        "    }\n",
        "\n",
        "class TailsStack(CoinStack):\n",
        "    CONFIG = {\n",
        "        \"face\": FlatTails\n",
        "    }\n",
        "\n",
        "\n",
        "\n",
        "class DecimalTally(TexText):\n",
        "\n",
        "    def __init__(self, heads, tails, **kwargs):\n",
        "\n",
        "        TexText.__init__(self, str(heads), \"\\\\textemdash\\,\", str(tails), **kwargs)\n",
        "        self[0].set_color(COLOR_HEADS)\n",
        "        self[-1].set_color(COLOR_TAILS)\n",
        "        # this only works for single-digit tallies\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "class TallyStack(VGroup):\n",
        "    CONFIG = {\n",
        "        \"coin_thickness\": COIN_THICKNESS,\n",
        "        \"show_decimals\": True\n",
        "    }\n",
        "\n",
        "    def __init__(self, h, t, anchor = ORIGIN, **kwargs):\n",
        "        self.nb_heads = h\n",
        "        self.nb_tails = t\n",
        "        self.anchor = anchor\n",
        "        VGroup.__init__(self,**kwargs)\n",
        "\n",
        "    def init_points(self):\n",
        "        stack1 = HeadsStack(size = self.nb_heads, coin_thickness = self.coin_thickness)\n",
        "        stack2 = TailsStack(size = self.nb_tails, coin_thickness = self.coin_thickness)\n",
        "        stack1.next_to(self.anchor, LEFT, buff = 0.5 * SMALL_BUFF)\n",
        "        stack2.next_to(self.anchor, RIGHT, buff = 0.5 * SMALL_BUFF)\n",
        "        stack1.align_to(self.anchor, DOWN)\n",
        "        stack2.align_to(self.anchor, DOWN)\n",
        "        self.heads_stack = stack1\n",
        "        self.tails_stack = stack2\n",
        "        self.add(stack1, stack2)\n",
        "        self.background_rect = background_rect = RoundedRectangle(\n",
        "            width = TALLY_BACKGROUND_WIDTH,\n",
        "            height = TALLY_BACKGROUND_WIDTH,\n",
        "            corner_radius = 0.1,\n",
        "            fill_color = TALLY_BACKGROUND_COLOR,\n",
        "            fill_opacity = 1.0,\n",
        "            stroke_width = 3\n",
        "        ).align_to(self.anchor, DOWN).shift(0.1 * DOWN)\n",
        "        self.add_to_back(background_rect)\n",
        "\n",
        "        self.decimal_tally = DecimalTally(self.nb_heads, self.nb_tails)\n",
        "        self.position_decimal_tally(self.decimal_tally)\n",
        "        if self.show_decimals:\n",
        "            self.add(self.decimal_tally)\n",
        "\n",
        "    def position_decimal_tally(self, decimal_tally):\n",
        "        decimal_tally.match_width(self.background_rect)\n",
        "        decimal_tally.scale(0.6)\n",
        "        decimal_tally.next_to(self.background_rect.get_top(), DOWN, buff = 0.15)\n",
        "        return decimal_tally\n",
        "\n",
        "\n",
        "    def move_anchor_to(self, new_anchor):\n",
        "        for submob in self.submobjects:\n",
        "            submob.shift(new_anchor - self.anchor)\n",
        "\n",
        "        self.anchor = new_anchor\n",
        "        self.position_decimal_tally(self.decimal_tally)\n",
        "\n",
        "        return self\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n",
        "\n"
    ]
}