{
    "topic": "the mathematical concept of piles of research to be done in mathematics.",
    "code": [
        "from manim_imports_ext import *\n",
        "from _2025.cosmic_distance.planets import *\n",
        "\n",
        "\n",
        "class TerenceLabel(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        title = Text(\"Terence Tao\", font_size=72)\n",
        "        title.to_edge(UP)\n",
        "        title.set_fill(border_width=3)\n",
        "        title.set_backstroke(BLACK, 5)\n",
        "\n",
        "        subtitle = VGroup(\n",
        "            Text(\"Professor of Mathematics at UCLA\", font_size=42),\n",
        "        )\n",
        "        subtitle.next_to(title, DOWN, LARGE_BUFF, aligned_edge=LEFT)\n",
        "        subtitle.set_fill(border_width=1.5)\n",
        "        subtitle.set_backstroke(BLACK, 3)\n",
        "\n",
        "        arrow = Arrow(title.get_bottom(), title.get_bottom() + (2.5, -1.0, 0), thickness=5, path_arc=45 * DEG)\n",
        "        arrow.set_fill(WHITE, 1)\n",
        "        arrow.set_backstroke(BLACK, 2)\n",
        "\n",
        "        self.add(title)\n",
        "        self.wait()\n",
        "        self.play(FadeIn(subtitle, lag_ratio=0.1, run_time=2))\n",
        "        self.wait()\n",
        "        return\n",
        "\n",
        "        self.play(Write(arrow, run_time=2))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class IntroducingTao(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Add images\n",
        "        with_erdos = ImageMobject(\"TerryTaoPaulErdos\")\n",
        "        at_imo = ImageMobject(\"TerryTaoIMO\")\n",
        "        fields_medal = ImageMobject(\"TerryTaoFieldsMedal\")\n",
        "        images = Group(with_erdos, at_imo, fields_medal)\n",
        "        for image in images:\n",
        "            image.set_height(3)\n",
        "\n",
        "        images.arrange(RIGHT, buff=1.5)\n",
        "        images.set_width(FRAME_WIDTH - 1)\n",
        "        images[1].scale(1.25, about_edge=DOWN)\n",
        "\n",
        "        labels = VGroup(\n",
        "            Text(\"Age 10, with Paul Erd\u0151s\"),\n",
        "            Text(\"Age 13, Gold medal at the\\nInternationalMath Olympiad\"),\n",
        "            Text(\"Age 31, Receiving the\\n2006 Fields Medal\"),\n",
        "        )\n",
        "        for image, label in zip(images, labels):\n",
        "            label.scale(0.6)\n",
        "            label.next_to(image, DOWN)\n",
        "            self.play(\n",
        "                FadeIn(image, 0.25 * UP, scale=1.2),\n",
        "                FadeIn(label, lag_ratio=0.1)\n",
        "            )\n",
        "            self.wait(0.5)\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class PilesOfResearchTopics(InteractiveScene):\n",
        "    def construct(self):\n",
        "        folder = '/Users/grant/3Blue1Brown Dropbox/3Blue1Brown/videos/2025/cosmic_distance/supplements/TerenceTaoPapers'\n",
        "        images = Group()\n",
        "        for n, filename in enumerate(os.listdir(folder)):\n",
        "            image = ImageMobject(os.path.join(folder, filename))\n",
        "            image.set_opacity(1.0)\n",
        "            image.set_height(6)\n",
        "            image.move_to((3 * n % 10) * 1.0 * RIGHT + n * 0.1 * DOWN)\n",
        "            border = SurroundingRectangle(image, buff=0)\n",
        "            border.set_stroke(GREY_C, 3)\n",
        "            border.set_anti_alias_width(5)\n",
        "            group = Group(image, border)\n",
        "\n",
        "            images.add(group)\n",
        "\n",
        "        images.center().to_edge(UP, buff=0.25)\n",
        "\n",
        "        self.play(LaggedStartMap(FadeIn, images, shift=0.2 * UP, lag_ratio=0.5, run_time=12))\n",
        "\n",
        "\n",
        "class AskingTaoForTopics(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        morty = Mortimer()\n",
        "        morty.to_edge(DOWN).set_x(4)\n",
        "        morty.body.insert_n_curves(100)\n",
        "\n",
        "        tau = TauCreature(\"plain\")\n",
        "        tau[4].set_fill(border_width=1)\n",
        "        tau.set_height(3)\n",
        "        tau.to_edge(DOWN)\n",
        "        tau.set_x(-4)\n",
        "\n",
        "        self.add(morty)\n",
        "        self.add(tau)\n",
        "\n",
        "        self.play(morty.change(\"raise_right_hand\"))\n",
        "        self.play(Transform(tau, TauCreature(\"pondering\").move_to(tau)))\n",
        "        self.wait()\n",
        "        self.play(Blink(morty))\n",
        "        self.play(tau[:4].animate.stretch(0, 1, about_edge=DOWN), rate_func=squish_rate_func(there_and_back, 0.4, 0.6))\n",
        "        self.wait()\n",
        "\n",
        "        self.play(\n",
        "            Transform(tau, TauCreature(\"hooray\").move_to(tau)),\n",
        "            FadeIn(tau.get_bubble(\"How about the\\nCosmic Distance Ladder?\", bubble_type=SpeechBubble), lag_ratio=0.1, run_time=2),\n",
        "            morty.change(\"tease\", look_at=ORIGIN),\n",
        "        )\n",
        "        self.play(Blink(morty))\n",
        "        self.play(tau[:4].animate.stretch(0, 1, about_edge=DOWN), rate_func=squish_rate_func(there_and_back, 0.4, 0.6))\n",
        "\n",
        "\n",
        "class TableOfContents(InteractiveScene):\n",
        "    def construct(self):\n",
        "        items = VGroup(\n",
        "            Text(\"Rung 1: Earth\"),\n",
        "            Text(\"Rung 2: Moon\"),\n",
        "            Text(\"Rung 3: Sun\"),\n",
        "            Text(\"Rung 4: Shapes of orbits\"),\n",
        "            Text(\"Rung 5: Distances to planets\"),\n",
        "            Text(\"Rung 6: Speed of light\"),\n",
        "            Text(\"Rung 7: Nearby stars\"),\n",
        "            Text(\"Rung 8: Milky way\"),\n",
        "            Text(\"Rung 9: Nearby Galaxies\"),\n",
        "            Text(\"Rung 10: Distant galaxies\"),\n",
        "        )\n",
        "        items.arrange(DOWN, aligned_edge=LEFT, buff=0.5)\n",
        "        items.set_height(FRAME_HEIGHT - 1)\n",
        "        items.to_edge(LEFT)\n",
        "\n",
        "        self.play(LaggedStartMap(FadeIn, items, shift=0.5 * LEFT, lag_ratio=0.1))\n",
        "        self.wait()\n",
        "\n",
        "        # Slow pan through\n",
        "        items.save_state()\n",
        "        highlight_points = Group()\n",
        "\n",
        "        def update_item(item):\n",
        "            y_diff = item.get_y() - item.highlight_point.get_y()\n",
        "            alpha = np.exp(-(2 * y_diff)**2)\n",
        "            item.set_height(interpolate(0.3, item.start_height, alpha), about_edge=LEFT)\n",
        "            item.set_opacity(interpolate(0.5, 1, alpha))\n",
        "\n",
        "        for item in items:\n",
        "            item.start_height = item.get_height()\n",
        "            item.highlight_point = Point(item.get_center())\n",
        "            item.add_updater(update_item)\n",
        "\n",
        "            highlight_points.add(item.highlight_point)\n",
        "\n",
        "        self.play(\n",
        "            *(item.highlight_point.animate.set_y(items[0].get_y()) for item in items),\n",
        "            run_time=2\n",
        "        )\n",
        "        self.play(\n",
        "            *(item.highlight_point.animate.set_y(-4) for item in items),\n",
        "            run_time=20,\n",
        "            rate_func=linear\n",
        "        )\n",
        "        self.play(\n",
        "            *(item.highlight_point.animate.match_y(item) for item in items),\n",
        "            run_time=2\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Show the two parts\n",
        "        brace1 = Brace(items[:4], RIGHT)\n",
        "        brace2 = Brace(items[4:], RIGHT)\n",
        "\n",
        "        self.play(\n",
        "            GrowFromCenter(brace1),\n",
        "            *(item.highlight_point.animate.shift(DOWN) for item in items[4:])\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            *(item.highlight_point.animate.shift(DOWN) for item in items[:4]),\n",
        "            *(item.highlight_point.animate.shift(UP) for item in items[4:]),\n",
        "            ReplacementTransform(brace1, brace2),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeOut(brace2),\n",
        "            # *(item.highlight_point.animate.shift(DOWN) for item in items[4:]),\n",
        "            # *(item.highlight_point.animate.shift(UP) for item in items[:1]),\n",
        "        )\n",
        "        # self.wait()\n",
        "        items.clear_updaters()\n",
        "\n",
        "        # One by one\n",
        "        for n in range(len(items)):\n",
        "            items.target = items.generate_target()\n",
        "            for k, item in enumerate(items.target):\n",
        "                if k == n:\n",
        "                    item.set_height(0.45, about_edge=LEFT).set_opacity(1)\n",
        "                else:\n",
        "                    item.set_height(0.25, about_edge=LEFT).set_opacity(0.5)\n",
        "            self.play(MoveToTarget(items))\n",
        "            self.wait()\n",
        "        self.wait(2)\n",
        "\n",
        "\n",
        "class MainCharacterTimeline(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Add the timeline\n",
        "        frame = self.frame\n",
        "\n",
        "        timeline = NumberLine(\n",
        "            (-500, 2000, 10),\n",
        "            tick_size=0.05,\n",
        "            longer_tick_multiple=2,\n",
        "            big_tick_spacing=100,\n",
        "            unit_size=1 / 50\n",
        "        )\n",
        "        numbers =timeline.add_numbers(\n",
        "            range(-500, 2100, 100),\n",
        "            group_with_commas=False,\n",
        "            font_size=20,\n",
        "            buff=0.15\n",
        "        )\n",
        "        for number in numbers[:5]:\n",
        "            number.remove(number[0])\n",
        "            bce = Text(\"BCE\")\n",
        "            bce.set_height(0.75 * number.get_height())\n",
        "            bce.next_to(number, RIGHT, buff=0.05, aligned_edge=DOWN)\n",
        "            number.add(bce)\n",
        "            number.shift(0.15 * LEFT)\n",
        "\n",
        "        self.add(timeline)\n",
        "        frame.move_to(timeline.n2p(-175))\n",
        "\n",
        "        # Characters\n",
        "        characters = [\n",
        "            (\"Aristotle\", -384, -322, 0.2, BLUE_D),\n",
        "            (\"Eratosthenes\", -276, -194, 0.2, BLUE_B),\n",
        "            (\"Aristarchus\", -310, -230, 0.5, BLUE_C),\n",
        "            (\"Kepler\", 1571, 1630, 0.2, RED_C),\n",
        "            (\"Copernicus\", 1473, 1543, 0.2, RED_A),\n",
        "            (\"Brahe\", 1546, 1601, 0.5, RED_E),\n",
        "            (\"James Cook\", 1728, 1779, 0.2, GREEN_E),\n",
        "            (\"Edmond Halley\", 1656, 1742, 0.5, GREEN_C),\n",
        "            (\"Ole R\u00f8mer\", 1644, 1710, 0.2, BLUE_D),\n",
        "            (\"Huygens\", 1629, 1695, 0.5, BLUE_C),\n",
        "            (\"Friedrich Bessel\", 1784, 1846, 0.2, GREEN_B),\n",
        "            (\"Henrietta Leavitt\", 1868, 1921, 0.5, RED_D),\n",
        "            (\"Edwin Hubble\", 1889, 1953, 0.2, RED_C),\n",
        "        ]\n",
        "        character_labels = VGroup()\n",
        "        for name, start, end, offset, color in characters:\n",
        "            line = Line(timeline.n2p(start), timeline.n2p(end))\n",
        "            line.set_stroke(color, 2)\n",
        "            line.shift(offset * UP)\n",
        "            # name_mob = Text(name, font_size=24)\n",
        "            name_mob = Text(name, font_size=18)\n",
        "            name_mob.set_color(color)\n",
        "            name_mob.next_to(line, UP, buff=0.05)\n",
        "            dashes = VGroup(\n",
        "                DashedLine(line.get_start(), timeline.n2p(start), dash_length=0.01),\n",
        "                DashedLine(line.get_end(), timeline.n2p(end), dash_length=0.01),\n",
        "            )\n",
        "            dashes.set_stroke(color, 1.5)\n",
        "            line_group = VGroup(line, name_mob, dashes)\n",
        "            character_labels.add(line_group)\n",
        "\n",
        "        images = Group(\n",
        "            ImageMobject(\"Head_of_Aristotle\"),\n",
        "            ImageMobject(\"Eratosthenes\"),\n",
        "            Square().set_opacity(0),\n",
        "            ImageMobject(\"Kepler\"),\n",
        "            ImageMobject(\"Copernicus\"),\n",
        "            ImageMobject(\"TychoBrahe\"),\n",
        "            ImageMobject(\"JamesCook\"),\n",
        "            ImageMobject(\"EdmondHalley\"),\n",
        "            ImageMobject(\"OleRomer\"),\n",
        "            ImageMobject(\"ChristiaanHuygens\"),\n",
        "            ImageMobject(\"FriedrichBessel\"),\n",
        "            ImageMobject(\"HenriettaLeavitt\"),\n",
        "            ImageMobject(\"EdwinHubble\"),\n",
        "        )\n",
        "        for image, character_label in zip(images, character_labels):\n",
        "            image.set_height(2.0)\n",
        "            image.next_to(character_label, UP)\n",
        "\n",
        "        # Add greeks\n",
        "        frame.set_height(5).move_to(timeline.n2p(-250))\n",
        "        frame.set_y(0.5)\n",
        "        self.play(\n",
        "            FadeIn(character_labels[0], lag_ratio=0.1),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(character_labels[1], lag_ratio=0.1),\n",
        "            FadeIn(images[1], 0.5 * UP),\n",
        "            frame.animate.set_height(6).match_x(timeline.n2p(-175)).set_anim_args(run_time=3),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(character_labels[2], lag_ratio=0.1),\n",
        "            FadeOut(images[1], 0.5 * RIGHT),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Up to Kepler\n",
        "        kepler_label, copernicus_label, brahe_label = character_labels[3:6]\n",
        "        kepler_image, copernicus_image, brahe_image = images[3:6]\n",
        "        self.play(\n",
        "            frame.animate.match_x(timeline.n2p(1600)),\n",
        "            UpdateFromAlphaFunc(frame, lambda m, a: m.set_height(interpolate(6, 12, there_and_back(a)))),\n",
        "            run_time=3,\n",
        "        )\n",
        "        self.play(\n",
        "            FadeIn(kepler_label, lag_ratio=0.1),\n",
        "            FadeIn(kepler_image, 0.5 * UP),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(copernicus_label, lag_ratio=0.1),\n",
        "            FadeIn(copernicus_image, 0.5 * UP),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(brahe_label, lag_ratio=0.1),\n",
        "            FadeIn(brahe_image, 0.5 * UP),\n",
        "            copernicus_image.animate.scale(0.5, about_edge=DL).shift(0.25 * RIGHT),\n",
        "            kepler_image.animate.scale(0.5, about_edge=DR).shift(0.25 * DR),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            brahe_image.animate.scale(0.5, about_edge=DOWN),\n",
        "            kepler_image.animate.shift(0.2 * LEFT),\n",
        "        )\n",
        "\n",
        "        # Cook and Halley\n",
        "        cook_label, halley_label, romer_label = character_labels[6:9]\n",
        "        cook_image, halley_image, romer_image = images[6:9]\n",
        "        romer_image.scale(0.75, about_point=romer_label.get_top())\n",
        "        self.play(\n",
        "            frame.animate.match_x(cook_label).set_anim_args(run_time=2),\n",
        "            FadeIn(cook_label, lag_ratio=0.1),\n",
        "            FadeIn(cook_image, 0.5 * UP),\n",
        "            images[3:6].animate.set_opacity(0.25),\n",
        "            character_labels[3:6].animate.set_opacity(0.25),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(halley_label, lag_ratio=0.1),\n",
        "            FadeIn(halley_image, 0.5 * UP),\n",
        "            cook_image.animate.scale(0.5, about_point=cook_label.get_corner(UR)).shift(0.1 * LEFT),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Romer and Huygens\n",
        "        romer_label, huygens_label = character_labels[8:10]\n",
        "        romer_image, huygens_image = images[8:10]\n",
        "        huygens_image.set_height(1.5).next_to(huygens_label, UP, SMALL_BUFF).shift(0 * LEFT)\n",
        "\n",
        "        halley_label.target = halley_label.generate_target()\n",
        "        halley_label.target.rotate(PI, RIGHT, about_edge=DOWN)\n",
        "        halley_label.target[1].rotate(PI, RIGHT)\n",
        "        self.play(\n",
        "            FadeIn(romer_label, lag_ratio=0.1),\n",
        "            FadeIn(romer_image, 0.5 * UP),\n",
        "            FadeOut(halley_image),\n",
        "            MoveToTarget(halley_label),\n",
        "            cook_image.animate.set_opacity(0.25).match_x(cook_label),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(huygens_label, lag_ratio=0.1),\n",
        "            FadeIn(huygens_image, 0.5 * UP),\n",
        "            romer_image.animate.set_height(1.5).next_to(romer_label, UR, 0).shift(0.25 * LEFT),\n",
        "            FadeOut(kepler_image),\n",
        "            FadeOut(cook_image),\n",
        "            FadeOut(cook_label),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Point out Venus\n",
        "        venus_points = Group(TrueDot(timeline.n2p(year), color=YELLOW).make_3d() for year in [1761, 1769])\n",
        "        venus_words = Text(\"Transit of Venus\\nObservations\", font_size=30)\n",
        "        venus_words.next_to(venus_points, DOWN, MED_LARGE_BUFF, aligned_edge=LEFT)\n",
        "        venus_words.set_color(YELLOW)\n",
        "        venus_arrows = VGroup(\n",
        "            Arrow(venus_words[\"r\"][0].get_top(), dot.get_center(), buff=0.1, thickness=1.5).set_color(YELLOW)\n",
        "            for dot in venus_points\n",
        "        )\n",
        "        venus_words.shift(0.1 * DL)\n",
        "\n",
        "        self.play(\n",
        "            Write(venus_words),\n",
        "            FadeIn(venus_points),\n",
        "            ShowCreation(venus_arrows),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Bessel\n",
        "        bessel_label = character_labels[10]\n",
        "        bessel_image = images[10]\n",
        "\n",
        "        star_words = Text(\"Measurement of\\n61 Cygni\", font_size=24)\n",
        "        star_words.set_color(YELLOW)\n",
        "        star_point = TrueDot(timeline.n2p(1838), color=YELLOW).make_3d()\n",
        "        star_words.next_to(star_point, DOWN, buff=0.75)\n",
        "        star_arrow = Arrow(star_words, star_point, buff=0.1, thickness=2).set_color(YELLOW)\n",
        "\n",
        "        self.play(\n",
        "            frame.animate.match_x(bessel_label),\n",
        "            FadeOut(venus_words),\n",
        "            FadeOut(venus_arrows),\n",
        "            venus_points.animate.set_opacity(0.5),\n",
        "            Write(star_words),\n",
        "            ShowCreation(star_arrow),\n",
        "            FadeIn(star_point),\n",
        "            huygens_image.animate.set_opacity(0.5),\n",
        "            FadeOut(romer_image),\n",
        "        )\n",
        "        self.play(\n",
        "            FadeIn(bessel_label, lag_ratio=0.1),\n",
        "            FadeIn(bessel_image, 0.5 * UP),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Add Leavitt and Hubble\n",
        "        leavitt_label, hubble_label = labels = character_labels[11:13]\n",
        "        leavitt_image, hubble_image = imgs = images[11:13]\n",
        "        for image, label in zip(imgs, labels):\n",
        "            image.set_height(1.5)\n",
        "            image.next_to(label, UP, SMALL_BUFF)\n",
        "        hubble_image.match_x(hubble_label.get_right()).shift(0.3 * RIGHT)\n",
        "\n",
        "        self.play(\n",
        "            bessel_image.animate.set_opacity(0.25).scale(0.5, about_edge=DOWN),\n",
        "            FadeOut(star_words),\n",
        "            FadeOut(star_arrow),\n",
        "            FadeIn(leavitt_label, lag_ratio=0.1),\n",
        "            FadeIn(leavitt_image, 0.5 * UP),\n",
        "            frame.animate.match_x(leavitt_label).set_height(5.0).set_anim_args(run_time=2),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(hubble_label, lag_ratio=0.1),\n",
        "            FadeIn(hubble_image, 0.5 * UP),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class WhatVsHow(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        titles = VGroup(\n",
        "            Text(\"What\"),\n",
        "            Text(\"How\"),\n",
        "        )\n",
        "        titles.scale(1.5)\n",
        "        for title, vect in zip(titles, [LEFT, RIGHT]):\n",
        "            title.move_to(vect * FRAME_WIDTH / 4)\n",
        "            title.to_edge(UP, buff=0.25)\n",
        "\n",
        "        v_line = Line(UP, DOWN).set_height(FRAME_HEIGHT)\n",
        "        self.play(\n",
        "            FadeIn(titles[0], 0.5 * UP),\n",
        "            ShowCreation(v_line),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(FadeIn(titles[1], 0.5 * UP))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class ProjectionTheorem(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Add plane\n",
        "        frame = self.frame\n",
        "\n",
        "        width = 10\n",
        "        plane = Square3D(side_length=2 * width)\n",
        "        plane.set_color(GREY_E, 0.5)\n",
        "        grid = NumberPlane(\n",
        "            (-width, width), (-width, width),\n",
        "        )\n",
        "        grid.axes.set_stroke(WHITE, 0.5, 0.5)\n",
        "        grid.background_lines.set_stroke(WHITE, 1, 0.25)\n",
        "        grid.faded_lines.set_stroke(WHITE, 0.25, 0.1)\n",
        "\n",
        "        frame.reorient(-30, 70, 0, 1.5 * OUT, 8.00)\n",
        "        frame.add_ambient_rotation(2 * DEG)\n",
        "        self.add(plane, grid)\n",
        "\n",
        "        # Add sphere\n",
        "        sphere = Sphere(true_normals=False)\n",
        "        sphere.set_color(BLUE_E, 0.5)\n",
        "        sphere.always_sort_to_camera(self.camera)\n",
        "        mesh = SurfaceMesh(sphere)\n",
        "        mesh.set_stroke(WHITE, 1, 0.25)\n",
        "        mesh.set_anti_alias_width(0)\n",
        "\n",
        "        sphere_group = Group(sphere, mesh)\n",
        "        sphere_group.move_to(2 * OUT)\n",
        "\n",
        "        self.add(sphere_group)\n",
        "\n",
        "        # Show many projections\n",
        "        for _ in range(10):\n",
        "            projection = self.show_projection(sphere_group)\n",
        "            self.play(\n",
        "                Rotate(sphere_group, random.uniform(0, TAU), axis=normalize(np.random.random(3))),\n",
        "                FadeOut(projection)\n",
        "            )\n",
        "\n",
        "    def show_projection(self, sphere):\n",
        "        # Test\n",
        "        projection = sphere.copy()\n",
        "        projection.stretch(5e-2, 2)\n",
        "        projection.set_z(1e-2)\n",
        "\n",
        "        circle = Circle(radius=1)\n",
        "        circle.set_stroke(TEAL, 2)\n",
        "\n",
        "        z = sphere.get_z()\n",
        "        v_lines = VGroup(\n",
        "            Line(circle.pfp(a) + z * OUT, circle.pfp(a))\n",
        "            for a in np.arange(0, 1, 1.0 / 12.0)\n",
        "        )\n",
        "        v_lines.set_stroke(WHITE, 1, 0.25)\n",
        "        v_lines.apply_depth_test()\n",
        "\n",
        "        self.play(\n",
        "            TransformFromCopy(sphere, projection),\n",
        "            *map(ShowCreationThenFadeOut, v_lines),\n",
        "            run_time=1\n",
        "        )\n",
        "        self.add(circle)\n",
        "        self.wait()\n",
        "        self.remove(circle)\n",
        "        return projection\n",
        "\n",
        "\n",
        "class RouleauxTriangle(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Add triangle\n",
        "        arcs = VGroup(\n",
        "            Arc(30 * DEG + x * 120 * DEG, 60 * DEG, radius=1)\n",
        "            for x in range(3)\n",
        "        )\n",
        "        arcs[1].shift(arcs[0].get_end() - arcs[1].get_start())\n",
        "        arcs[2].shift(arcs[0].get_start() - arcs[2].get_end())\n",
        "        arcs.center()\n",
        "        shape = VMobject()\n",
        "        for arc in arcs:\n",
        "            shape.append_vectorized_mobject(arc)\n",
        "\n",
        "        shape.set_fill(BLUE_E, 1)\n",
        "        shape.set_stroke(WHITE, 2)\n",
        "        shape.set_height(3)\n",
        "        shape.move_to(UP)\n",
        "\n",
        "        shape.set_shading(0.25, 0.25, 0)\n",
        "\n",
        "        self.add(shape)\n",
        "\n",
        "        # Show the projection\n",
        "        v_lines = DashedLine(3 * UP, 3 * DOWN).replicate(2)\n",
        "        v_lines.arrange(RIGHT, buff=shape.get_width())\n",
        "        v_lines.move_to(shape, UP)\n",
        "        v_lines.set_stroke(GREY_C, 1)\n",
        "\n",
        "        projection = shape.copy()\n",
        "        projection.stretch(0, 1)\n",
        "        projection.move_to(v_lines.get_bottom())\n",
        "\n",
        "        self.play(\n",
        "            *map(ShowCreation, v_lines),\n",
        "            TransformFromCopy(shape, projection),\n",
        "            run_time=2\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Rotate\n",
        "        shape_center = np.array([0, shape.get_y(), 0])\n",
        "        shape.add_updater(lambda m: m.move_to(shape_center))\n",
        "        self.play(\n",
        "            Rotate(shape, PI, run_time=6),\n",
        "            # self.frame.animate.set_gamma(PI),\n",
        "            run_time=6\n",
        "        )\n",
        "\n",
        "\n",
        "class WellOfSyene(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        image_path = Path(self.file_writer.output_directory, \"../KurtArtwork/TheWellOfSyene.jpg\").resolve()\n",
        "        image = TexturedSurface(Square3D(resolution=(101, 101)), image_path)\n",
        "        image.set_shape(FRAME_WIDTH, FRAME_HEIGHT)\n",
        "        image.set_shading(0.1, 0.1, 0.1)\n",
        "        self.add(image)\n",
        "\n",
        "        # Make waves\n",
        "        frame = self.frame\n",
        "        center = np.array([-2.3, 0.84, 0])\n",
        "\n",
        "        sun_spot = GlowDot([-2.36, 1.26, 0.0])\n",
        "        sun_spot.set_color(WHITE)\n",
        "        sun_spot.set_radius(0.7)\n",
        "\n",
        "        def wave(x, y, z, t):\n",
        "            dist = get_dist(center, [x, y, z])\n",
        "            scale = 0.025 * np.exp(-2 * dist * dist)\n",
        "            nudge1 = scale * math.sin(2 * TAU * x - 5 * TAU * t)\n",
        "            nudge2 = 3 * scale * math.sin(3 * TAU * y - 5 * TAU * t)\n",
        "            return (x, y + nudge1, z + nudge2)\n",
        "\n",
        "        frame.reorient(0, 0, 0, (-1.64, 0.72, 0.0), 2.39)\n",
        "        self.play(\n",
        "            Homotopy(wave, image, rate_func=linear),\n",
        "            frame.animate.to_default_state(),\n",
        "            GrowFromCenter(sun_spot, time_span=(5.5, 6.5)),\n",
        "            run_time=12,\n",
        "        )\n",
        "\n",
        "\n",
        "class NileLabels(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Add image\n",
        "        image_path = Path(self.file_writer.output_directory, \"Nile.png\").resolve()\n",
        "        image = ImageMobject(image_path)\n",
        "        image.set_height(FRAME_HEIGHT)\n",
        "\n",
        "        # Mark points\n",
        "        alex_point = TrueDot((-5.61, -0.8, 0.0), color=MAROON_D, radius=0.1).make_3d()\n",
        "        syene_point = TrueDot((2.78, 1.12, 0.0), color=BLUE_D, radius=0.1).make_3d()\n",
        "        for dot in alex_point, syene_point:\n",
        "            dot.set_shading(0.25, 0.1, 0.1)\n",
        "        alex_label = Text(\"Alexandria\", font_size=60, font=\"CMU Serif\").match_color(alex_point)\n",
        "        alex_label.next_to(alex_point, DR, SMALL_BUFF)\n",
        "        syene_label = Text(\"Syene\", font_size=60, font=\"CMU Serif\").match_color(syene_point)\n",
        "        syene_label.next_to(syene_point, UP, SMALL_BUFF)\n",
        "\n",
        "        line = Line(alex_point, syene_point, buff=0)\n",
        "        line.insert_n_curves(20)\n",
        "        # line.set_stroke([MAROON_D, BLUE_D])\n",
        "        line.set_stroke(GREY_A, 3)\n",
        "\n",
        "        line_label = TexText(R\"$\\approx$ 5,000 Stadia\")\n",
        "        line_label.next_to(line.get_center(), UP, SMALL_BUFF)\n",
        "        line_label.rotate(line.get_angle(), about_point=line.get_center())\n",
        "        line_label.set_fill(border_width=2)\n",
        "\n",
        "        group = VGroup(alex_label, syene_label, line_label)\n",
        "        group.set_fill(border_width=3)\n",
        "        group.set_backstroke(BLACK, 5)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(alex_point),\n",
        "            FadeIn(alex_label, lag_ratio=0.1),\n",
        "        )\n",
        "        self.play(\n",
        "            ShowCreation(line, run_time=2),\n",
        "            FadeIn(syene_point, time_span=(1, 2)),\n",
        "            FadeIn(syene_label, lag_ratio=0.1, time_span=(1, 2)),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(Write(line_label))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class EarthSizeRatios(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        equation = Tex(R\"\"\"\n",
        "            {7^\\circ \\over 360^\\circ} = \n",
        "            {\\text{dist}(\\text{Alexandria}, \\text{Syene}) \\over \\text{Circumference of Earth}}\n",
        "        \"\"\", font_size=42)\n",
        "        equation.to_corner(UL)\n",
        "        dist_term = equation[R\"\\text{dist}(\\text{Alexandria}, \\text{Syene})\"][0]\n",
        "\n",
        "        self.play(FadeIn(equation[R\"7^\\circ\"], UL))\n",
        "        self.play(Write(equation[R\"\\over 360^\\circ}\"]))\n",
        "        self.wait()\n",
        "        self.play(LaggedStart(\n",
        "            Write(equation[R\"=\"][0]),\n",
        "            FadeTransformPieces(equation[R\"7^\\circ\"][0].copy(), dist_term),\n",
        "            FadeTransformPieces(equation[R\"\\over\"][0].copy(), equation[R\"\\over\"][1]),\n",
        "            FadeTransformPieces(equation[R\"360^\\circ\"][0].copy(), equation[R\"\\text{Circumference of Earth}\"][0]),\n",
        "            lag_ratio=0.1,\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "        # Highlight dist\n",
        "        rect = SurroundingRectangle(dist_term)\n",
        "        self.play(ShowCreation(rect))\n",
        "        self.play(FadeOut(rect))\n",
        "\n",
        "\n",
        "class AccuracyLabel(InteractiveScene):\n",
        "    def construct(self):\n",
        "        label = VGroup(\n",
        "            TexText(\"Estimate: $R_E = ...$\"),\n",
        "            TexText(\"True value: $R_E = 6{,}378$ km\"),\n",
        "        )\n",
        "\n",
        "\n",
        "class MoonOrbitCalculation(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Pure ratio\n",
        "        ratio_tex = R\"{\\text{28 days} \\over \\text{4 hours}}\"\n",
        "        new_ratio_tex = R\"{\\text{28 days} \\over \\text{3.5 hours}}\"\n",
        "        eq1, eq2 = (\n",
        "            Tex(ratio_tex + R\"= {2 \\pi D_M \\over 2 R_\\text{E}}\"),\n",
        "            Tex(new_ratio_tex + R\"= {2 \\pi D_M \\over 2 R_\\text{E}}\"),\n",
        "        )\n",
        "        for eq in [eq1, eq2]:\n",
        "            eq.to_corner(UL)\n",
        "        eq2.move_to(eq1, RIGHT)\n",
        "\n",
        "        RMO = eq1[R\"D_M\"]\n",
        "        RMO_rect = SurroundingRectangle(RMO, buff=0.05)\n",
        "        RMO_rect.set_stroke(TEAL, 2)\n",
        "        RMO_words = Text(\"Distance to the moon\", font_size=48)\n",
        "        RMO_words.next_to(RMO_rect)\n",
        "        RMO_words.set_color(TEAL)\n",
        "\n",
        "        self.add(eq1)\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            RMO.animate.set_color(TEAL),\n",
        "            ShowCreation(RMO_rect),\n",
        "            FadeIn(RMO_words, lag_ratio=0.1),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            Transform(eq1[R\"28 days\"][0], eq2[R\"28 days\"][0]),\n",
        "            Transform(eq1[R\"\\over\"][0], eq2[R\"\\over\"][0]),\n",
        "            Transform(eq1[R\"4\"], eq2[R\"3.5\"]),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Equation 2\n",
        "        eq3 = Tex(\n",
        "            R\"\\frac{1}{\\pi} \\left( \" + new_ratio_tex + R\"\\right) R_\\text{E} = D_M\"\n",
        "        )\n",
        "        eq3.next_to(eq2, DOWN, LARGE_BUFF, aligned_edge=LEFT)\n",
        "        RMO2 = eq3[R\"D_M\"]\n",
        "        RMO2.set_color(TEAL)\n",
        "\n",
        "        self.play(LaggedStart(\n",
        "            TransformFromCopy(eq2[new_ratio_tex], eq3[new_ratio_tex]),\n",
        "            FadeIn(eq3[R\"\\left(\"]),\n",
        "            FadeIn(eq3[R\"\\right)\"]),\n",
        "            TransformFromCopy(eq2[R\"\\pi\"], eq3[R\"\\frac{1}{\\pi}\"]),\n",
        "            TransformFromCopy(eq2[R\"R_\\text{E}\"], eq3[R\"R_\\text{E}\"]),\n",
        "            TransformFromCopy(eq2[\"=\"], eq3[\"=\"]),\n",
        "            TransformFromCopy(eq2[R\"D_M\"], eq3[R\"D_M\"]),\n",
        "            lag_ratio=0.3,\n",
        "            run_time=3\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "        # Note the fraction\n",
        "        frac = eq3[R\"\\frac{1}{\\pi} \\left( \" + new_ratio_tex + R\"\\right)\"]\n",
        "        rect = SurroundingRectangle(frac)\n",
        "        rect.set_stroke(YELLOW, 2)\n",
        "        value = Tex(R\"\\approx 61\")\n",
        "        value.next_to(rect, DOWN)\n",
        "        value.match_color(rect)\n",
        "\n",
        "        self.play(ShowCreation(rect))\n",
        "        self.play(Write(value))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class FullLunarEclipseDistance(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Add terms\n",
        "        R_e = 1.5\n",
        "        R_m = R_e * (MOON_RADIUS / EARTH_RADIUS)\n",
        "\n",
        "        diam_line = Line(R_e * DOWN, R_e * UP)\n",
        "        start_dot = Dot(R_e * DOWN, radius=0.04)\n",
        "        end_dot = Dot((R_e + 2 * R_m) * UP, radius=0.04)\n",
        "\n",
        "        diam_brace = Brace(diam_line, RIGHT)\n",
        "        diam_brace.add(diam_brace.get_tex(R\"2R_E\", font_size=36))\n",
        "\n",
        "        R_m_brace = Brace(Line(diam_line.get_top(), end_dot.get_center()), RIGHT)\n",
        "        R_m_brace.add(R_m_brace.get_tex(R\"2 R_M\", font_size=36))\n",
        "\n",
        "        start_words = Text(\"Leading edge start\")\n",
        "        end_words = Text(\"Leading edge end\")\n",
        "\n",
        "        for words, dot in [(start_words, start_dot), (end_words, end_dot)]:\n",
        "            words.next_to(dot, LEFT, buff=LARGE_BUFF)\n",
        "            arrow = Arrow(words, dot, buff=0.1)\n",
        "            words.shift(0.05 * UP)\n",
        "            words.add(arrow)\n",
        "            VGroup(words, dot).set_color(TEAL)\n",
        "\n",
        "        # Animations\n",
        "        self.play(\n",
        "            FadeIn(start_words, lag_ratio=0.1),\n",
        "            FadeIn(start_dot),\n",
        "        )\n",
        "        self.wait(2)\n",
        "        self.play(FadeIn(diam_brace))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(end_words, lag_ratio=0.1),\n",
        "            FadeIn(end_dot)\n",
        "        )\n",
        "        self.play(FadeIn(R_m_brace))\n",
        "\n",
        "\n",
        "class ThreePointFiveCorrection(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        four_hours = Text(\"4 hours\")\n",
        "        correction = Text(\"3.5 hours\")\n",
        "        correction.next_to(four_hours, UP, MED_LARGE_BUFF)\n",
        "        cross = Line(LEFT, RIGHT).replace(four_hours, 0)\n",
        "        cross.set_stroke(RED, 6)\n",
        "\n",
        "        self.play(ShowCreation(cross))\n",
        "        self.play(Write(correction))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class ShowFourLittleCircles(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Add image\n",
        "        image_path = Path(self.file_writer.output_directory, \"LunarEclipseComposite.jpg\").resolve()\n",
        "        image = ImageMobject(str(image_path))\n",
        "        image.set_height(FRAME_HEIGHT)\n",
        "        self.add(image)\n",
        "\n",
        "        # Circles\n",
        "        lil_circle = Circle(radius=0.62)\n",
        "        lil_circle.move_to([-1.00, -0.167, 0.])\n",
        "        lil_circle.set_stroke(YELLOW, 2)\n",
        "        lil_circle.set_anti_alias_width(10)\n",
        "\n",
        "        four_circles = lil_circle.get_grid(4, 1, buff=0)\n",
        "        four_circles.rotate(8 * DEG)\n",
        "        four_circles.move_to([1.503, -0.043, 0.])\n",
        "\n",
        "        self.play(ShowCreation(lil_circle))\n",
        "        self.wait()\n",
        "        self.play(LaggedStart(\n",
        "            (TransformFromCopy(lil_circle, circ)\n",
        "            for circ in four_circles),\n",
        "            lag_ratio=0.25,\n",
        "            run_time=3\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class AskAboutMoonrise(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        question = Text(\"What does the duration\\nof a moonrise tell you?\", font_size=60)\n",
        "        question.set_backstroke(BLACK, 3)\n",
        "        self.play(Write(question, stroke_color=WHITE, run_time=3))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class MoonSizeCalculation(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        eq = Tex(\n",
        "            R\"{2 \\text{ minutes} \\over 24 \\text{ hours}} = {2 R_M\\over 2 \\pi D_M}\",\n",
        "            t2c={\"R_M\": GREY_B, \"D_M\": GREY_B}\n",
        "        )\n",
        "        eq.to_corner(UL)\n",
        "        eq.set_backstroke(BLACK, 2)\n",
        "\n",
        "        self.play(FadeIn(eq[R\"{2 \\text{ minutes} \\over 24 \\text{ hours}}\"]))\n",
        "        self.wait()\n",
        "        self.play(LaggedStart(\n",
        "            FadeIn(eq[\"=\"][0]),\n",
        "            TransformFromCopy(eq[R\"2 \\text{ minutes}\"][0], eq[\"2 R_M\"][0]),\n",
        "            TransformFromCopy(eq[R\"\\over\"][0], eq[R\"\\over\"][1]),\n",
        "            TransformFromCopy(eq[R\"24 \\text{ hours}\"][0], eq[R\"2 \\pi D_M\"][0]),\n",
        "            lag_ratio=0.35\n",
        "        ))\n",
        "        self.wait()\n",
        "\n",
        "        # Annotations\n",
        "        top_rect = SurroundingRectangle(SurroundingRectangle(eq[\"R_M\"], buff=0.01).set_stroke(width=1))\n",
        "        low_rect = SurroundingRectangle(SurroundingRectangle(eq[\"D_M\"], buff=0.01).set_stroke(width=1))\n",
        "        top_label = TexText(\"Radius of the moon\")\n",
        "        top_label.next_to(top_rect, RIGHT)\n",
        "        low_label = TexText(\"Distance to the moon\")\n",
        "        low_label.next_to(low_rect, RIGHT)\n",
        "\n",
        "        VGroup(top_rect, low_rect, top_label, low_label).set_color(TEAL)\n",
        "\n",
        "        self.play(\n",
        "            ShowCreation(top_rect),\n",
        "            FadeIn(top_label, lag_ratio=0.1),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            ReplacementTransform(top_rect, low_rect),\n",
        "            FadeOut(top_label),\n",
        "            FadeIn(low_label, lag_ratio=0.1),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(FadeOut(low_rect), FadeOut(low_label))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class MoonSunRatios(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Write equation\n",
        "        equation = Tex(\n",
        "            R\"{R_M \\over D_M} = {R_S \\over D_S} \\approx \\frac{1}{220}\",\n",
        "            t2c={\n",
        "                \"R_M\": GREY_B,\n",
        "                \"D_M\": GREY_B,\n",
        "                \"R_S\": YELLOW,\n",
        "                \"D_S\": YELLOW,\n",
        "            }\n",
        "        )\n",
        "        equation.to_corner(UL)\n",
        "\n",
        "        self.add(equation[R\"{R_M \\over D_M}\"])\n",
        "        self.wait()\n",
        "        self.play(LaggedStart(\n",
        "            Write(equation[\"=\"][0]),\n",
        "            TransformFromCopy(equation[\"R_M\"][0], equation[\"R_S\"][0]),\n",
        "            TransformFromCopy(equation[R\"\\over\"][0], equation[R\"\\over\"][1]),\n",
        "            TransformFromCopy(equation[\"D_M\"][0], equation[\"D_S\"][0]),\n",
        "            lag_ratio=0.35\n",
        "        ))\n",
        "        self.wait()\n",
        "        self.play(Write(equation[R\"\\approx \\frac{1}{220}\"]))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class ArrowBackAndForth(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        arrow = Arrow(3 * LEFT, 3 * RIGHT, path_arc=-90 * DEG, thickness=6)\n",
        "        self.play(Write(arrow))\n",
        "        self.wait()\n",
        "        self.play(arrow.animate.flip())\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class AngleLabel(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        arc = Arc(180 * DEG, -10 * DEG, radius=2)\n",
        "        theta = Tex(R\"\\theta\")\n",
        "        theta.next_to(arc, LEFT, aligned_edge=DOWN, buff=SMALL_BUFF)\n",
        "\n",
        "        self.add(arc, theta)\n",
        "\n",
        "\n",
        "class AristarchusDistanceEstimate(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        t2c = {\"D_S\": YELLOW, \"D_M\": GREY_B}\n",
        "        guess = TexText(\"Aristarchus's Guess: $D_S = 20 D_M$\", t2c=t2c)\n",
        "        truth = TexText(R\"True answer: $D_S \\approx 370 D_M$\", t2c=t2c)\n",
        "\n",
        "        guess.to_edge(UP)\n",
        "        truth.next_to(guess, DOWN)\n",
        "\n",
        "        truth.shift((guess[\"D_S\"].get_x() - truth[\"D_S\"].get_x()) * RIGHT)\n",
        "\n",
        "        self.play(FadeIn(guess, 0.25 * UP))\n",
        "        self.wait()\n",
        "        self.play(FadeIn(truth, 0.25 * DOWN))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class AristarchusSunSizeEstimate(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Mostly copied from above\n",
        "        t2c = {\"R_S\": YELLOW, \"R_E\": BLUE}\n",
        "        guess = TexText(\"Aristarchus's Guess: $R_S = 7 R_E$\", t2c=t2c)\n",
        "        truth = TexText(R\"True answer: $R_S \\approx 109 R_E$\", t2c=t2c)\n",
        "\n",
        "        guess.to_edge(UP)\n",
        "        truth.next_to(guess, DOWN)\n",
        "\n",
        "        truth.shift((guess[\"R_S\"].get_x() - truth[\"R_S\"].get_x()) * RIGHT)\n",
        "\n",
        "        self.play(FadeIn(guess, 0.25 * UP))\n",
        "        self.wait()\n",
        "        self.play(FadeIn(truth, 0.25 * DOWN))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class CrossAndCheck(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        cross = Cross(Square())\n",
        "        cross.set_shape(4, 3)\n",
        "        cross.to_edge(LEFT)\n",
        "        cross.set_stroke(RED, (0, 10, 10, 10, 0))\n",
        "\n",
        "        checkmark = Checkmark()\n",
        "        checkmark.set_height(1)\n",
        "        checkmark.set_fill(GREEN)\n",
        "        checkmark.next_to(cross, UP)\n",
        "\n",
        "        self.play(ShowCreation(cross))\n",
        "        self.wait()\n",
        "        self.play(FadeOut(cross))\n",
        "        self.play(FadeIn(checkmark, UP))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class OtherGreeks(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        folder = '/Users/grant/3Blue1Brown Dropbox/3Blue1Brown/videos/2025/cosmic_distance/KurtArtwork/'\n",
        "        base_image = ImageMobject(Path(folder, 'AristarchusProposingEarthGoesAroundTheSun.jpg'))\n",
        "        sub_images = Group(\n",
        "            ImageMobject(Path(folder, \"stencil-luma-masks\", f\"figure-{n}-masked.png\"))\n",
        "            for n in range(1, 10)\n",
        "        )\n",
        "        for image in [base_image, *sub_images]:\n",
        "            image.set_height(FRAME_HEIGHT)\n",
        "\n",
        "        base_image.set_opacity(0.25)\n",
        "        self.add(base_image)\n",
        "        self.add(sub_images[0])\n",
        "        self.play(\n",
        "            *(\n",
        "                FadeIn(im, rate_func=there_and_back_with_pause, time_span=(0.25 * n, 0.25 * n + 7))\n",
        "                for n, im in enumerate(sub_images)\n",
        "            ),\n",
        "            run_time=8\n",
        "        )\n",
        "\n",
        "\n",
        "class EqualAreas1(InteractiveScene):\n",
        "    angle = 30 * DEG\n",
        "    radius = 2\n",
        "    run_time = 1\n",
        "\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        arc = self.get_slice(1 * DEG)\n",
        "        self.play(\n",
        "            UpdateFromAlphaFunc(arc, lambda m, a: m.become(self.get_slice(a * self.angle))),\n",
        "            run_time=self.run_time\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "    def get_slice(self, angle):\n",
        "        arc = Arc(0, angle, radius=self.radius)\n",
        "        arc.add_line_to(ORIGIN)\n",
        "        arc.add_line_to(arc.get_start())\n",
        "        arc.set_fill(BLUE, 0.5)\n",
        "        arc.set_stroke(width=0)\n",
        "        return arc\n",
        "\n",
        "\n",
        "class EqualAreas2(EqualAreas1):\n",
        "    angle = 10 * DEG\n",
        "    radius = 4\n",
        "    run_time = 1\n",
        "\n",
        "\n",
        "class EvenWithMathRight(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        words = TexText(R\"Even when you have the math right\\\\you don't necessarily get to the truth\", font_size=36)\n",
        "        words.to_corner(UL)\n",
        "        self.play(Write(words, lag_ratio=0.1, run_time=2))\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class CopernicusConclusions(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Add title\n",
        "        title = TexText(\"Copernicus\", font_size=48)\n",
        "        underline = Underline(title, buff=-0.05)\n",
        "        title.add(underline)\n",
        "        title.to_corner(UL)\n",
        "        title.set_color(YELLOW)\n",
        "\n",
        "        self.add(title)\n",
        "\n",
        "        # Facts\n",
        "        facts = BulletedList(\n",
        "            R\"proposed the planets\\\\go around the Sun\",\n",
        "            R\"assumed orbits\\\\were circular\",\n",
        "            R\"calculated all the\\\\orbital periods\",\n",
        "            buff=0.75,\n",
        "            font_size=36\n",
        "        )\n",
        "        facts.next_to(title, DOWN, aligned_edge=LEFT, buff=MED_LARGE_BUFF)\n",
        "        facts.shift(MED_SMALL_BUFF * RIGHT)\n",
        "\n",
        "        for fact in facts:\n",
        "            self.play(FadeIn(fact, RIGHT))\n",
        "            self.wait()\n",
        "\n",
        "        # Test\n",
        "        self.play(\n",
        "            self.frame.animate.reorient(0, 0, 0, (0.78, -0.58, 0.0), 9.00),\n",
        "            facts[:2].animate.scale(0.75, about_edge=UL).set_opacity(0.5),\n",
        "            facts[2].animate.scale(1.25, about_edge=UL).shift(0.5 * UP)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Show orbital periods\n",
        "        periods = VGroup(\n",
        "            Text(\"Mercury: 88 days\"),\n",
        "            Text(\"Venus: 225 days\"),\n",
        "            Text(\"Earth: 365 days\"),\n",
        "            Text(\"Mars: 687 days\"),\n",
        "            Text(\"Jupiter: 4,333 days\"),\n",
        "            Text(\"Saturn: 10,755 days\"),\n",
        "        )\n",
        "        periods.scale(0.75)\n",
        "        periods.arrange(DOWN, aligned_edge=LEFT)\n",
        "        periods.next_to(facts, DOWN, buff=MED_SMALL_BUFF, aligned_edge=LEFT)\n",
        "        periods.shift(RIGHT)\n",
        "\n",
        "        self.play(\n",
        "            LaggedStartMap(FadeIn, periods, shift=0.35 * RIGHT, lag_ratio=0.15)\n",
        "        )\n",
        "        self.add(periods)\n",
        "\n",
        "        # Highlight a few periods\n",
        "        arrow = Vector(LEFT)\n",
        "        arrow.set_fill(WHITE, 0)\n",
        "        arrow.next_to(periods[0], RIGHT)\n",
        "        for i, color in zip(range(2, 5), [BLUE, RED, ORANGE]):\n",
        "            self.play(\n",
        "                periods[:i].animate.set_fill(WHITE, 0.5),\n",
        "                periods[i + 1:].animate.set_fill(WHITE, 0.5),\n",
        "                periods[i].animate.set_fill(color, 1),\n",
        "                arrow.animate.set_fill(color, 1).next_to(periods[i], RIGHT, SMALL_BUFF)\n",
        "            )\n",
        "            self.wait()\n",
        "\n",
        "\n",
        "class UniversalProblemSolvingTip(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        title = Text(\"Universal Problem Solving Tip #1\", font_size=60)\n",
        "        title.add(Underline(title, buff=-0.025))\n",
        "        title.to_edge(UP)\n",
        "        title.set_color(BLUE)\n",
        "        self.add(title)\n",
        "\n",
        "        words = TexText(R\"If you can't solve a problem, try \\\\ to solve a simpler problem instead\", font_size=60, isolate=\"simpler problem \")\n",
        "        words.next_to(title, DOWN, buff=1.5)\n",
        "\n",
        "        self.play(FadeIn(words, lag_ratio=0.1, run_time=2))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FlashUnder(words[\"simpler problem\"], buff=-0.025),\n",
        "            words[\"simpler problem\"].animate.set_color(YELLOW)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class CountUpDates(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        day_tracker = ValueTracker(1)\n",
        "        label = always_redraw(lambda: self.day_to_date_label(int(day_tracker.get_value())))\n",
        "        self.add(label)\n",
        "        self.play(\n",
        "            day_tracker.animate.set_value(365),\n",
        "            run_time=10,\n",
        "            rate_func=smooth\n",
        "        )\n",
        "\n",
        "    def day_to_date_label(self, day_number, buff=MED_SMALL_BUFF):\n",
        "        # Days in each month (non-leap year)\n",
        "        month_days = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n",
        "        month_names = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n",
        "        # Find the month\n",
        "        month = 0\n",
        "        days_remaining = day_number\n",
        "        while days_remaining > month_days[month]:\n",
        "            days_remaining -= month_days[month]\n",
        "            month += 1\n",
        "\n",
        "        result = VGroup(\n",
        "            Text(month_names[month]),\n",
        "            Integer(days_remaining),\n",
        "        )\n",
        "        result.arrange(RIGHT, buff=buff, aligned_edge=UP)\n",
        "        result[0].set_y(result[1].get_y(DOWN) - result[0][0].get_y(DOWN))\n",
        "        result.shift(-result[1].get_left())\n",
        "        return result\n",
        "\n",
        "\n",
        "class ScaleIndicator(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        power_tracker = ValueTracker(0)\n",
        "        indicator = always_redraw(lambda: self.get_indicator(power_tracker.get_value()))\n",
        "\n",
        "        self.add(indicator)\n",
        "        max_tim = 27\n",
        "        self.play(\n",
        "            power_tracker.animate.set_value(max_tim),\n",
        "            run_time=3 * max_tim,\n",
        "            rate_func=linear\n",
        "        )\n",
        "\n",
        "    def get_indicator(self, exponent, ref_width=2.0):\n",
        "        low_power = int(exponent)\n",
        "        high_power = int(exponent + 1)\n",
        "        pieces = VGroup(\n",
        "            self.get_piece(width=(10**(low_power - exponent)) * ref_width),\n",
        "            self.get_piece(width=(10**(high_power - exponent)) * ref_width),\n",
        "        )\n",
        "        labels = VGroup(\n",
        "            self.get_label(low_power),\n",
        "            self.get_label(high_power),\n",
        "        )\n",
        "        opacities = [\n",
        "            self.get_opacity(low_power - exponent),\n",
        "            self.get_opacity(high_power - exponent),\n",
        "        ]\n",
        "        for piece, label, opacity in zip(pieces, labels, opacities):\n",
        "            piece.move_to(4 * LEFT, DL)\n",
        "            label.set_height(0.25)\n",
        "            label.set_max_width(0.8 * piece.get_width())\n",
        "            label.next_to(piece, DOWN, buff=SMALL_BUFF)\n",
        "            width_diff = abs(ref_width - piece.get_width())\n",
        "            piece.set_stroke(opacity=opacity)\n",
        "            label.set_fill(opacity=opacity).set_stroke(opacity=opacity)\n",
        "\n",
        "        return VGroup(pieces, labels)\n",
        "\n",
        "    def get_piece(self, width):\n",
        "        line = UnitInterval(width=1, tick_size=0.075)\n",
        "        line.set_width(width, stretch=True)\n",
        "        line.center()\n",
        "        for tick in line.ticks:\n",
        "            tick.align_to(ORIGIN, DOWN)\n",
        "\n",
        "        return VGroup(line.copy().set_stroke(BLACK, width=3), line)\n",
        "\n",
        "    def get_label(self, power):\n",
        "        if power <= 14:\n",
        "            result = Integer(10**power, unit=\"km\")\n",
        "        else:\n",
        "            result = Tex(fR\"10^{{{power}}} \\text{{ km}}\")\n",
        "        result.set_backstroke(BLACK, 4)\n",
        "        return result\n",
        "\n",
        "    def get_opacity(self, exp_diff):\n",
        "        return 1.0 - clip(inverse_interpolate(0.25, 0.75, abs(exp_diff)), 0, 1)\n",
        "\n",
        "\n",
        "class Subscribe(InteractiveScene):\n",
        "    def construct(self):\n",
        "        # Test\n",
        "        morty = Mortimer()\n",
        "        morty.to_corner(DR)\n",
        "        morty.body.insert_n_curves(100)\n",
        "        title = Text(\"Follow @3blue1brown wherever you follow things\")\n",
        "        title.to_edge(UP)\n",
        "        title.set_fill(border_width=1)\n",
        "\n",
        "        logos = Group(\n",
        "            SVGMobject(\"youtube_logo\"),\n",
        "            SVGMobject(\"email\").set_fill(GREY_A),\n",
        "            SVGMobject(\"x_logo\").set_fill(GREY_C),\n",
        "            ImageMobject(\"instagram_logo\"),\n",
        "            SVGMobject(\"bluesky_logo\"),\n",
        "            ImageMobject(\"facebook_logo\"),\n",
        "            SVGMobject(\"rss_logo\"),\n",
        "            Tex(R\"\\dots\", font_size=72),\n",
        "        )\n",
        "        for logo in logos[:-1]:\n",
        "            logo.set_height(0.75)\n",
        "            if isinstance(logo, SVGMobject):\n",
        "                logo.set_fill(border_width=1)\n",
        "        logos.arrange(RIGHT, buff=0.75, aligned_edge=DOWN)\n",
        "        logos.next_to(title, DOWN, buff=1)\n",
        "        logos[-1].match_y(logos)\n",
        "\n",
        "        self.add(title)\n",
        "        self.play(morty.change(\"raise_right_hand\"))\n",
        "        self.play(LaggedStartMap(FadeIn, logos, shift=0.25 * DR, lag_ratio=0.25, run_time=2))\n",
        "        self.play(Blink(morty))\n",
        "        self.wait()\n",
        "\n",
        "        # Highlight email\n",
        "        mail = logos[1]\n",
        "        url = Text(\"https://3b1b.co/mail\", font=\"Consolas\")\n",
        "        url.next_to(mail, DOWN, buff=1.5)\n",
        "        arrow = Arrow(mail, url, thickness=5, buff=0.2)\n",
        "\n",
        "        self.play(\n",
        "            GrowArrow(arrow),\n",
        "            FadeIn(url, DOWN),\n",
        "            morty.change(\"tease\"),\n",
        "        )\n",
        "        self.play(Blink(morty))\n",
        "        self.wait()\n",
        "\n",
        "        # Organize\n",
        "        n = len(\"Follow@3blue1brown\")\n",
        "        self.play(\n",
        "            LaggedStart(FadeOut(arrow, LEFT), FadeOut(url, LEFT)),\n",
        "            logos.animate.arrange_in_grid(2, 4, h_buff=0.25, v_buff=0.5).set_height(1.0).next_to(title, DOWN, 0.5).to_edge(LEFT, buff=0.5),\n",
        "            title[:n].animate.to_edge(LEFT),\n",
        "            FadeOut(title[n:], LEFT),\n",
        "            run_time=2\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class EndScreen(PatreonEndScreen):\n",
        "    pass\n"
    ]
}