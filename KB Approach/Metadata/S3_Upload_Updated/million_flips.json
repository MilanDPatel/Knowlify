{
    "topic": "demonstrates the concept of a million flips of a coin, with each flip",
    "code": [
        "from manim_imports_ext import *\n",
        "from _2018.eop.reusable_imports import *\n",
        "\n",
        "\n",
        "class MillionFlips(Scene):\n",
        "    def construct(self):\n",
        "        title = OldTexText(\"1{,}000{,}000 flips\")\n",
        "        title.to_edge(UP)\n",
        "        self.add(title)\n",
        "\n",
        "        small_wait_time = 1.0 / 15  # Um...\n",
        "\n",
        "        n_flips_label = OldTexText(\"\\\\# Flips: \")\n",
        "        n_heads_label = OldTexText(\"\\\\# Heads: \")\n",
        "        n_flips_count = Integer(0)\n",
        "        n_heads_count = Integer(0)\n",
        "        n_heads_label.to_edge(RIGHT, buff=2 * LARGE_BUFF)\n",
        "        n_flips_label.next_to(n_heads_label, DOWN, aligned_edge=LEFT)\n",
        "        n_flips_count.next_to(n_flips_label[-1], RIGHT)\n",
        "        n_heads_count.next_to(n_heads_label[-1], RIGHT)\n",
        "        VGroup(n_flips_count, n_heads_count).shift(0.5 * SMALL_BUFF * UP)\n",
        "        self.add(n_flips_label, n_heads_label, n_flips_count, n_heads_count)\n",
        "\n",
        "        coins = VGroup(*[\n",
        "            FlatHeads() if random.random() < 0.5 else FlatTails()\n",
        "            for x in range(100)\n",
        "        ])\n",
        "        self.organize_group(coins)\n",
        "\n",
        "        proportions = np.random.normal(0.5, 0.5 * 0.1, 100)\n",
        "        hundred_boxes = VGroup(*[\n",
        "            Square(\n",
        "                stroke_width=1,\n",
        "                stroke_color=WHITE,\n",
        "                fill_opacity=1,\n",
        "                fill_color=interpolate_color(COLOR_HEADS, COLOR_TAILS, prop)\n",
        "            )\n",
        "            for prop in proportions\n",
        "        ])\n",
        "        self.organize_group(hundred_boxes)\n",
        "\n",
        "        ten_k_proportions = np.random.normal(0.5, 0.5 * 0.01, 100)\n",
        "        ten_k_boxes = VGroup(*[\n",
        "            Square(\n",
        "                stroke_width=1,\n",
        "                stroke_color=WHITE,\n",
        "                fill_opacity=1,\n",
        "                fill_color=interpolate_color(COLOR_HEADS, COLOR_TAILS, prop)\n",
        "            )\n",
        "            for prop in ten_k_proportions\n",
        "        ])\n",
        "        self.organize_group(ten_k_boxes)\n",
        "\n",
        "        # Animations\n",
        "        for coin in coins:\n",
        "            self.add(coin)\n",
        "            self.increment(n_flips_count)\n",
        "            if isinstance(coin, FlatHeads):\n",
        "                self.increment(n_heads_count)\n",
        "            self.wait(small_wait_time)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(hundred_boxes[0]),\n",
        "            coins.set_stroke, {\"width\": 0},\n",
        "            coins.replace, hundred_boxes[0]\n",
        "        )\n",
        "        hundred_boxes[0].add(coins)\n",
        "        for box, prop in list(zip(hundred_boxes, proportions))[1:]:\n",
        "            self.add(box)\n",
        "            self.increment(n_flips_count, 100)\n",
        "            self.increment(n_heads_count, int(np.round(prop * 100)))\n",
        "            self.wait(small_wait_time)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(ten_k_boxes[0]),\n",
        "            hundred_boxes.set_stroke, {\"width\": 0},\n",
        "            hundred_boxes.replace, ten_k_boxes[0]\n",
        "        )\n",
        "        ten_k_boxes[0].add(hundred_boxes)\n",
        "        for box, prop in list(zip(ten_k_boxes, ten_k_proportions))[1:]:\n",
        "            self.add(box)\n",
        "            self.increment(n_flips_count, 10000)\n",
        "            self.increment(n_heads_count, int(np.round(prop * 10000)))\n",
        "            self.wait(small_wait_time)\n",
        "        self.wait()\n",
        "\n",
        "    def organize_group(self, group):\n",
        "        group.arrange_in_grid(10)\n",
        "        group.set_height(5)\n",
        "        group.shift(DOWN + 2 * LEFT)\n",
        "\n",
        "    def increment(self, integer_mob, value=1):\n",
        "        new_int = Integer(integer_mob.number + value)\n",
        "        new_int.move_to(integer_mob, DL)\n",
        "        integer_mob.number += value\n",
        "        integer_mob.submobjects = new_int.submobjects\n",
        "\n",
        "\n",
        "class PropHeadsWithinThousandth(Scene):\n",
        "    def construct(self):\n",
        "        prob = OldTex(\n",
        "            \"P(499{,}000 \\\\le\", \"\\\\# \\\\text{H}\", \"\\\\le 501{,}000)\",\n",
        "            \"\\\\approx\", \"0.9545\",\n",
        "        )\n",
        "        prob[1].set_color(RED)\n",
        "        prob[-1].set_color(YELLOW)\n",
        "        self.add(prob)\n",
        "\n",
        "\n",
        "class PropHeadsWithinHundredth(Scene):\n",
        "    def construct(self):\n",
        "        prob = OldTex(\n",
        "            \"P(490{,}000 \\\\le\", \"\\\\# \\\\text{H}\", \"\\\\le 510{,}000)\",\n",
        "            \"\\\\approx\", \"0.99999999\\\\dots\",\n",
        "        )\n",
        "        prob[1].set_color(RED)\n",
        "        prob[-1].set_color(YELLOW)\n",
        "        self.add(prob)\n"
    ]
}