{
    "topic": "the concept of probability.",
    "code": [
        "from manim_imports_ext import *\n",
        "from manimlib.logger import log\n",
        "import urllib.request\n",
        "\n",
        "\n",
        "WINNERS = [\n",
        "    (\"That weird light at the bottom of a mug \u2014 ENVELOPES\", \"Paralogical\", \"fJWnA4j0_ho\"),\n",
        "    (\"Hiding Images in Plain Sight: The Physics Of Magic Windows\", \"Matt Ferraro\", \"CatInCausticImage\"),\n",
        "    (\"The Beauty of B\u00e9zier Curves\", \"Freya Holm\u00e9r\", \"aVwxzDHniEw\"),\n",
        "    (\"What Is The Most Complicated Lock Pattern?\", \"Dr. Zye\", \"PKjbBQ0PBCQ\"),\n",
        "    (\"Pick's theorem: The wrong, amazing proof\", \"spacematt\", \"uh-yRNqLpOg\"),\n",
        "]\n",
        "\n",
        "HONORABLE_MENTIONS = [\n",
        "    (\"Dirac's belt trick, Topology, and Spin \u00bd particles\", \"Noah Miller\", \"ACZC_XEyg9U\"),\n",
        "    (\"Galois-Free Guarantee! | The Insolubility of the Quintic\", \"Carl Turner\", \"BSHv9Elk1MU\"),\n",
        "    (\"The Two Envelope Problem - a Mystifying Probability Paradox\", \"Formant\", \"_NGPncypY68\"),\n",
        "    (\"The Math Behind Font Rasterization | How it Works\", \"GamesWithGabe\", \"LaYPoMPRSlk\"),\n",
        "    (\"What is a Spinor?\", \"Mia Hughes\", \"SpinorArticle\"),\n",
        "    (\"Understanding e\", \"Veli Peltola\", \"e_comic\"),\n",
        "    (\"Ancient Multiplication Trick\", \"Inigo Quilez\", \"CsMrHzp850M\"),\n",
        "    (\"\u5bf9\u79f0\u591a\u9879\u5f0f\u57fa\u672c\u5b9a\u7406\u81ea\u6211\u63a2\u7a76\", \"\u51e1\u4eba\u5fc6\u62fe\", \"FiveIntsTheorem\"),\n",
        "    (\"Lehmer Factor Stencils\", \"Proof of Concept\", \"QzohwKT6TNA\"),\n",
        "    (\"What is the limit of a sequence of graphs?\", \"Spectral Collective\", \"7Gj9BH4IZ-4\"),\n",
        "    (\"Steiner's Porism: proving a cool animation\", \"Joseph Newton\", \"fKAyaP8IzlE\"),\n",
        "    (\"Wait, Probabilities can be Negative?!\", \"Steven G\", \"std9EBbtOC0\"),\n",
        "    (\"This random graph fact will blow your mind\", \"Snarky Math\", \"3QjZ31lj974\"),\n",
        "    (\"Why is pi here? Estimating \u03c0 by Buffon's n\u0336e\u0336e\u0336d\u0336l\u0336e noodle!\", \"Mihai Nica\", \"e-RUyCs9B08\"),\n",
        "    (\"Introduction to Waves\", \"Rob Schlub\", \"IntroToWaves\"),\n",
        "    (\"ComplexFunctions\", \"Treena\", \"Treena\"),\n",
        "    (\"I spent an entire summer to find this spiral\", \"Sort of School\", \"n-e9C8g5x68\"),\n",
        "    (\"HACKENBUSH: a window to a new world of math\", \"Owen Maitzen\", \"ZYj4NkeGPdM\"),\n",
        "    (\"The Tale of the Lights Puzzle\", \"Throw Math At It\", \"9aZsABF-Vj4\"),\n",
        "    (\"The BEST Way to Find a Random Point in a Circle\", \"nubDotDev\", \"4y_nmpv-9lI\"),\n",
        "    (\"Secrets of the Fibonacci Tiles\", \"Eric Severson\", \"Ct7oltmdJrM\"),\n",
        "    (\"The Tale of Three Triangles\", \"Robin Truax\", \"5nuYD2M2AX8\"),\n",
        "    (\"How Karatsuba's algorithm gave us new ways to multiply\", \"Nemean\", \"cCKOl5li6YM\"),\n",
        "    (\"Can you change a sum by rearranging its numbers? --- The Riemann Series Theorem\", \"Morphocular\", \"U0w0f0PDdPA\"),\n",
        "    (\"Neural manifolds - The Geometry of Behaviour\", \"Artem Kirsanov\", \"QHj9uVmwA_0\"),\n",
        "]\n",
        "\n",
        "\n",
        "def get_youtube_slugs(file=\"some1_video_urls.txt\"):\n",
        "    full_path = os.path.join(get_directories()[\"data\"], file)\n",
        "    slugs = []\n",
        "    prefix = \"https://youtu.be/\"\n",
        "    with open(full_path, \"r\") as fp:\n",
        "        for url in fp.readlines():\n",
        "            if not url.startswith(prefix):\n",
        "                continue\n",
        "            slugs.append(url[len(prefix):-1])\n",
        "    return remove_list_redundancies(slugs)\n",
        "\n",
        "\n",
        "def save_thumbnail_locally(slug, rewrite=False):\n",
        "    file = yt_slug_to_image_file(slug)\n",
        "    if os.path.exists(file) and not rewrite:\n",
        "        return file\n",
        "    suffixes = [\"maxresdefault\", \"hqdefault\", \"mqdefault\", \"sddefault\"]\n",
        "    urls = [\n",
        "        *(\n",
        "            f\"https://img.youtube.com/vi/{slug}/{suffix}.jpg\"\n",
        "            for suffix in suffixes\n",
        "        ),\n",
        "        *(\n",
        "            f\"https://i.ytimg.com/vi/{slug}/{suffix}.jpg\"\n",
        "            for suffix in suffixes\n",
        "        )\n",
        "    ]\n",
        "    for url in urls:\n",
        "        try:\n",
        "            urllib.request.urlretrieve(url, file)\n",
        "            return file\n",
        "        except urllib.request.HTTPError:\n",
        "            pass\n",
        "    log.warning(f\"Thumbnail not found: {slug}\")\n",
        "\n",
        "\n",
        "def save_thumbnails_locally(slugs):\n",
        "    map(save_thumbnail_locally, slugs)\n",
        "\n",
        "\n",
        "def yt_slug_to_image_file(slug):\n",
        "    return os.path.join(\n",
        "        get_raster_image_dir(),\n",
        "        \"some1_thumbnails\",\n",
        "        slug + \".jpg\"\n",
        "    )\n",
        "\n",
        "\n",
        "class Introduction(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        # Kill background\n",
        "        self.clear()\n",
        "        morty = self.teacher\n",
        "\n",
        "        # Add title\n",
        "        this_summer = Text(\"This Summer\", font_size=72)\n",
        "        this = this_summer.get_part_by_text(\"This\")\n",
        "        summer = this_summer.get_part_by_text(\"Summer\")\n",
        "        this_summer.to_edge(UP)\n",
        "        some = Text(\"Summer of Math Exposition\", font_size=72)\n",
        "        some.to_edge(UP)\n",
        "        some.shift(0.7 * RIGHT)\n",
        "        this_summer.generate_target()\n",
        "        this_summer.target.shift(some[0].get_left() - summer[0].get_left())\n",
        "\n",
        "        logos = Group(\n",
        "            ImageMobject(\"Leios\"),\n",
        "            Logo(),\n",
        "        )\n",
        "        for logo in logos:\n",
        "            logo.set_height(1.0)\n",
        "        logos.arrange(RIGHT, buff=2)\n",
        "        logos.next_to(this_summer.target, RIGHT, buff=1.5)\n",
        "        james_name = Text(\"James Schloss\")\n",
        "        james_name.set_color(GREY_A)\n",
        "        james_name.next_to(logos[0], DOWN)\n",
        "\n",
        "        logos.generate_target()\n",
        "        logos.target.set_height(0.5)\n",
        "        logos.target.arrange(RIGHT, buff=0.25)\n",
        "        logos.target.replace(this_summer.target[:4], 0)\n",
        "\n",
        "        self.add(this)\n",
        "        self.wait(0.3)\n",
        "        self.add(summer)\n",
        "        self.wait(0.5)\n",
        "        self.play(\n",
        "            MoveToTarget(this_summer),\n",
        "            FadeIn(james_name, lag_ratio=0.1),\n",
        "            FadeIn(logos[0], LEFT),\n",
        "        )\n",
        "        self.play(\n",
        "            Write(logos[1], lag_ratio=0.01, stroke_width=0.05, run_time=1),\n",
        "            Animation(logos[1][-1].copy(), remover=True),\n",
        "            FadeOut(james_name),\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(some[len(\"Summer\"):], lag_ratio=0.1),\n",
        "            FadeOut(this),\n",
        "            MoveToTarget(logos, path_arc=-PI / 3, run_time=2)\n",
        "        )\n",
        "        self.remove(this_summer)\n",
        "        self.add(some)\n",
        "        self.wait()\n",
        "\n",
        "        title = Group(logos, some)\n",
        "\n",
        "        # Mention blog post\n",
        "        url = VGroup(\n",
        "            Text(\"Full details: \"),\n",
        "            Text(\"https://3b1b.co/some1-results\")\n",
        "        )\n",
        "        url[1].set_color(BLUE_C)\n",
        "        url.arrange(RIGHT)\n",
        "        url[0].shift(0.05 * UP)\n",
        "        url.to_edge(UP)\n",
        "\n",
        "        self.play(\n",
        "            FadeOut(title, UP),\n",
        "            FadeIn(url[0]),\n",
        "            ShowIncreasingSubsets(url[1], rate_func=linear, run_time=2)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Key points\n",
        "        dots = Dot().get_grid(3, 1)\n",
        "        dots.arrange(DOWN, buff=1.5)\n",
        "        dots.align_to(url, LEFT)\n",
        "        dots.set_y(-0.5)\n",
        "\n",
        "        points = VGroup(\n",
        "            Text(\"Extremely open-ended\"),\n",
        "            Text(\"Promise to feature 4 to 5 winners\"),\n",
        "            Text(\"Brilliant offered $5k in cash prizes\"),\n",
        "        )\n",
        "        colors = [GREEN_A, GREEN_B, GREEN_C]\n",
        "\n",
        "        for dot, point, color in zip(dots, points, colors):\n",
        "            point.next_to(dot, RIGHT)\n",
        "            point.set_color(color)\n",
        "\n",
        "        self.play(\n",
        "            LaggedStartMap(\n",
        "                FadeInFromPoint, dots,\n",
        "                lambda m: (m, url.get_bottom()),\n",
        "            ),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        for point in points:\n",
        "            self.play(Write(point))\n",
        "            if point is points[1]:\n",
        "                self.play(\n",
        "                    morty.change(\"hooray\").look(ORIGIN),\n",
        "                    FadeOut(BackgroundRectangle(morty, buff=0.25, fill_opacity=1))\n",
        "                )\n",
        "                self.play(Blink(morty))\n",
        "                self.play(morty.change(\"tease\", points[2]))\n",
        "            else:\n",
        "                self.wait()\n",
        "\n",
        "        # Discuss winner\n",
        "        winner_word = OldTexText(\"``Winners''\", font_size=72)[0]\n",
        "        winner_word.move_to(self.hold_up_spot, DOWN)\n",
        "        pre_winner_word = points[1].get_part_by_text(\"winner\").copy()\n",
        "\n",
        "        self.students.flip().flip()\n",
        "\n",
        "        self.add(self.background, pre_winner_word, *self.pi_creatures)\n",
        "        self.play(\n",
        "            LaggedStartMap(FadeOut, VGroup(\n",
        "                url, dots, points,\n",
        "            )),\n",
        "            FadeIn(self.background),\n",
        "            morty.change(\"hesitant\", winner_word),\n",
        "            FadeTransform(pre_winner_word, winner_word[2:9]),\n",
        "            LaggedStartMap(FadeIn, self.students),\n",
        "        )\n",
        "        self.play(\n",
        "            Write(winner_word[:2]),\n",
        "            Write(winner_word[-2:]),\n",
        "            self.change_students(\"sassy\", \"raise_right_hand\", \"raise_left_hand\"),\n",
        "        )\n",
        "        self.wait(4)\n",
        "\n",
        "        # Spirit of the event (start at 25)\n",
        "        salt = Text(\"Take with a grain of salt\")\n",
        "        salt.to_edge(UP)\n",
        "        strange = Text(\"(what a strange phrase...)\", font_size=20)\n",
        "        strange.set_color(GREY_B)\n",
        "        strange.next_to(salt, RIGHT)\n",
        "        arrow = Arrow(salt, winner_word)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(salt, lag_ratio=0.1),\n",
        "            ShowCreation(arrow),\n",
        "            self.change_students(\n",
        "                \"pondering\", \"pondering\", \"erm\",\n",
        "                look_at=salt,\n",
        "            )\n",
        "        )\n",
        "        self.play(\n",
        "            Blink(self.students[2]),\n",
        "            FadeIn(strange, lag_ratio=0.1),\n",
        "        )\n",
        "        self.play(FadeOut(strange))\n",
        "        self.wait()\n",
        "\n",
        "        spirit = Text(\"The spirit of the event\")\n",
        "        spirit.to_edge(UP)\n",
        "        bubble = ThoughtBubble(height=3, width=3)\n",
        "        bubble.pin_to(self.students[0])\n",
        "        bubble.shift(SMALL_BUFF * UR)\n",
        "        bubble.add_content(OldTex(\n",
        "            r\"|fg|_1 \\leq |f|_p |g|_q\",\n",
        "            tex_to_color_map={\n",
        "                \"f\": GREEN,\n",
        "                \"g\": TEAL,\n",
        "            }\n",
        "        ))\n",
        "        bubble.add(bubble.content)\n",
        "        arrow.target = Arrow(spirit, bubble)\n",
        "        video = VideoIcon()\n",
        "        video.set_height(0.7)\n",
        "        video.next_to(self.students, UP, MED_LARGE_BUFF).to_edge(LEFT)\n",
        "        video.set_color(GREY_C)\n",
        "        video.set_gloss(1)\n",
        "\n",
        "        self.play(\n",
        "            FadeOut(salt, 0.5 * UP),\n",
        "            FadeIn(spirit, 0.5 * UP),\n",
        "        )\n",
        "        self.play(\n",
        "            MoveToTarget(arrow),\n",
        "            FadeIn(bubble),\n",
        "            self.students[0].change(\"thinking\", bubble),\n",
        "            self.students[1].change(\"pondering\", bubble),\n",
        "            self.students[2].change(\"pondering\", bubble),\n",
        "            self.teacher.change(\"happy\", bubble),\n",
        "            winner_word.animate.scale(0.3).set_opacity(0.5).to_corner(UR),\n",
        "        )\n",
        "        self.play(\n",
        "            self.students[0].change(\"raise_left_hand\", video),\n",
        "            FadeIn(video, 0.5 * UP),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        bubble_copies = bubble.replicate(2).scale(0.7)\n",
        "        for bc, student in zip(bubble_copies, self.students[1:]):\n",
        "            bc.move_to(student.get_corner(UR), DL)\n",
        "\n",
        "        self.play(\n",
        "            LaggedStart(*(\n",
        "                TransformFromCopy(bubble, bc)\n",
        "                for bc in bubble_copies\n",
        "            ), lag_ratio=0.5),\n",
        "            LaggedStart(*(\n",
        "                student.change(\"thinking\", UR)\n",
        "                for student in self.students[1:]\n",
        "            ), lag_ratio=0.5),\n",
        "            run_time=2,\n",
        "        )\n",
        "        self.wait(3)\n",
        "\n",
        "\n",
        "class ProsConsOfContext(Scene):\n",
        "    def construct(self):\n",
        "        title = Text(\"Framing as a contest\", font_size=60)\n",
        "        title.to_edge(UP)\n",
        "\n",
        "        h_line = Line(LEFT, RIGHT).set_width(FRAME_WIDTH)\n",
        "        h_line.next_to(title, DOWN)\n",
        "        v_line = Line(h_line.get_center(), FRAME_HEIGHT * DOWN / 2)\n",
        "\n",
        "        pro_label = Text(\"Pros\", font_size=60)\n",
        "        pro_label.set_color(GREEN)\n",
        "        pro_label.next_to(h_line, DOWN)\n",
        "        pro_label.set_x(-FRAME_WIDTH / 4)\n",
        "        con_label = Text(\"Cons\", font_size=60)\n",
        "        con_label.set_color(RED)\n",
        "        con_label.next_to(h_line, DOWN)\n",
        "        con_label.set_x(FRAME_WIDTH / 4)\n",
        "\n",
        "        self.play(\n",
        "            LaggedStart(\n",
        "                ShowCreation(h_line),\n",
        "                ShowCreation(v_line),\n",
        "                lag_ratio=0.5,\n",
        "            ),\n",
        "            LaggedStart(\n",
        "                FadeIn(title, 0.25 * UP),\n",
        "                FadeIn(pro_label),\n",
        "                FadeIn(con_label),\n",
        "                lag_ratio=0.5,\n",
        "            )\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        pros = VGroup(\n",
        "            Text(\"Clear deadline\"),\n",
        "            Text(\"Extra push for quality\"),\n",
        "        )\n",
        "        pros.set_color(GREEN_A)\n",
        "        pros.arrange(DOWN, buff=MED_LARGE_BUFF, aligned_edge=LEFT)\n",
        "        pros.next_to(pro_label, DOWN, LARGE_BUFF)\n",
        "\n",
        "        con = Text(\"Suggests that\\nsuccess = winning\")\n",
        "        con.set_color(RED_B)\n",
        "        con.match_x(con_label)\n",
        "        con.align_to(pros[0], UP)\n",
        "\n",
        "        for words in (*pros, con):\n",
        "            dot = Dot()\n",
        "            dot.next_to(words[0], LEFT)\n",
        "            words.add_to_back(dot)\n",
        "            self.play(Write(words, run_time=2))\n",
        "            self.wait()\n",
        "\n",
        "        self.embed()\n",
        "\n",
        "\n",
        "class FiltrationProcess(Scene):\n",
        "    def construct(self):\n",
        "        total = OldTexText(\"$>1{,}200(!)$ submissions\")\n",
        "\n",
        "        hundred = OldTexText(\"$\\\\sim 100$\")\n",
        "        hundred.next_to(total, RIGHT, buff=4)\n",
        "        arrow = Arrow(total, hundred, stroke_width=5)\n",
        "        VGroup(total, arrow, hundred).center().to_edge(UP)\n",
        "\n",
        "        peer_words = Text(\"Peer review process\", font_size=36)\n",
        "        peer_words.set_color(BLUE)\n",
        "        peer_words.next_to(arrow, DOWN, buff=SMALL_BUFF)\n",
        "        peer_subwords = OldTexText(\n",
        "            \"(actually quite interesting\\\\\\\\see the blog post)\",\n",
        "            font_size=24,\n",
        "            fill_color=GREY_B,\n",
        "        )\n",
        "        peer_subwords.next_to(peer_words, DOWN, MED_SMALL_BUFF)\n",
        "\n",
        "        self.play(FadeIn(total, lag_ratio=0.1))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            ShowCreation(arrow),\n",
        "            FadeIn(peer_words, lag_ratio=0.1)\n",
        "        )\n",
        "        self.play(\n",
        "            FadeIn(hundred),\n",
        "            FadeIn(peer_subwords, 0.25 * DOWN)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        # Guest judges\n",
        "        guest_words = Text(\"Guest judges:\")\n",
        "        guest_words.next_to(peer_subwords, DOWN, buff=LARGE_BUFF)\n",
        "        guest_words.add(Underline(guest_words))\n",
        "        guest_words.to_edge(RIGHT, buff=1.5)\n",
        "\n",
        "        guests = VGroup(\n",
        "            Text(\"Alex Kontorovich\"),\n",
        "            Text(\"Henry Reich\"),\n",
        "            Text(\"Nicky Case\"),\n",
        "            Text(\"Tai-Danae Bradley\"),\n",
        "            Text(\"Bukard Polster\"),\n",
        "            Text(\"Mithuna Yoganathan\"),\n",
        "            Text(\"Steven Strogatz\"),\n",
        "        )\n",
        "        guests.scale(0.75)\n",
        "        guests.set_color(GREY_B)\n",
        "        guests.arrange(DOWN, aligned_edge=LEFT)\n",
        "        guests.next_to(guest_words, DOWN, aligned_edge=LEFT)\n",
        "\n",
        "        self.play(\n",
        "            FadeIn(guest_words),\n",
        "            LaggedStartMap(\n",
        "                FadeIn, guests,\n",
        "                shift=0.25 * DOWN,\n",
        "                lag_ratio=0.5,\n",
        "                run_time=4,\n",
        "            )\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class AllVideosOrdered(Scene):\n",
        "    slug_file = \"some1_video_urls_ordered.txt\"\n",
        "    grid_size = 3\n",
        "    time_per_image = 0.2\n",
        "\n",
        "    def construct(self):\n",
        "        n = self.grid_size\n",
        "        N = n**2\n",
        "        time_per_image = self.time_per_image\n",
        "        buffer_size = 2 * N\n",
        "\n",
        "        slugs = get_youtube_slugs(self.slug_file)\n",
        "        random.shuffle(slugs)\n",
        "        log.info(f\"Number of slugs: {len(slugs)}\")\n",
        "        image_slots = ScreenRectangle().get_grid(n, n, buff=0.2)\n",
        "        image_slots.set_height(FRAME_HEIGHT)\n",
        "        image_slots.set_stroke(WHITE, 1)\n",
        "\n",
        "        images = buffer_size * [None]\n",
        "\n",
        "        self.add(image_slots)\n",
        "\n",
        "        def update_image(image, dt):\n",
        "            image.time += dt\n",
        "            image.set_opacity(clip(5 * image.time / (N * time_per_image), 0, 1))\n",
        "\n",
        "        k = 0\n",
        "        for slug in ProgressDisplay(slugs):\n",
        "            slot = image_slots[k % N]\n",
        "            save_thumbnail_locally(slug)\n",
        "            file = yt_slug_to_image_file(slug)\n",
        "            if not os.path.exists(file):\n",
        "                continue\n",
        "            if k > buffer_size:\n",
        "                old_image = images[k % buffer_size]\n",
        "                self.camera.release_texture(old_image.path)\n",
        "                self.remove(old_image)\n",
        "\n",
        "            image = ImageMobject(file)\n",
        "            image.replace(slot, stretch=True)\n",
        "\n",
        "            images[k % buffer_size] = image\n",
        "\n",
        "            image.time = 0\n",
        "            image.add_updater(update_image)\n",
        "            self.add(image)\n",
        "            self.wait(time_per_image)\n",
        "\n",
        "            k += 1\n",
        "\n",
        "            # Hack to keep OpenGL from tracking too many textures.\n",
        "            # Should be fixed more intelligently in Camera\n",
        "            if k % (buffer_size) == 0:\n",
        "                self.camera.n_textures = buffer_size + 2\n",
        "\n",
        "\n",
        "class RevealingTiles(Scene):\n",
        "    def construct(self):\n",
        "        self.five_winners()\n",
        "        self.honorable_mentions()\n",
        "\n",
        "    def five_winners(self):\n",
        "        # title = Text(\"SoME1 Winners\", font_size=72)\n",
        "        title = OldTexText(\"Summer of Math Exposition\\\\\\\\\", \"Winners\", font_size=72)\n",
        "        title[1].scale(2, about_edge=UP)\n",
        "        title[1].set_color(YELLOW)\n",
        "        title.to_edge(UP, buff=0.2)\n",
        "        # \n",
        "        # title.to_edge(UP)\n",
        "        subtitle = Text(\"(in no particular order)\", font_size=36)\n",
        "        subtitle.next_to(title, DOWN, buff=0.2)\n",
        "        subtitle.set_color(GREY_B)\n",
        "\n",
        "        self.add(title)\n",
        "\n",
        "        tiles = self.get_mystery_tile().replicate(5)\n",
        "        colors = color_gradient([BLUE_B, BLUE_D], 5)\n",
        "        for tile, color in zip(tiles, colors):\n",
        "            # tile[0].set_stroke(color, 1)\n",
        "            tile[0].set_stroke(YELLOW, 2)\n",
        "        tiles.set_height(2)\n",
        "        tiles.arrange_in_grid(2, 3, buff=MED_SMALL_BUFF)\n",
        "        tiles[3:].match_x(tiles[:3])\n",
        "        tiles.set_width(FRAME_WIDTH - 2)\n",
        "        # tiles.to_edge(DOWN, buff=1)\n",
        "        tiles.to_edge(DOWN, buff=0.25)\n",
        "\n",
        "        reorder = list(range(5))\n",
        "        random.seed(1)\n",
        "        random.shuffle(reorder)\n",
        "\n",
        "        # Animations\n",
        "        self.play(\n",
        "            Write(title),\n",
        "            LaggedStartMap(GrowFromCenter, tiles, lag_ratio=0.15)\n",
        "        )\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            FadeIn(subtitle, lag_ratio=0.2),\n",
        "            LaggedStart(*(\n",
        "                ApplyMethod(\n",
        "                    tile.move_to, tiles[reorder[i]],\n",
        "                    path_arc=PI / 2\n",
        "                )\n",
        "                for i, tile in enumerate(tiles)\n",
        "            ), lag_ratio=0.25, run_time=2)\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        #\n",
        "        for tile, triple in zip(tiles, WINNERS):\n",
        "            self.reveal_tile(tile, *triple)\n",
        "\n",
        "        self.title = title\n",
        "        self.subtitle = subtitle\n",
        "        self.tiles = tiles\n",
        "\n",
        "    def honorable_mentions(self):\n",
        "        tiles = self.tiles\n",
        "\n",
        "        new_title = OldTexText(\"Others you'll enjoy\", font_size=72)\n",
        "        new_title.to_edge(UP, buff=MED_SMALL_BUFF)\n",
        "\n",
        "        tiles.generate_target()\n",
        "        new_tile = self.get_mystery_tile()\n",
        "        new_tile.replace(tiles[0])\n",
        "        new_tiles = Group(\n",
        "            *tiles.target,\n",
        "            *new_tile.replicate(len(HONORABLE_MENTIONS))\n",
        "        )\n",
        "        new_tiles.arrange_in_grid(5, 6, buff=0.25)\n",
        "        new_tiles.set_height(6.5)\n",
        "        new_tiles.next_to(new_title, DOWN)\n",
        "\n",
        "        self.play(\n",
        "            FadeTransform(self.title, new_title),\n",
        "            FadeOut(self.subtitle),\n",
        "            MoveToTarget(tiles),\n",
        "            LaggedStartMap(\n",
        "                FadeInFromPoint, new_tiles[5:],\n",
        "                lambda m: (m, ORIGIN),\n",
        "                lag_ratio=0.1,\n",
        "                run_time=5,\n",
        "            )\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "        reorder_tail = list(range(5, len(new_tiles)))\n",
        "        random.shuffle(reorder_tail)\n",
        "        reorder = [*range(5), *reorder_tail]\n",
        "        centers = [nt.get_center().copy() for nt in new_tiles]\n",
        "        for i, tile in enumerate(new_tiles):\n",
        "            tile.move_to(centers[reorder[i]])\n",
        "\n",
        "        for tile, triple in zip(new_tiles[5:], HONORABLE_MENTIONS):\n",
        "            self.reveal_tile(tile, *triple)\n",
        "\n",
        "    def reveal_tile(self, tile, title, author, image_name):\n",
        "        # Flip tile\n",
        "        try:\n",
        "            image_path = get_full_raster_image_path(image_name)\n",
        "        except IOError:\n",
        "            # Try to redownload best YT slug\n",
        "            save_thumbnail_locally(image_name)\n",
        "            image_path = yt_slug_to_image_file(image_name)\n",
        "        # Trim to be 16x9\n",
        "        arr = np.array(Image.open(image_path))\n",
        "        h, w, _ = arr.shape\n",
        "        nh = w * 9 // 16\n",
        "        if nh < h:\n",
        "            trimmed_arr = arr[(h - nh) // 2:(h - nh) // 2 + nh, :, :]\n",
        "            Image.fromarray(trimmed_arr).save(image_path)\n",
        "\n",
        "        image = ImageMobject(image_path)\n",
        "        image.rotate(PI, RIGHT)\n",
        "        image.replace(tile, dim_to_match=1)\n",
        "        image.set_max_width(tile.get_width())\n",
        "\n",
        "        self.play(\n",
        "            Rotate(image, PI, RIGHT),\n",
        "            Rotate(tile, PI, RIGHT),\n",
        "            UpdateFromAlphaFunc(\n",
        "                tile, lambda m, a: m.set_opacity(1 if a < 0.5 else 0),\n",
        "            ),\n",
        "            UpdateFromAlphaFunc(\n",
        "                image, lambda m, a: m.set_opacity(0 if a < 0.5 else 1),\n",
        "            ),\n",
        "        )\n",
        "        tile.remove(tile[1])\n",
        "        tile[0].set_fill(BLACK, 1)\n",
        "        tile.add(image)\n",
        "\n",
        "        # Expand\n",
        "        full_rect = FullScreenRectangle()\n",
        "        full_rect.set_fill(GREY_E)\n",
        "\n",
        "        title = Text(title)\n",
        "        title.set_max_width(FRAME_WIDTH - 1)\n",
        "        title.to_edge(UP, buff=MED_SMALL_BUFF)\n",
        "        byline = Text(f\"by {author}\", font_size=30)\n",
        "        byline.set_color(GREY_B)\n",
        "        byline.next_to(title, DOWN, buff=0.2)\n",
        "\n",
        "        tile.save_state()\n",
        "        tile.generate_target()\n",
        "        tile.target.set_height(6)\n",
        "        tile.target.next_to(byline, DOWN)\n",
        "        tile.saved_state[0].set_stroke(opacity=1)\n",
        "\n",
        "        self.add(full_rect, tile)\n",
        "        self.play(\n",
        "            FadeIn(full_rect),\n",
        "            MoveToTarget(tile, run_time=2),\n",
        "            FadeInFromPoint(title, tile.get_top(), run_time=2),\n",
        "        )\n",
        "        self.play(FadeIn(byline, 0.25 * DOWN))\n",
        "        self.wait()\n",
        "        self.play(\n",
        "            Restore(tile),\n",
        "            FadeOut(full_rect),\n",
        "            FadeOut(title, 0.75 * UP),\n",
        "            FadeOut(byline, 1.0 * UP),\n",
        "        )\n",
        "\n",
        "    def get_mystery_tile(self):\n",
        "        rect = ScreenRectangle(height=1)\n",
        "        rect.set_stroke(BLUE_D, 1)\n",
        "        rect.set_fill(GREY_D, 1)\n",
        "        q_marks = OldTex(\"???\")\n",
        "        q_marks.flip().flip()\n",
        "        q_marks.set_fill(GREY_A)\n",
        "        q_marks.move_to(rect)\n",
        "        q_marks.shift(1e-3 * OUT)\n",
        "        return Group(rect, q_marks)\n",
        "\n",
        "\n",
        "class AlmostTooGood(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.pi_creatures.flip().flip()\n",
        "        self.teacher_says(\n",
        "            OldTexText(\"Almost \\\\emph{too} good\"),\n",
        "            look_at=self.students[2].eyes,\n",
        "            added_anims=[self.change_students(\"happy\", \"tease\", \"hesitant\")],\n",
        "        )\n",
        "        self.wait(4)\n",
        "\n",
        "\n",
        "class ViewRect(Scene):\n",
        "    views = 596\n",
        "\n",
        "    def construct(self):\n",
        "        rect = Rectangle(3.5, 1)\n",
        "        rect.set_height(0.25)\n",
        "        rect.set_stroke(RED, 3)\n",
        "\n",
        "        number = Integer(self.views, font_size=96)\n",
        "        number.set_fill(RED)\n",
        "        number.next_to(rect, DOWN, LARGE_BUFF)\n",
        "        number.shift(3 * RIGHT)\n",
        "\n",
        "        arrow = Arrow(rect, number)\n",
        "        arrow.set_color(RED)\n",
        "\n",
        "        self.play(\n",
        "            ShowCreation(rect)\n",
        "        )\n",
        "\n",
        "        number.set_value(0)\n",
        "        self.play(\n",
        "            ShowCreation(arrow),\n",
        "            # FadeInFromPoint(number, arrow.get_start())\n",
        "            ChangeDecimalToValue(number, self.views, run_time=2),\n",
        "            VFadeIn(number),\n",
        "            UpdateFromFunc(number, lambda m: m.set_fill(RED))\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class ViewRect700k(ViewRect):\n",
        "    views = 795095\n",
        "\n",
        "\n",
        "class SureSure(TeacherStudentsScene):\n",
        "    def construct(self):\n",
        "        self.students.flip().flip()\n",
        "        self.teacher_says(\n",
        "            \"The point is \\n not the winners\",\n",
        "            look_at=self.students[2].eyes,\n",
        "            bubble_config={\"height\": 3, \"width\": 4}\n",
        "        )\n",
        "        self.play(PiCreatureSays(\n",
        "            self.students[0],\n",
        "            \"Yeah, yeah, sure\\n it isn't...\",\n",
        "            bubble_config={\"height\": 2, \"width\": 3}\n",
        "        ))\n",
        "        self.play_student_changes(\"sassy\", \"angry\", \"hesitant\")\n",
        "        self.play(self.teacher.change(\"guilty\"))\n",
        "        self.wait(4)\n",
        "\n",
        "\n",
        "class Narrative(Scene):\n",
        "    def construct(self):\n",
        "        question = Text(\"What makes a good piece of exposition?\", font_size=60)\n",
        "        question.to_edge(UP)\n",
        "        question.add(Underline(question))\n",
        "        self.add(question)\n",
        "        properties = VGroup(\n",
        "            Text(\"Clarity\"),\n",
        "            Text(\"Motivation\"),\n",
        "            Text(\"Memorability\"),\n",
        "            Text(\"Narrative\"),\n",
        "        )\n",
        "        properties.scale(60 / 48)\n",
        "        properties.arrange(DOWN, buff=0.75, aligned_edge=LEFT)\n",
        "        properties.next_to(question, DOWN, LARGE_BUFF)\n",
        "        properties.set_fill(BLUE)\n",
        "        narrative = properties[-1]\n",
        "\n",
        "        for prop in properties:\n",
        "            dot = Dot()\n",
        "            dot.next_to(prop, LEFT)\n",
        "            self.play(\n",
        "                FadeIn(dot, scale=0.5),\n",
        "                FadeIn(prop, lag_ratio=0.1)\n",
        "            )\n",
        "\n",
        "        rect = FullScreenFadeRectangle()\n",
        "        rect.set_opacity(0.5)\n",
        "        self.add(rect, narrative)\n",
        "        self.play(\n",
        "            FadeIn(rect),\n",
        "            FlashAround(narrative, run_time=2, time_width=1),\n",
        "            narrative.animate.set_color(YELLOW),\n",
        "        )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class Traction(Scene):\n",
        "    def construct(self):\n",
        "        slug_count_pairs = [\n",
        "            (\"PKjbBQ0PBCQ\", \"$\\\\sim$800,000\"),\n",
        "            (\"ACZC_XEyg9U\", \"$\\\\sim$100,000\"),\n",
        "            (\"4y_nmpv-9lI\", \"$\\\\sim$140,000\"),\n",
        "            (\"cCKOl5li6YM\", \"$\\\\sim$400,000\"),\n",
        "        ]\n",
        "        groups = Group()\n",
        "        for slug, count in slug_count_pairs:\n",
        "            rect = ScreenRectangle()\n",
        "            rect.set_height(3)\n",
        "            rect.set_stroke(BLUE, 2)\n",
        "            image = ImageMobject(yt_slug_to_image_file(slug))\n",
        "            image.replace(rect, 1)\n",
        "            text = OldTexText(f\"{count} views\")\n",
        "            text.next_to(image, DOWN, MED_SMALL_BUFF)\n",
        "            groups.add(Group(image, rect, text))\n",
        "\n",
        "        groups.arrange_in_grid(v_buff=MED_LARGE_BUFF, h_buff=LARGE_BUFF)\n",
        "        groups.set_height(FRAME_HEIGHT - 1)\n",
        "\n",
        "        for elem in groups:\n",
        "            self.play(\n",
        "                FadeIn(elem[:2]),\n",
        "                FadeIn(elem[-1], 0.5 * DOWN, scale=2)\n",
        "            )\n",
        "        self.wait()\n",
        "\n",
        "\n",
        "class EndScreen(PatreonEndScreen):\n",
        "    pass\n"
    ]
}