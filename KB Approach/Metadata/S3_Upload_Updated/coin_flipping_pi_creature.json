{
    "topic": "demonstrates the concept of a pi creature flipping a coin. The animation shows",
    "code": [
        "from mobject.types.vectorized_mobject import *\n",
        "from animation.animation import *\n",
        "from animation.composition import *\n",
        "from mobject.geometry import Rectangle, Line\n",
        "from utils.rate_functions import *\n",
        "from for_3b1b_videos.pi_creature_scene import *\n",
        "from _2018.eop.reusables.eop_helpers import *\n",
        "from _2018.eop.reusables.eop_constants import *\n",
        "from _2018.eop.reusables.coin_flipping_pi_creature import *\n",
        "\n",
        "\n",
        "class PiCreatureCoin(VMobject):\n",
        "    CONFIG = {\n",
        "        \"diameter\": 0.8,\n",
        "        \"thickness\": 0.2,\n",
        "        \"nb_ridges\" : 7,\n",
        "        \"stroke_color\": YELLOW,\n",
        "        \"stroke_width\": 3,\n",
        "        \"fill_color\": YELLOW,\n",
        "        \"fill_opacity\": 0.7,\n",
        "    }\n",
        "\n",
        "    def init_points(self):\n",
        "        outer_rect = Rectangle(\n",
        "            width = self.diameter,\n",
        "            height = self.thickness,\n",
        "            fill_color  = self.fill_color,\n",
        "            fill_opacity = self.fill_opacity,\n",
        "            stroke_color = self.stroke_color,\n",
        "            stroke_width = 0, #self.stroke_width\n",
        "        )\n",
        "        self.add(outer_rect)\n",
        "        PI = TAU/2\n",
        "        ridge_angles = np.arange(PI/self.nb_ridges,PI,PI/self.nb_ridges)\n",
        "        ridge_positions = 0.5 * self.diameter * np.array([\n",
        "            np.cos(theta) for theta in ridge_angles\n",
        "        ])\n",
        "        ridge_color = interpolate_color(BLACK,self.stroke_color,0.5)\n",
        "        for x in ridge_positions:\n",
        "            ridge = Line(\n",
        "                x * RIGHT + 0.5 * self.thickness * DOWN,\n",
        "                x * RIGHT + 0.5 * self.thickness * UP,\n",
        "                stroke_color = ridge_color,\n",
        "                stroke_width = self.stroke_width\n",
        "            )\n",
        "            self.add(ridge)\n",
        "\n",
        "class CoinFlippingPiCreature(PiCreature):\n",
        "    CONFIG = {\n",
        "        \"flip_height\": 3\n",
        "    }\n",
        "\n",
        "    def __init__(self, mode = \"coin_flip_1\", **kwargs):\n",
        "\n",
        "        coin = PiCreatureCoin()\n",
        "        PiCreature.__init__(self, mode = mode, **kwargs)\n",
        "        self.coin = coin\n",
        "        self.add(coin)\n",
        "        right_arm = self.get_arm_copies()[1]\n",
        "        coin.rotate(-TAU/24)\n",
        "        coin.next_to(right_arm, RIGHT+UP, buff = 0)\n",
        "        coin.shift(0.1 * self.get_width() * LEFT)\n",
        "        coin.shift(0.2 * DOWN)\n",
        "\n",
        "    def flip_coin_up(self):\n",
        "        self.change(\"coin_flip_2\")\n",
        "\n",
        "\n",
        "\n",
        "class FlipUpAndDown(Animation):\n",
        "    CONFIG = {\n",
        "        \"vector\" : UP,\n",
        "        \"height\" : 3,\n",
        "        \"nb_turns\" : 1\n",
        "    }\n",
        "\n",
        "    def update(self,t):\n",
        "        self.mobject.shift(self.height * 4 * t * (1 - t) * self.vector)\n",
        "        self.mobject.rotate(t * self.nb_turns * TAU)\n",
        "\n",
        "class FlipCoin(AnimationGroup):\n",
        "    CONFIG = {\n",
        "        \"coin_rate_func\" : there_and_back,\n",
        "        \"pi_rate_func\" : lambda t : there_and_back_with_pause(t, 1./4)\n",
        "    }\n",
        "    def __init__(self, pi_creature, **kwargs):\n",
        "        digest_config(self, kwargs)\n",
        "        pi_creature_motion = ApplyMethod(\n",
        "            pi_creature.flip_coin_up,\n",
        "            rate_func = self.pi_rate_func,\n",
        "            **kwargs\n",
        "        )\n",
        "        coin_motion = Succession(\n",
        "            EmptyAnimation(run_time = 1.0),\n",
        "            FlipUpAndDown(\n",
        "                pi_creature.coin, \n",
        "                vector = UP,\n",
        "                nb_turns = 5,\n",
        "                height = pi_creature.flip_height * pi_creature.get_height(),\n",
        "                rate_func = self.coin_rate_func,\n",
        "                **kwargs\n",
        "            )\n",
        "        )\n",
        "        AnimationGroup.__init__(self,pi_creature_motion, coin_motion)\n",
        "\n",
        "class CoinFlippingPiCreatureScene(Scene):\n",
        "\n",
        "    def construct(self):\n",
        "\n",
        "        randy = CoinFlippingPiCreature(color = MAROON_E)\n",
        "        self.add(randy)\n",
        "        self.play(FlipCoin(randy, run_time = 3))\n"
    ]
}